{"status":200,"content":"bG9jYWwgc3RlYW1uYW1lID0gcGFub3JhbWEub3BlbigiQ1NHT0h1ZCIpLk15UGVyc29uYUFQSS5HZXROYW1lKCkKbG9jYWwgZXVwaGVtaWEgPSBldXBoZW1pYV9kYXRhIGFuZCBldXBoZW1pYV9kYXRhKCkgb3IgewogICAgdXNlcm5hbWUgPSAiICBNT05TVFJZIiwKICAgIGJ1aWxkID0gInNlY3JldCIKfQoKbG9jYWwgZnVuY3Rpb24gbGVycChhLCBiLCB0KQogICAgcmV0dXJuIGEgKyAoYiAtIGEpICogdAplbmQKCmxvY2FsIHNjcmVlbl93aWR0aCwgc2NyZWVuX2hlaWdodCA9IGNsaWVudC5zY3JlZW5fc2l6ZSgpCgpsb2NhbCB2ZWN0b3IgPSByZXF1aXJlKCJ2ZWN0b3IiKQpsb2NhbCB5ID0gMApsb2NhbCBhbHBoYSA9IDI1NQpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCdwYWludF91aScsIGZ1bmN0aW9uKCkKbG9jYWwgc2NyZWVuID0gdmVjdG9yKGNsaWVudC5zY3JlZW5fc2l6ZSgpKQpsb2NhbCBzaXplID0gdmVjdG9yKHNjcmVlbi54LCBzY3JlZW4ueSkKCmxvY2FsIHNpemluZyA9IGxlcnAoMC4xLCAwLjksIG1hdGguc2luKGdsb2JhbHMucmVhbHRpbWUoKSAqIDAuOSkgKiAwLjUgKyAwLjUpCmxvY2FsIHJvdGF0aW9uID0gbGVycCgwLCAzNjAsIGdsb2JhbHMucmVhbHRpbWUoKSAlIDEpCmFscGhhID0gbGVycChhbHBoYSwgMCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDAuNSkKeSA9IGxlcnAoeSwgMjAsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyKQoKcmVuZGVyZXIucmVjdGFuZ2xlKDAsIDAsIHNpemUueCwgc2l6ZS55LCAxMywgMTMsIDEzLCBhbHBoYSkKcmVuZGVyZXIuY2lyY2xlX291dGxpbmUoc2NyZWVuLngvMiwgc2NyZWVuLnkvMiwgMjU1LCAyNTUsIDI1NSwgYWxwaGEsIDIwLCByb3RhdGlvbiwgc2l6aW5nLCAzKQpyZW5kZXJlci50ZXh0KHNjcmVlbi54LzIsIHNjcmVlbi55LzIgKyA0MCwgMjU1LCAyNTUsIDI1NSwgYWxwaGEsICdjJywgMCwgJ0xvYWRpbmcuLi4nKQpyZW5kZXJlci50ZXh0KHNjcmVlbi54LzIsIHNjcmVlbi55LzIgKyA2MCwgMjU1LCAyNTUsIDI1NSwgYWxwaGEsICdjJywgMCwgJ1dlbGNvbWUgLSBHTE9SSU9TQSBbU0VDUkVUXScpCiBlbmQpCgpsb2NhbCB2ZWN0b3IgPSByZXF1aXJlICd2ZWN0b3InCmxvY2FsIGNfZW50aXR5ID0gcmVxdWlyZSAnZ2FtZXNlbnNlL2VudGl0eScKbG9jYWwgaW1hZ2VzID0gcmVxdWlyZSgiZ2FtZXNlbnNlL2ltYWdlcyIpCmxvY2FsIGJhc2U2NCA9IHJlcXVpcmUgJ2dhbWVzZW5zZS9iYXNlNjQnCmxvY2FsIGNsaXBib2FyZCA9IHJlcXVpcmUgJ2dhbWVzZW5zZS9jbGlwYm9hcmQnCmxvY2FsIHN0ZWFtd29ya3MgPSByZXF1aXJlICdnYW1lc2Vuc2Uvc3RlYW13b3JrcycKbG9jYWwgY29sb3JfciwgY29sb3JfZywgY29sb3JfYiwgY29sb3JfYSA9IDI1NSwyNTUsMCwyNTUKbG9jYWwgY2xpZW50X3NldF9ldmVudF9jYWxsYmFjaywgY2xpZW50X3Vuc2V0X2V2ZW50X2NhbGxiYWNrID0gY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaywgY2xpZW50LnVuc2V0X2V2ZW50X2NhbGxiYWNrCmxvY2FsIGVudGl0eV9nZXRfbG9jYWxfcGxheWVyLCBlbnRpdHlfZ2V0X3BsYXllcl93ZWFwb24sIGVudGl0eV9nZXRfcHJvcCA9IGVudGl0eS5nZXRfbG9jYWxfcGxheWVyLCBlbnRpdHkuZ2V0X3BsYXllcl93ZWFwb24sIGVudGl0eS5nZXRfcHJvcApsb2NhbCB1aV9nZXQsIHVpX3NldCwgdWlfc2V0X2NhbGxiYWNrLCB1aV9zZXRfdmlzaWJsZSwgdWlfcmVmZXJlbmNlLCB1aV9uZXdfY2hlY2tib3gsIHVpX25ld19zbGlkZXIgPSB1aS5nZXQsIHVpLnNldCwgdWkuc2V0X2NhbGxiYWNrLCB1aS5zZXRfdmlzaWJsZSwgdWkucmVmZXJlbmNlLCB1aS5uZXdfY2hlY2tib3gsIHVpLm5ld19zbGlkZXIKWCxZID0gY2xpZW50LnNjcmVlbl9zaXplKCkKbG9jYWwgbm90aWZ5X2RhdGEgPSB7fQpsb2NhbCByZWYgPSB7CiAgICBhYV9lbmFibGUgPSB1aS5yZWZlcmVuY2UoIkFBIiwiYW50aS1haW1ib3QgYW5nbGVzIiwiZW5hYmxlZCIpLAogICAgcGl0Y2ggPSB1aS5yZWZlcmVuY2UoIkFBIiwiYW50aS1haW1ib3QgYW5nbGVzIiwicGl0Y2giKSwKICAgIHBpdGNoX3ZhbHVlID0gc2VsZWN0KDIsIHVpLnJlZmVyZW5jZSgiQUEiLCJhbnRpLWFpbWJvdCBhbmdsZXMiLCJwaXRjaCIpKSwKICAgIHlhd19iYXNlID0gdWkucmVmZXJlbmNlKCJBQSIsImFudGktYWltYm90IGFuZ2xlcyIsInlhdyBiYXNlIiksCiAgICB5YXcgPSB1aS5yZWZlcmVuY2UoIkFBIiwiYW50aS1haW1ib3QgYW5nbGVzIiwieWF3IiksCiAgICB5YXdfdmFsdWUgPSBzZWxlY3QoMiwgdWkucmVmZXJlbmNlKCJBQSIsImFudGktYWltYm90IGFuZ2xlcyIsInlhdyIpKSwKICAgIHlhd19qaXR0ZXIgPSB1aS5yZWZlcmVuY2UoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwiWWF3IEppdHRlciIpLAogICAgeWF3X2ppdHRlcl92YWx1ZSA9IHNlbGVjdCgyLCB1aS5yZWZlcmVuY2UoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwiWWF3IEppdHRlciIpKSwKICAgIGJvZHlfeWF3ID0gdWkucmVmZXJlbmNlKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsIkJvZHkgeWF3IiksCiAgICBib2R5X3lhd192YWx1ZSA9IHNlbGVjdCgyLCB1aS5yZWZlcmVuY2UoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwiQm9keSB5YXciKSksCiAgICBmcmVlc3RhbmRfYm9keV95YXcgPSB1aS5yZWZlcmVuY2UoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwiZnJlZXN0YW5kaW5nIGJvZHkgeWF3IiksCiAgICBlZGdleWF3ID0gdWkucmVmZXJlbmNlKCJBQSIsImFudGktYWltYm90IGFuZ2xlcyIsImVkZ2UgeWF3IiksCiAgICBmcmVlc3RhbmQgPSB7dWkucmVmZXJlbmNlKCJBQSIsImFudGktYWltYm90IGFuZ2xlcyIsImZyZWVzdGFuZGluZyIpfSwKICAgIHJvbGwgPSB1aS5yZWZlcmVuY2UoIkFBIiwiYW50aS1haW1ib3QgYW5nbGVzIiwicm9sbCIpLAogICAgc2xpZGUgPSB7dWkucmVmZXJlbmNlKCJBQSIsIm90aGVyIiwic2xvdyBtb3Rpb24iKX0sCiAgICBmYWtlZHVjayA9IHVpLnJlZmVyZW5jZSgicmFnZSIsIm90aGVyIiwiZHVjayBwZWVrIGFzc2lzdCIpLAogICAgcXVpY2tfcGVlayA9IHt1aS5yZWZlcmVuY2UoInJhZ2UiLCAib3RoZXIiLCAicXVpY2sgcGVlayBhc3Npc3QiKX0sCiAgICBkb3VibGV0YXAgPSB7dWkucmVmZXJlbmNlKCJyYWdlIiwgImFpbWJvdCIsICJkb3VibGUgdGFwIil9LAp9Cgpsb2NhbCByZWZlcmVuY2UgPSB7CiAgICBkb3VibGVfdGFwID0ge3VpLnJlZmVyZW5jZSgnUkFHRScsICdBaW1ib3QnLCAnRG91YmxlIHRhcCcpfSwKICAgIGR1Y2tfcGVla19hc3Npc3QgPSB1aS5yZWZlcmVuY2UoJ1JBR0UnLCAnT3RoZXInLCAnRHVjayBwZWVrIGFzc2lzdCcpLAoJcGl0Y2ggPSB7dWkucmVmZXJlbmNlKCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAnUGl0Y2gnKX0sCiAgICB5YXdfYmFzZSA9IHVpLnJlZmVyZW5jZSgnQUEnLCAnQW50aS1haW1ib3QgYW5nbGVzJywgJ1lhdyBiYXNlJyksCiAgICB5YXcgPSB7dWkucmVmZXJlbmNlKCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAnWWF3Jyl9LAogICAgeWF3X2ppdHRlciA9IHt1aS5yZWZlcmVuY2UoJ0FBJywgJ0FudGktYWltYm90IGFuZ2xlcycsICdZYXcgaml0dGVyJyl9LAogICAgYm9keV95YXcgPSB7dWkucmVmZXJlbmNlKCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAnQm9keSB5YXcnKX0sCiAgICBmcmVlc3RhbmRpbmdfYm9keV95YXcgPSB1aS5yZWZlcmVuY2UoJ0FBJywgJ2FudGktYWltYm90IGFuZ2xlcycsICdGcmVlc3RhbmRpbmcgYm9keSB5YXcnKSwKCWVkZ2VfeWF3ID0gdWkucmVmZXJlbmNlKCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAnRWRnZSB5YXcnKSwKCWZyZWVzdGFuZGluZyA9IHt1aS5yZWZlcmVuY2UoJ0FBJywgJ0FudGktYWltYm90IGFuZ2xlcycsICdGcmVlc3RhbmRpbmcnKX0sCiAgICByb2xsID0gdWkucmVmZXJlbmNlKCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAnUm9sbCcpLAogICAgb25fc2hvdF9hbnRpX2FpbSA9IHt1aS5yZWZlcmVuY2UoJ0FBJywgJ090aGVyJywgJ09uIHNob3QgYW50aS1haW0nKX0sCiAgICBzbG93X21vdGlvbiA9IHt1aS5yZWZlcmVuY2UoJ0FBJywgJ090aGVyJywgJ1Nsb3cgbW90aW9uJyl9LAogICAgYWFfZW5hYmxlID0gdWkucmVmZXJlbmNlKCJBQSIsImFudGktYWltYm90IGFuZ2xlcyIsImVuYWJsZWQiKQp9Cgpsb2NhbCBwcmV2X3NpbXVsYXRpb25fdGltZSA9IDAKCmxvY2FsIGZ1bmN0aW9uIHRpbWVfdG9fdGlja3ModCkKICAgIHJldHVybiBtYXRoLmZsb29yKDAuNSArICh0IC8gZ2xvYmFscy50aWNraW50ZXJ2YWwoKSkpCmVuZAoKbG9jYWwgZGlmZl9zaW0gPSAwCgpmdW5jdGlvbiBzaW1fZGlmZigpIAogICAgbG9jYWwgY3VycmVudF9zaW11bGF0aW9uX3RpbWUgPSB0aW1lX3RvX3RpY2tzKGVudGl0eS5nZXRfcHJvcChlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpLCAibV9mbFNpbXVsYXRpb25UaW1lIikpCiAgICBsb2NhbCBkaWZmID0gY3VycmVudF9zaW11bGF0aW9uX3RpbWUgLSBwcmV2X3NpbXVsYXRpb25fdGltZQogICAgcHJldl9zaW11bGF0aW9uX3RpbWUgPSBjdXJyZW50X3NpbXVsYXRpb25fdGltZQogICAgZGlmZl9zaW0gPSBkaWZmCiAgICByZXR1cm4gZGlmZl9zaW0KZW5kCgpmdW5jdGlvbiByZ2JhX3RvX2hleChiLGMsZCxlKQogICAgcmV0dXJuIHN0cmluZy5mb3JtYXQoJyUwMnglMDJ4JTAyeCUwMngnLGIsYyxkLGUpCmVuZAoKZnVuY3Rpb24gdGV4dF9mYWRlX2FuaW1hdGlvbihzcGVlZCwgciwgZywgYiwgYSwgdGV4dCkKICAgIGxvY2FsIGZpbmFsX3RleHQgPSAnJwogICAgbG9jYWwgY3VydGltZSA9IGdsb2JhbHMuY3VydGltZSgpCiAgICBmb3IgaT0wLCAjdGV4dCBkbwogICAgICAgIGxvY2FsIGNvbG9yID0gcmdiYV90b19oZXgociwgZywgYiwgYSptYXRoLmFicygxKm1hdGguY29zKDIqc3BlZWQqY3VydGltZS80K2kqNS8zMCkpKQogICAgICAgIGZpbmFsX3RleHQgPSBmaW5hbF90ZXh0Li4nXGEnLi5jb2xvci4udGV4dDpzdWIoaSwgaSkKICAgIGVuZAogICAgcmV0dXJuIGZpbmFsX3RleHQKZW5kCgpmdW5jdGlvbiB0ZXh0X2ZhZGVfYW5pbWF0aW9uX2d1d25vKHNwZWVkLCByLCBnLCBiLCBhLCB0ZXh0KQogICAgbG9jYWwgZmluYWxfdGV4dCA9ICcnCiAgICBsb2NhbCBjdXJ0aW1lID0gZ2xvYmFscy5jdXJ0aW1lKCkKICAgIGZvciBpID0gMCwgI3RleHQgZG8KICAgICAgICBsb2NhbCBjb2xvciA9IHJnYmFfdG9faGV4KHIsIGcsIGIsIGEgKiBtYXRoLmFicygxICogbWF0aC5jb3MoMiAqIHNwZWVkICogY3VydGltZSAvIDQgLSBpICogNSAvIDMwKSkpCiAgICAgICAgZmluYWxfdGV4dCA9IGZpbmFsX3RleHQgLi4gJ1xhJyAuLiBjb2xvciAuLiB0ZXh0OnN1YihpLCBpKQogICAgZW5kCiAgICByZXR1cm4gZmluYWxfdGV4dAplbmQKCmZ1bmN0aW9uIGdyYWRpZW50X3RleHQodGV4dCwgc3BlZWQsIHIsZyxiLGEpCiAgICBsb2NhbCBmaW5hbF90ZXh0ID0gJycKICAgIGxvY2FsIGN1cnRpbWUgPSBnbG9iYWxzLmN1cnRpbWUoKQogICAgbG9jYWwgY2VudGVyID0gbWF0aC5mbG9vcigjdGV4dCAvIDIpICsgMSAgLS0gY2FsY3VsYXRlIHRoZSBjZW50ZXIgb2YgdGhlIHRleHQKICAgIGZvciBpPTEsICN0ZXh0IGRvCiAgICAgICAgLS0gY2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBmcm9tIHRoZSBjZW50ZXIgY2hhcmFjdGVyCiAgICAgICAgbG9jYWwgZGlzdGFuY2UgPSBtYXRoLmFicyhpIC0gY2VudGVyKQogICAgICAgIC0tIGNhbGN1bGF0ZSB0aGUgYWxwaGEgYmFzZWQgb24gdGhlIGRpc3RhbmNlIGFuZCB0aGUgc3BlZWQgYW5kIHRpbWUKICAgICAgICBhID0gMjU1IC0gbWF0aC5hYnMoMjU1ICogbWF0aC5zaW4oc3BlZWQgKiBjdXJ0aW1lIC8gNCAtIGRpc3RhbmNlICogNCAvIDIwKSkKICAgICAgICBsb2NhbCBjb2wgPSByZ2JhX3RvX2hleChyLGcsYixhKQogICAgICAgIGZpbmFsX3RleHQgPSBmaW5hbF90ZXh0IC4uICdcYScgLi4gY29sIC4uIHRleHQ6c3ViKGksIGkpCiAgICBlbmQKICAgIHJldHVybiBmaW5hbF90ZXh0CmVuZAoKbG9jYWwgZ2xvYmFsc19mcmFtZXRpbWUgPSBnbG9iYWxzLmZyYW1ldGltZQpsb2NhbCBnbG9iYWxzX3RpY2tpbnRlcnZhbCA9IGdsb2JhbHMudGlja2ludGVydmFsCmxvY2FsIGVudGl0eV9pc19lbmVteSA9IGVudGl0eS5pc19lbmVteQpsb2NhbCBlbnRpdHlfaXNfZG9ybWFudCA9IGVudGl0eS5pc19kb3JtYW50CmxvY2FsIGVudGl0eV9pc19hbGl2ZSA9IGVudGl0eS5pc19hbGl2ZQpsb2NhbCBlbnRpdHlfZ2V0X29yaWdpbiA9IGVudGl0eS5nZXRfb3JpZ2luCmxvY2FsIGVudGl0eV9nZXRfcGxheWVyX3Jlc291cmNlID0gZW50aXR5LmdldF9wbGF5ZXJfcmVzb3VyY2UKbG9jYWwgdGFibGVfaW5zZXJ0ID0gdGFibGUuaW5zZXJ0CmxvY2FsIG1hdGhfZmxvb3IgPSBtYXRoLmZsb29yCgpsb2NhbCBsYXN0X3ByZXNzID0gMApsb2NhbCBkaXJlY3Rpb24gPSAwCmxvY2FsIGFudGlfYWltX29uX3VzZV9kaXJlY3Rpb24gPSAwCmxvY2FsIGNoZWtlZF90aWNrcyA9IDAKCmxvY2FsIEVfUE9TRV9QQVJBTUVURVJTID0gewogICAgU1RSQUZFX1lBVyA9IDAsCiAgICBTVEFORCA9IDEsCiAgICBMRUFOX1lBVyA9IDIsCiAgICBTUEVFRCA9IDMsCiAgICBMQURERVJfWUFXID0gNCwKICAgIExBRERFUl9TUEVFRCA9IDUsCiAgICBKVU1QX0ZBTEwgPSA2LAogICAgTU9WRV9ZQVcgPSA3LAogICAgTU9WRV9CTEVORF9DUk9VQ0ggPSA4LAogICAgTU9WRV9CTEVORF9XQUxLID0gOSwKICAgIE1PVkVfQkxFTkRfUlVOID0gMTAsCiAgICBCT0RZX1lBVyA9IDExLAogICAgQk9EWV9QSVRDSCA9IDEyLAogICAgQUlNX0JMRU5EX1NUQU5EX0lETEUgPSAxMywKICAgIEFJTV9CTEVORF9TVEFORF9XQUxLID0gMTQsCiAgICBBSU1fQkxFTkRfU1RBTkRfUlVOID0gMTQsCiAgICBBSU1fQkxFTkRfQ1JPVUNIX0lETEUgPSAxNiwKICAgIEFJTV9CTEVORF9DUk9VQ0hfV0FMSyA9IDE3LAogICAgREVBVEhfWUFXID0gMTgKfQoKbG9jYWwgZnVuY3Rpb24gY29udGFpbnMoc291cmNlLCB0YXJnZXQpCglmb3IgaWQsIG5hbWUgaW4gcGFpcnModWkuZ2V0KHNvdXJjZSkpIGRvCgkJaWYgbmFtZSA9PSB0YXJnZXQgdGhlbgoJCQlyZXR1cm4gdHJ1ZQoJCWVuZAoJZW5kCgoJcmV0dXJuIGZhbHNlCmVuZAoKZnVuY3Rpb24gcmVuZGVyX3JlY3Rfb3V0bGluZSh4LHksdyxoLHIsZyxiLGEpIAogICAgcmVuZGVyZXIubGluZSh4LCB5LCB4ICsgdywgeSwgcixnLGIsYSkKICAgIHJlbmRlcmVyLmxpbmUoeCwgeSwgeCwgeSArIGgsIHIsZyxiLGEpCiAgICByZW5kZXJlci5saW5lKHgsIHkgKyBoLCB4ICsgdywgeSArIGgsIHIsZyxiLGEpCiAgICByZW5kZXJlci5saW5lKHggKyB3LCB5LCB4ICsgdywgeSArIGgsIHIsZyxiLGEpCmVuZAoKbG9jYWwgZnVuY3Rpb24gaW50ZXJzZWN0KHgsIHksIHdpZHRoLCBoZWlnaHQpCiAgICBsb2NhbCBjeCwgY3kgPSB1aS5tb3VzZV9wb3NpdGlvbigpCiAgICByZXR1cm4gY3ggPj0geCBhbmQgY3ggPD0geCArIHdpZHRoIGFuZCBjeSA+PSB5IGFuZCBjeSA8PSB5ICsgaGVpZ2h0CmVuZAoKbG9jYWwgZnVuY3Rpb24gaXNfZGVmZW5zaXZlKGluZGV4KQogICAgY2hla2VkX3RpY2tzID0gbWF0aC5tYXgoZW50aXR5LmdldF9wcm9wKGluZGV4LCAnbV9uVGlja0Jhc2UnKSwgY2hla2VkX3RpY2tzIG9yIDApCgogICAgcmV0dXJuIG1hdGguYWJzKGVudGl0eS5nZXRfcHJvcChpbmRleCwgJ21fblRpY2tCYXNlJykgLSBjaGVrZWRfdGlja3MpID4gMiBhbmQgbWF0aC5hYnMoZW50aXR5LmdldF9wcm9wKGluZGV4LCAnbV9uVGlja0Jhc2UnKSAtIGNoZWtlZF90aWNrcykgPCAxNAplbmQKCmxvY2FsIHNldHRpbmdzID0ge30KbG9jYWwgYW50aV9haW1fc2V0dGluZ3MgPSB7fQpsb2NhbCBhbnRpX2FpbV9zdGF0ZXMgPSB7J0dsb2JhbCcsICdTdGFuZGluZycsICdNb3ZpbmcnLCAnU2xvdyBtb3Rpb24nLCAnQ3JvdWNoaW5nJywgJ0Nyb3VjaGluZyAmIG1vdmluZycsICdJbiBhaXInLCAnSW4gYWlyICYgY3JvdWNoaW5nJywgJ05vIGV4cGxvaXRzJywgJ09uIHVzZSd9CmxvY2FsIGFudGlfYWltX2RpZmZlcmVudCA9IHsnJywgJ8KgJywgJ8KgwqAnLCAnwqDCoMKgJywgJ8KgwqDCoMKgJywgJ8KgwqDCoMKgwqAnLCAnwqDCoMKgwqDCoMKgJywgJ8KgwqDCoMKgwqDCoMKgJywgJ8KgwqDCoMKgwqDCoMKgwqAnLCAnwqDCoMKgwqDCoMKgwqDCoMKgJ30KCnRleHQxID0gdWkubmV3X2xhYmVsKCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAiLiIpCnRleHQyID0gdWkubmV3X2xhYmVsKCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAiLiIpCnRleHQzID0gdWkubmV3X2xhYmVsKCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAiICIpCmN1cnJlbnRfdGFiID0gdWkubmV3X2NvbWJvYm94KCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAnXG4gJywgeydBbnRpLUFpbScsICdWaXN1YWxzJywgIk1pc2MiLCAiQ29uZmlnIn0pCmN1cnJlbnRfY29sb3IgPSB1aS5uZXdfY29sb3JfcGlja2VyKCJBQSIsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAiY29sb3JtZW51IiwgMjU1LCAyNTUsIDI1NSkKY3VycmVudF9zdGF0ZV9tZW51ID0gdWkubmV3X2NvbWJvYm94KCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiXG4gIiwgImJ1aWxkZXIiLCAia2V5YmluZHMiLCAib3RoZXIiKQpzZXR0aW5ncy5hbnRpX2FpbV9zdGF0ZSA9IHVpLm5ld19jb21ib2JveCgnQUEnLCAnQW50aS1haW1ib3QgYW5nbGVzJywgImNvbmRpdGlvbiIsIGFudGlfYWltX3N0YXRlcykKCmxvY2FsIHB1c3RvMiA9IHVpLm5ld19sYWJlbCgiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgIlxuIikKbG9jYWwgdmlzdWFsXyA9IHVpLm5ld19sYWJlbCgiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgIlZpc3VhbHMiKQpsb2NhbCBwb2xvc2EgPSB1aS5uZXdfbGFiZWwoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJcYUZGRkZGRjZG4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBIikKbG9jYWwgbWFzdGVyX3N3aXRjaCA9IHVpLm5ld19jaGVja2JveCgnQUEnLCAnQW50aS1haW1ib3QgYW5nbGVzJywgJ+KAuiBIaXRsb2dzJykKbG9jYWwgZGFtYWdlX2luZCA9IHVpLm5ld19jaGVja2JveCgnQUEnLCAnQW50aS1haW1ib3QgYW5nbGVzJywgJ+KAuiAzRCBoaXRtYXJrZXInKQpsb2NhbCBkZWZlbnNpdmUxID0gdWkubmV3X2NoZWNrYm94KCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiRm9yY2UgRGVmZW5zaXZlIikKbG9jYWwgbWluZGFtYWdlaW5kID0gdWkubmV3X2NoZWNrYm94KCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAi4oC6IERhbWFnZSBJbmRpY2F0b3IiKQotLWxvY2FsIHNsb3dlZF9kb3duID0gdWkubmV3X2NoZWNrYm94KCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiU2xvd2VkIGRvd24iKQpsb2NhbCBpbmRzID0gdWkubmV3X2NoZWNrYm94KCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAn4oC6IENyb3NzaGFpciBJbmRpY2F0b3JzJykKbG9jYWwgaW5kY29sb3JzID0gdWkubmV3X2NvbG9yX3BpY2tlcigiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgIlNuYXAgbGluZXMgY29sb3IiLCAyNTUsIDI1NSwgMjU1LCAyNTUpCmxvY2FsIG5pbGUyID0gdWkubmV3X2xhYmVsKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiXG4iKQpsb2NhbCBvdGhlcl8gPSB1aS5uZXdfbGFiZWwoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJPdGhlciIpCmxvY2FsIG5pbGUyID0gdWkubmV3X2xhYmVsKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiXGFGRkZGRkY2RuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSIpCmxvY2FsIGNsYW5UYWcgPSB1aS5uZXdfY2hlY2tib3goIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICLigLogQ2xhbnRhZyBzcGFtbWVyIikKbG9jYWwgdHJhc2hUYWxrID0gdWkubmV3X2NoZWNrYm94KCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAi4oC6IENoYXQgc3BhbW1lciIpCmxvY2FsIHRyYXNoVGFsa192aWJvciA9IHVpLm5ld19tdWx0aXNlbGVjdCgiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgInNlbGVjdGlvbjogIiwgIktpbGwiLCAiRGVhdGgiKQpsb2NhbCB3YXRlcm1hcmtFbmFibGUgPSB1aS5uZXdfY2hlY2tib3goIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICLigLogV2F0ZXJtYXJrIikgICAKbG9jYWwgd2F0ZXJtYXJrX21vZGUgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJXYXRlcm1hcmsiLCB7ImRlZmF1bHQiLCAicGhvYmljIiwgImNyaW5nZSJ9KSAgIAoKCgoKbG9jYWwgbWlzY18gPSB1aS5uZXdfbGFiZWwoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJNaXNjIikKbG9jYWwgbGluZTMgPSB1aS5uZXdfbGFiZWwoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJcYUZGRkZGRjZG4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBIikKbG9jYWwgdW5zYWZlY2hhcmhnZSA9IHVpLm5ld19jaGVja2JveCgiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgIuKAuiBBdXRvIHRlbGVwb3J0IGluIGFpciBcYTRmNGY0ZmZmW2JyZWFrIGxjXSIpCmxvY2FsIGZhc3RsYWRkZXIgPSB1aS5uZXdfY2hlY2tib3goJ0FBJywgJ0FudGktYWltYm90IGFuZ2xlcycsICfigLogRmFzdCBMYWRkZXInKQpsb2NhbCBmb3JjZV9zYWZlX3BvaW50ID0gdWkucmVmZXJlbmNlKCdSQUdFJywgJ0FpbWJvdCcsICdGb3JjZSBzYWZlIHBvaW50JykKbG9jYWwgYW5pbWF0aW9uc0VuYWJsZWQgPSB1aS5uZXdfY2hlY2tib3goJ0FBJywgJ0FudGktYWltYm90IGFuZ2xlcycsICLigLogXGFhZmFmNjJmZkFuaW1hdGlvbSBCcmVha2VycyIpCmxvY2FsIGFuaW1hdGlvbnMgPSB1aS5uZXdfbXVsdGlzZWxlY3QoJ0FBJywgJ0FudGktYWltYm90IGFuZ2xlcycsICJzZWxlY3Rpb246IiwgIktpbmd1cnUiLCAiU3RhdGljIGxlZ3MiLCAiTGVnIGZ1Y2tlciIsICJNb29ud2FsayIpCmxvY2FsIGNvbnNvbGVfZmlsdGVyID0gdWkubmV3X2NoZWNrYm94KCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAn4oC6IENvbnNvbGUgRmlsdGVyJykKCmZvciBpID0gMSwgI2FudGlfYWltX3N0YXRlcyBkbwogICAgYW50aV9haW1fc2V0dGluZ3NbaV0gPSB7CiAgICAgICAgb3ZlcnJpZGVfc3RhdGUgPSB1aS5uZXdfY2hlY2tib3goJ0FBJywgJ0FudGktYWltYm90IGFuZ2xlcycsICdlbmFibGUgJyAuLiBzdHJpbmcubG93ZXIoYW50aV9haW1fc3RhdGVzW2ldKSksCiAgICAgICAgcGl0Y2gxID0gdWkubmV3X2NvbWJvYm94KCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAncGl0Y2gnIC4uIGFudGlfYWltX2RpZmZlcmVudFtpXSwgJ09mZicsICdEZWZhdWx0JywgJ1VwJywgJ0Rvd24nLCAnTWluaW1hbCcsICdSYW5kb20nLCAnQ3VzdG9tJyksCiAgICAgICAgcGl0Y2gyID0gdWkubmV3X3NsaWRlcignQUEnLCAnQW50aS1haW1ib3QgYW5nbGVzJywgJ1xucGl0Y2gnIC4uIGFudGlfYWltX2RpZmZlcmVudFtpXSwgLTg5LCA4OSwgMCwgdHJ1ZSwgJ8KwJyksCiAgICAgICAgeWF3X2Jhc2UgPSB1aS5uZXdfY29tYm9ib3goJ0FBJywgJ0FudGktYWltYm90IGFuZ2xlcycsICd5YXcgYmFzZScgLi4gYW50aV9haW1fZGlmZmVyZW50W2ldLCAnTG9jYWwgdmlldycsICdBdCB0YXJnZXRzJyksCiAgICAgICAgeWF3MSA9IHVpLm5ld19jb21ib2JveCgnQUEnLCAnQW50aS1haW1ib3QgYW5nbGVzJywgJ3lhdycgLi4gYW50aV9haW1fZGlmZmVyZW50W2ldLCAnT2ZmJywgJzE4MCcsICdTcGluJywgJ1N0YXRpYycsICcxODAgWicsICdDcm9zc2hhaXInKSwKICAgICAgICB5YXcyX2xlZnQgPSB1aS5uZXdfc2xpZGVyKCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAneWF3IGxlZnQnIC4uIGFudGlfYWltX2RpZmZlcmVudFtpXSwgLTE4MCwgMTgwLCAwLCB0cnVlLCAnwrAnKSwKICAgICAgICB5YXcyX3JpZ2h0ID0gdWkubmV3X3NsaWRlcignQUEnLCAnQW50aS1haW1ib3QgYW5nbGVzJywgJ3lhdyByaWdodCcgLi4gYW50aV9haW1fZGlmZmVyZW50W2ldLCAtMTgwLCAxODAsIDAsIHRydWUsICfCsCcpLAogICAgICAgIHlhdzJfcmFuZG9taXplID0gdWkubmV3X3NsaWRlcignQUEnLCAnQW50aS1haW1ib3QgYW5nbGVzJywgJ3lhdyByYW5kb21pemUnIC4uIGFudGlfYWltX2RpZmZlcmVudFtpXSwgMCwgMTgwLCAwLCB0cnVlLCAnwrAnKSwKICAgICAgICB5YXdfaml0dGVyMSA9IHVpLm5ld19jb21ib2JveCgnQUEnLCAnQW50aS1haW1ib3QgYW5nbGVzJywgJ3lhdyBqaXR0ZXInIC4uIGFudGlfYWltX2RpZmZlcmVudFtpXSwgJ09mZicsICdPZmZzZXQnLCAnQ2VudGVyJywgJ1JhbmRvbScsICdTa2l0dGVyJywgJ0RlbGF5JyksCiAgICAgICAgeWF3X2ppdHRlcjJfbGVmdCA9IHVpLm5ld19zbGlkZXIoJ0FBJywgJ0FudGktYWltYm90IGFuZ2xlcycsICd5YXcgaml0dGVyIGxlZnQnIC4uIGFudGlfYWltX2RpZmZlcmVudFtpXSwgLTE4MCwgMTgwLCAwLCB0cnVlLCAnwrAnKSwKICAgICAgICB5YXdfaml0dGVyMl9yaWdodCA9IHVpLm5ld19zbGlkZXIoJ0FBJywgJ0FudGktYWltYm90IGFuZ2xlcycsICd5YXcgaml0dGVyIHJpZ2h0JyAuLiBhbnRpX2FpbV9kaWZmZXJlbnRbaV0sIC0xODAsIDE4MCwgMCwgdHJ1ZSwgJ8KwJyksCiAgICAgICAgeWF3X2ppdHRlcjJfcmFuZG9taXplID0gdWkubmV3X3NsaWRlcignQUEnLCAnQW50aS1haW1ib3QgYW5nbGVzJywgJ3lhdyBqaXR0ZXIgcmFuZG9taXplJyAuLiBhbnRpX2FpbV9kaWZmZXJlbnRbaV0sIDAsIDE4MCwgMCwgdHJ1ZSwgJ8KwJyksCiAgICAgICAgeWF3X2ppdHRlcjJfZGVsYXkgPSB1aS5uZXdfc2xpZGVyKCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAneWF3IGppdHRlciBkZWxheScgLi4gYW50aV9haW1fZGlmZmVyZW50W2ldLCAyLCAxMCwgMiwgdHJ1ZSwgJ3QnKSwKICAgICAgICBib2R5X3lhdzEgPSB1aS5uZXdfY29tYm9ib3goJ0FBJywgJ0FudGktYWltYm90IGFuZ2xlcycsICdib2R5IHlhdycgLi4gYW50aV9haW1fZGlmZmVyZW50W2ldLCAnT2ZmJywgJ09wcG9zaXRlJywgJ0ppdHRlcicsICdTdGF0aWMnKSwKICAgICAgICBib2R5X3lhdzIgPSB1aS5uZXdfc2xpZGVyKCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAnYm9keSBZYXcnIC4uIGFudGlfYWltX2RpZmZlcmVudFtpXSwgLTE4MCwgMTgwLCAwLCB0cnVlLCAnwrAnKSwKICAgICAgICBmcmVlc3RhbmRpbmdfYm9keV95YXcgPSB1aS5uZXdfY2hlY2tib3goJ0FBJywgJ0FudGktYWltYm90IGFuZ2xlcycsICdmcmVlc3RhbmRpbmcgYm9keSB5YXcnIC4uIGFudGlfYWltX2RpZmZlcmVudFtpXSksCiAgICAgICAgZGVmZW5zaXZlX2FudGlfYWltYm90ID0gdWkubmV3X2NoZWNrYm94KCdBQScsICdGYWtlIGxhZycsICdkZWZlbnNpdmUgYnVpbGRlcicgLi4gYW50aV9haW1fZGlmZmVyZW50W2ldKSwKICAgICAgICBkZWZlbnNpdmVfcGl0Y2gxID0gdWkubmV3X2NvbWJvYm94KCdBQScsICdGYWtlIGxhZycsICdwaXRjaCcgLi4gYW50aV9haW1fZGlmZmVyZW50W2ldLCAnT2ZmJywgJ0RlZmF1bHQnLCAnVXAnLCAnRG93bicsICdNaW5pbWFsJywgJ1JhbmRvbScsICdDdXN0b20nKSwKICAgICAgICBkZWZlbnNpdmVfcGl0Y2gyID0gdWkubmV3X3NsaWRlcignQUEnLCAnRmFrZSBsYWcnLCAnXG4gJyAuLiBhbnRpX2FpbV9kaWZmZXJlbnRbaV0sIC04OSwgODksIDAsIHRydWUsICfCsCcpLAogICAgICAgIGRlZmVuc2l2ZV9waXRjaDMgPSB1aS5uZXdfc2xpZGVyKCdBQScsICdGYWtlIGxhZycsICdcbiAnIC4uIGFudGlfYWltX2RpZmZlcmVudFtpXSwgLTg5LCA4OSwgMCwgdHJ1ZSwgJ8KwJyksCiAgICAgICAgZGVmZW5zaXZlX3lhdzEgPSB1aS5uZXdfY29tYm9ib3goJ0FBJywgJ0Zha2UgbGFnJywgJ3lhdycgLi4gYW50aV9haW1fZGlmZmVyZW50W2ldLCAnMTgwJywgJ1NwaW4nLCAnMTgwIFonLCAnU2lkZXdheXMnLCAnUmFuZG9tJyksCiAgICAgICAgZGVmZW5zaXZlX3lhdzIgPSB1aS5uZXdfc2xpZGVyKCdBQScsICdGYWtlIGxhZycsICdcbiAnIC4uIGFudGlfYWltX2RpZmZlcmVudFtpXSwgLTE4MCwgMTgwLCAwLCB0cnVlLCAnwrAnKQogICAgfQplbmQKCnNldHRpbmdzLndhcm11cF9kaXNhYmxlciA9IHVpLm5ld19jaGVja2JveCgnQUEnLCAnQW50aS1haW1ib3QgYW5nbGVzJywgJ1dhcm11cCBkaXNhYmxlcicpCnNldHRpbmdzLmF2b2lkX2JhY2tzdGFiID0gdWkubmV3X2NoZWNrYm94KCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAnQXZvaWQgYmFja3N0YWInKQpzZXR0aW5ncy5zYWZlX2hlYWRfaW5fYWlyID0gdWkubmV3X2NoZWNrYm94KCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAnU2FmZSBoZWFkIGluIGFpcicpCnNldHRpbmdzLm1hbnVhbF9sZWZ0ID0gdWkubmV3X2hvdGtleSgnQUEnLCAnQW50aS1haW1ib3QgYW5nbGVzJywgJ01hbnVhbCBsZWZ0JykKc2V0dGluZ3MubWFudWFsX3JpZ2h0ID0gdWkubmV3X2hvdGtleSgnQUEnLCAnQW50aS1haW1ib3QgYW5nbGVzJywgJ01hbnVhbCByaWdodCcpCnNldHRpbmdzLm1hbnVhbF9mb3J3YXJkID0gdWkubmV3X2hvdGtleSgnQUEnLCAnQW50aS1haW1ib3QgYW5nbGVzJywgJ01hbnVhbCBmb3J3YXJkJykKc2V0dGluZ3MuZnJlZXN0YW5kaW5nID0gdWkubmV3X2hvdGtleSgnQUEnLCAnQW50aS1haW1ib3QgYW5nbGVzJywgJ0ZyZWVzdGFuZGluZycpCnNldHRpbmdzLmZyZWVzdGFuZGluZ19jb25kaXRpb25zID0gdWkubmV3X211bHRpc2VsZWN0KCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAnQ29uZGl0aW9ucyBmb3IgZnJlZXN0YW5kaW5nJywgJ1N0YW5kaW5nJywgJ01vdmluZycsICdTbG93IG1vdGlvbicsICdDcm91Y2hpbmcnLCAnSW4gYWlyJykKc2V0dGluZ3MudHdlYWtzID0gdWkubmV3X211bHRpc2VsZWN0KCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAnXG5Ud2Vha3MnLCAnT2ZmIGppdHRlciB3aGlsZSBmcmVlc3RhbmRpbmcnLCAnT2ZmIGppdHRlciBvbiBtYW51YWwnKQoKCmxvY2FsIGRhdGEgPSB7CiAgICBpbnRlZ2VycyA9IHsKICAgICAgICBzZXR0aW5ncy5hbnRpX2FpbV9zdGF0ZSwKICAgICAgICBhbnRpX2FpbV9zZXR0aW5nc1sxXS5vdmVycmlkZV9zdGF0ZSwgYW50aV9haW1fc2V0dGluZ3NbMl0ub3ZlcnJpZGVfc3RhdGUsIGFudGlfYWltX3NldHRpbmdzWzNdLm92ZXJyaWRlX3N0YXRlLCBhbnRpX2FpbV9zZXR0aW5nc1s0XS5vdmVycmlkZV9zdGF0ZSwgYW50aV9haW1fc2V0dGluZ3NbNV0ub3ZlcnJpZGVfc3RhdGUsIGFudGlfYWltX3NldHRpbmdzWzZdLm92ZXJyaWRlX3N0YXRlLCBhbnRpX2FpbV9zZXR0aW5nc1s3XS5vdmVycmlkZV9zdGF0ZSwgYW50aV9haW1fc2V0dGluZ3NbOF0ub3ZlcnJpZGVfc3RhdGUsIGFudGlfYWltX3NldHRpbmdzWzldLm92ZXJyaWRlX3N0YXRlLCBhbnRpX2FpbV9zZXR0aW5nc1sxMF0ub3ZlcnJpZGVfc3RhdGUsCiAgICAgICAgYW50aV9haW1fc2V0dGluZ3NbMV0ucGl0Y2gxLCBhbnRpX2FpbV9zZXR0aW5nc1syXS5waXRjaDEsIGFudGlfYWltX3NldHRpbmdzWzNdLnBpdGNoMSwgYW50aV9haW1fc2V0dGluZ3NbNF0ucGl0Y2gxLCBhbnRpX2FpbV9zZXR0aW5nc1s1XS5waXRjaDEsIGFudGlfYWltX3NldHRpbmdzWzZdLnBpdGNoMSwgYW50aV9haW1fc2V0dGluZ3NbN10ucGl0Y2gxLCBhbnRpX2FpbV9zZXR0aW5nc1s4XS5waXRjaDEsIGFudGlfYWltX3NldHRpbmdzWzldLnBpdGNoMSwgYW50aV9haW1fc2V0dGluZ3NbMTBdLnBpdGNoMSwKICAgICAgICBhbnRpX2FpbV9zZXR0aW5nc1sxXS5waXRjaDIsIGFudGlfYWltX3NldHRpbmdzWzJdLnBpdGNoMiwgYW50aV9haW1fc2V0dGluZ3NbM10ucGl0Y2gyLCBhbnRpX2FpbV9zZXR0aW5nc1s0XS5waXRjaDIsIGFudGlfYWltX3NldHRpbmdzWzVdLnBpdGNoMiwgYW50aV9haW1fc2V0dGluZ3NbNl0ucGl0Y2gyLCBhbnRpX2FpbV9zZXR0aW5nc1s3XS5waXRjaDIsIGFudGlfYWltX3NldHRpbmdzWzhdLnBpdGNoMiwgYW50aV9haW1fc2V0dGluZ3NbOV0ucGl0Y2gyLCBhbnRpX2FpbV9zZXR0aW5nc1sxMF0ucGl0Y2gyLAogICAgICAgIGFudGlfYWltX3NldHRpbmdzWzFdLnlhd19iYXNlLCBhbnRpX2FpbV9zZXR0aW5nc1syXS55YXdfYmFzZSwgYW50aV9haW1fc2V0dGluZ3NbM10ueWF3X2Jhc2UsIGFudGlfYWltX3NldHRpbmdzWzRdLnlhd19iYXNlLCBhbnRpX2FpbV9zZXR0aW5nc1s1XS55YXdfYmFzZSwgYW50aV9haW1fc2V0dGluZ3NbNl0ueWF3X2Jhc2UsIGFudGlfYWltX3NldHRpbmdzWzddLnlhd19iYXNlLCBhbnRpX2FpbV9zZXR0aW5nc1s4XS55YXdfYmFzZSwgYW50aV9haW1fc2V0dGluZ3NbOV0ueWF3X2Jhc2UsIGFudGlfYWltX3NldHRpbmdzWzEwXS55YXdfYmFzZSwKICAgICAgICBhbnRpX2FpbV9zZXR0aW5nc1sxXS55YXcxLCBhbnRpX2FpbV9zZXR0aW5nc1syXS55YXcxLCBhbnRpX2FpbV9zZXR0aW5nc1szXS55YXcxLCBhbnRpX2FpbV9zZXR0aW5nc1s0XS55YXcxLCBhbnRpX2FpbV9zZXR0aW5nc1s1XS55YXcxLCBhbnRpX2FpbV9zZXR0aW5nc1s2XS55YXcxLCBhbnRpX2FpbV9zZXR0aW5nc1s3XS55YXcxLCBhbnRpX2FpbV9zZXR0aW5nc1s4XS55YXcxLCBhbnRpX2FpbV9zZXR0aW5nc1s5XS55YXcxLCBhbnRpX2FpbV9zZXR0aW5nc1sxMF0ueWF3MSwKICAgICAgICBhbnRpX2FpbV9zZXR0aW5nc1sxXS55YXcyX2xlZnQsIGFudGlfYWltX3NldHRpbmdzWzJdLnlhdzJfbGVmdCwgYW50aV9haW1fc2V0dGluZ3NbM10ueWF3Ml9sZWZ0LCBhbnRpX2FpbV9zZXR0aW5nc1s0XS55YXcyX2xlZnQsIGFudGlfYWltX3NldHRpbmdzWzVdLnlhdzJfbGVmdCwgYW50aV9haW1fc2V0dGluZ3NbNl0ueWF3Ml9sZWZ0LCBhbnRpX2FpbV9zZXR0aW5nc1s3XS55YXcyX2xlZnQsIGFudGlfYWltX3NldHRpbmdzWzhdLnlhdzJfbGVmdCwgYW50aV9haW1fc2V0dGluZ3NbOV0ueWF3Ml9sZWZ0LCBhbnRpX2FpbV9zZXR0aW5nc1sxMF0ueWF3Ml9sZWZ0LAogICAgICAgIGFudGlfYWltX3NldHRpbmdzWzFdLnlhdzJfcmlnaHQsIGFudGlfYWltX3NldHRpbmdzWzJdLnlhdzJfcmlnaHQsIGFudGlfYWltX3NldHRpbmdzWzNdLnlhdzJfcmlnaHQsIGFudGlfYWltX3NldHRpbmdzWzRdLnlhdzJfcmlnaHQsIGFudGlfYWltX3NldHRpbmdzWzVdLnlhdzJfcmlnaHQsIGFudGlfYWltX3NldHRpbmdzWzZdLnlhdzJfcmlnaHQsIGFudGlfYWltX3NldHRpbmdzWzddLnlhdzJfcmlnaHQsIGFudGlfYWltX3NldHRpbmdzWzhdLnlhdzJfcmlnaHQsIGFudGlfYWltX3NldHRpbmdzWzldLnlhdzJfcmlnaHQsIGFudGlfYWltX3NldHRpbmdzWzEwXS55YXcyX3JpZ2h0LAogICAgICAgIGFudGlfYWltX3NldHRpbmdzWzFdLnlhdzJfcmFuZG9taXplLCBhbnRpX2FpbV9zZXR0aW5nc1syXS55YXcyX3JhbmRvbWl6ZSwgYW50aV9haW1fc2V0dGluZ3NbM10ueWF3Ml9yYW5kb21pemUsIGFudGlfYWltX3NldHRpbmdzWzRdLnlhdzJfcmFuZG9taXplLCBhbnRpX2FpbV9zZXR0aW5nc1s1XS55YXcyX3JhbmRvbWl6ZSwgYW50aV9haW1fc2V0dGluZ3NbNl0ueWF3Ml9yYW5kb21pemUsIGFudGlfYWltX3NldHRpbmdzWzddLnlhdzJfcmFuZG9taXplLCBhbnRpX2FpbV9zZXR0aW5nc1s4XS55YXcyX3JhbmRvbWl6ZSwgYW50aV9haW1fc2V0dGluZ3NbOV0ueWF3Ml9yYW5kb21pemUsIGFudGlfYWltX3NldHRpbmdzWzEwXS55YXcyX3JhbmRvbWl6ZSwKICAgICAgICBhbnRpX2FpbV9zZXR0aW5nc1sxXS55YXdfaml0dGVyMSwgYW50aV9haW1fc2V0dGluZ3NbMl0ueWF3X2ppdHRlcjEsIGFudGlfYWltX3NldHRpbmdzWzNdLnlhd19qaXR0ZXIxLCBhbnRpX2FpbV9zZXR0aW5nc1s0XS55YXdfaml0dGVyMSwgYW50aV9haW1fc2V0dGluZ3NbNV0ueWF3X2ppdHRlcjEsIGFudGlfYWltX3NldHRpbmdzWzZdLnlhd19qaXR0ZXIxLCBhbnRpX2FpbV9zZXR0aW5nc1s3XS55YXdfaml0dGVyMSwgYW50aV9haW1fc2V0dGluZ3NbOF0ueWF3X2ppdHRlcjEsIGFudGlfYWltX3NldHRpbmdzWzldLnlhd19qaXR0ZXIxLCBhbnRpX2FpbV9zZXR0aW5nc1sxMF0ueWF3X2ppdHRlcjEsCiAgICAgICAgYW50aV9haW1fc2V0dGluZ3NbMV0ueWF3X2ppdHRlcjJfbGVmdCwgYW50aV9haW1fc2V0dGluZ3NbMl0ueWF3X2ppdHRlcjJfbGVmdCwgYW50aV9haW1fc2V0dGluZ3NbM10ueWF3X2ppdHRlcjJfbGVmdCwgYW50aV9haW1fc2V0dGluZ3NbNF0ueWF3X2ppdHRlcjJfbGVmdCwgYW50aV9haW1fc2V0dGluZ3NbNV0ueWF3X2ppdHRlcjJfbGVmdCwgYW50aV9haW1fc2V0dGluZ3NbNl0ueWF3X2ppdHRlcjJfbGVmdCwgYW50aV9haW1fc2V0dGluZ3NbN10ueWF3X2ppdHRlcjJfbGVmdCwgYW50aV9haW1fc2V0dGluZ3NbOF0ueWF3X2ppdHRlcjJfbGVmdCwgYW50aV9haW1fc2V0dGluZ3NbOV0ueWF3X2ppdHRlcjJfbGVmdCwgYW50aV9haW1fc2V0dGluZ3NbMTBdLnlhd19qaXR0ZXIyX2xlZnQsCiAgICAgICAgYW50aV9haW1fc2V0dGluZ3NbMV0ueWF3X2ppdHRlcjJfcmlnaHQsIGFudGlfYWltX3NldHRpbmdzWzJdLnlhd19qaXR0ZXIyX3JpZ2h0LCBhbnRpX2FpbV9zZXR0aW5nc1szXS55YXdfaml0dGVyMl9yaWdodCwgYW50aV9haW1fc2V0dGluZ3NbNF0ueWF3X2ppdHRlcjJfcmlnaHQsIGFudGlfYWltX3NldHRpbmdzWzVdLnlhd19qaXR0ZXIyX3JpZ2h0LCBhbnRpX2FpbV9zZXR0aW5nc1s2XS55YXdfaml0dGVyMl9yaWdodCwgYW50aV9haW1fc2V0dGluZ3NbN10ueWF3X2ppdHRlcjJfcmlnaHQsIGFudGlfYWltX3NldHRpbmdzWzhdLnlhd19qaXR0ZXIyX3JpZ2h0LCBhbnRpX2FpbV9zZXR0aW5nc1s5XS55YXdfaml0dGVyMl9yaWdodCwgYW50aV9haW1fc2V0dGluZ3NbMTBdLnlhd19qaXR0ZXIyX3JpZ2h0LAogICAgICAgIGFudGlfYWltX3NldHRpbmdzWzFdLnlhd19qaXR0ZXIyX3JhbmRvbWl6ZSwgYW50aV9haW1fc2V0dGluZ3NbMl0ueWF3X2ppdHRlcjJfcmFuZG9taXplLCBhbnRpX2FpbV9zZXR0aW5nc1szXS55YXdfaml0dGVyMl9yYW5kb21pemUsIGFudGlfYWltX3NldHRpbmdzWzRdLnlhd19qaXR0ZXIyX3JhbmRvbWl6ZSwgYW50aV9haW1fc2V0dGluZ3NbNV0ueWF3X2ppdHRlcjJfcmFuZG9taXplLCBhbnRpX2FpbV9zZXR0aW5nc1s2XS55YXdfaml0dGVyMl9yYW5kb21pemUsIGFudGlfYWltX3NldHRpbmdzWzddLnlhd19qaXR0ZXIyX3JhbmRvbWl6ZSwgYW50aV9haW1fc2V0dGluZ3NbOF0ueWF3X2ppdHRlcjJfcmFuZG9taXplLCBhbnRpX2FpbV9zZXR0aW5nc1s5XS55YXdfaml0dGVyMl9yYW5kb21pemUsIGFudGlfYWltX3NldHRpbmdzWzEwXS55YXdfaml0dGVyMl9yYW5kb21pemUsCiAgICAgICAgYW50aV9haW1fc2V0dGluZ3NbMV0ueWF3X2ppdHRlcjJfZGVsYXksIGFudGlfYWltX3NldHRpbmdzWzJdLnlhd19qaXR0ZXIyX2RlbGF5LCBhbnRpX2FpbV9zZXR0aW5nc1szXS55YXdfaml0dGVyMl9kZWxheSwgYW50aV9haW1fc2V0dGluZ3NbNF0ueWF3X2ppdHRlcjJfZGVsYXksIGFudGlfYWltX3NldHRpbmdzWzVdLnlhd19qaXR0ZXIyX2RlbGF5LCBhbnRpX2FpbV9zZXR0aW5nc1s2XS55YXdfaml0dGVyMl9kZWxheSwgYW50aV9haW1fc2V0dGluZ3NbN10ueWF3X2ppdHRlcjJfZGVsYXksIGFudGlfYWltX3NldHRpbmdzWzhdLnlhd19qaXR0ZXIyX2RlbGF5LCBhbnRpX2FpbV9zZXR0aW5nc1s5XS55YXdfaml0dGVyMl9kZWxheSwgYW50aV9haW1fc2V0dGluZ3NbMTBdLnlhd19qaXR0ZXIyX2RlbGF5LAogICAgICAgIGFudGlfYWltX3NldHRpbmdzWzFdLmJvZHlfeWF3MSwgYW50aV9haW1fc2V0dGluZ3NbMl0uYm9keV95YXcxLCBhbnRpX2FpbV9zZXR0aW5nc1szXS5ib2R5X3lhdzEsIGFudGlfYWltX3NldHRpbmdzWzRdLmJvZHlfeWF3MSwgYW50aV9haW1fc2V0dGluZ3NbNV0uYm9keV95YXcxLCBhbnRpX2FpbV9zZXR0aW5nc1s2XS5ib2R5X3lhdzEsIGFudGlfYWltX3NldHRpbmdzWzddLmJvZHlfeWF3MSwgYW50aV9haW1fc2V0dGluZ3NbOF0uYm9keV95YXcxLCBhbnRpX2FpbV9zZXR0aW5nc1s5XS5ib2R5X3lhdzEsIGFudGlfYWltX3NldHRpbmdzWzEwXS5ib2R5X3lhdzEsCiAgICAgICAgYW50aV9haW1fc2V0dGluZ3NbMV0uYm9keV95YXcyLCBhbnRpX2FpbV9zZXR0aW5nc1syXS5ib2R5X3lhdzIsIGFudGlfYWltX3NldHRpbmdzWzNdLmJvZHlfeWF3MiwgYW50aV9haW1fc2V0dGluZ3NbNF0uYm9keV95YXcyLCBhbnRpX2FpbV9zZXR0aW5nc1s1XS5ib2R5X3lhdzIsIGFudGlfYWltX3NldHRpbmdzWzZdLmJvZHlfeWF3MiwgYW50aV9haW1fc2V0dGluZ3NbN10uYm9keV95YXcyLCBhbnRpX2FpbV9zZXR0aW5nc1s4XS5ib2R5X3lhdzIsIGFudGlfYWltX3NldHRpbmdzWzldLmJvZHlfeWF3MiwgYW50aV9haW1fc2V0dGluZ3NbMTBdLmJvZHlfeWF3MiwKICAgICAgICBhbnRpX2FpbV9zZXR0aW5nc1sxXS5mcmVlc3RhbmRpbmdfYm9keV95YXcsIGFudGlfYWltX3NldHRpbmdzWzJdLmZyZWVzdGFuZGluZ19ib2R5X3lhdywgYW50aV9haW1fc2V0dGluZ3NbM10uZnJlZXN0YW5kaW5nX2JvZHlfeWF3LCBhbnRpX2FpbV9zZXR0aW5nc1s0XS5mcmVlc3RhbmRpbmdfYm9keV95YXcsIGFudGlfYWltX3NldHRpbmdzWzVdLmZyZWVzdGFuZGluZ19ib2R5X3lhdywgYW50aV9haW1fc2V0dGluZ3NbNl0uZnJlZXN0YW5kaW5nX2JvZHlfeWF3LCBhbnRpX2FpbV9zZXR0aW5nc1s3XS5mcmVlc3RhbmRpbmdfYm9keV95YXcsIGFudGlfYWltX3NldHRpbmdzWzhdLmZyZWVzdGFuZGluZ19ib2R5X3lhdywgYW50aV9haW1fc2V0dGluZ3NbOV0uZnJlZXN0YW5kaW5nX2JvZHlfeWF3LCBhbnRpX2FpbV9zZXR0aW5nc1sxMF0uZnJlZXN0YW5kaW5nX2JvZHlfeWF3LAogICAgICAgIGFudGlfYWltX3NldHRpbmdzWzFdLmRlZmVuc2l2ZV9hbnRpX2FpbWJvdCwgYW50aV9haW1fc2V0dGluZ3NbMl0uZGVmZW5zaXZlX2FudGlfYWltYm90LCBhbnRpX2FpbV9zZXR0aW5nc1szXS5kZWZlbnNpdmVfYW50aV9haW1ib3QsIGFudGlfYWltX3NldHRpbmdzWzRdLmRlZmVuc2l2ZV9hbnRpX2FpbWJvdCwgYW50aV9haW1fc2V0dGluZ3NbNV0uZGVmZW5zaXZlX2FudGlfYWltYm90LCBhbnRpX2FpbV9zZXR0aW5nc1s2XS5kZWZlbnNpdmVfYW50aV9haW1ib3QsIGFudGlfYWltX3NldHRpbmdzWzddLmRlZmVuc2l2ZV9hbnRpX2FpbWJvdCwgYW50aV9haW1fc2V0dGluZ3NbOF0uZGVmZW5zaXZlX2FudGlfYWltYm90LCBhbnRpX2FpbV9zZXR0aW5nc1s5XS5kZWZlbnNpdmVfYW50aV9haW1ib3QsIGFudGlfYWltX3NldHRpbmdzWzEwXS5kZWZlbnNpdmVfYW50aV9haW1ib3QsCiAgICAgICAgYW50aV9haW1fc2V0dGluZ3NbMV0uZGVmZW5zaXZlX3BpdGNoMSwgYW50aV9haW1fc2V0dGluZ3NbMl0uZGVmZW5zaXZlX3BpdGNoMSwgYW50aV9haW1fc2V0dGluZ3NbM10uZGVmZW5zaXZlX3BpdGNoMSwgYW50aV9haW1fc2V0dGluZ3NbNF0uZGVmZW5zaXZlX3BpdGNoMSwgYW50aV9haW1fc2V0dGluZ3NbNV0uZGVmZW5zaXZlX3BpdGNoMSwgYW50aV9haW1fc2V0dGluZ3NbNl0uZGVmZW5zaXZlX3BpdGNoMSwgYW50aV9haW1fc2V0dGluZ3NbN10uZGVmZW5zaXZlX3BpdGNoMSwgYW50aV9haW1fc2V0dGluZ3NbOF0uZGVmZW5zaXZlX3BpdGNoMSwgYW50aV9haW1fc2V0dGluZ3NbOV0uZGVmZW5zaXZlX3BpdGNoMSwgYW50aV9haW1fc2V0dGluZ3NbMTBdLmRlZmVuc2l2ZV9waXRjaDEsCiAgICAgICAgYW50aV9haW1fc2V0dGluZ3NbMV0uZGVmZW5zaXZlX3BpdGNoMiwgYW50aV9haW1fc2V0dGluZ3NbMl0uZGVmZW5zaXZlX3BpdGNoMiwgYW50aV9haW1fc2V0dGluZ3NbM10uZGVmZW5zaXZlX3BpdGNoMiwgYW50aV9haW1fc2V0dGluZ3NbNF0uZGVmZW5zaXZlX3BpdGNoMiwgYW50aV9haW1fc2V0dGluZ3NbNV0uZGVmZW5zaXZlX3BpdGNoMiwgYW50aV9haW1fc2V0dGluZ3NbNl0uZGVmZW5zaXZlX3BpdGNoMiwgYW50aV9haW1fc2V0dGluZ3NbN10uZGVmZW5zaXZlX3BpdGNoMiwgYW50aV9haW1fc2V0dGluZ3NbOF0uZGVmZW5zaXZlX3BpdGNoMiwgYW50aV9haW1fc2V0dGluZ3NbOV0uZGVmZW5zaXZlX3BpdGNoMiwgYW50aV9haW1fc2V0dGluZ3NbMTBdLmRlZmVuc2l2ZV9waXRjaDIsCiAgICAgICAgYW50aV9haW1fc2V0dGluZ3NbMV0uZGVmZW5zaXZlX3BpdGNoMywgYW50aV9haW1fc2V0dGluZ3NbMl0uZGVmZW5zaXZlX3BpdGNoMywgYW50aV9haW1fc2V0dGluZ3NbM10uZGVmZW5zaXZlX3BpdGNoMywgYW50aV9haW1fc2V0dGluZ3NbNF0uZGVmZW5zaXZlX3BpdGNoMywgYW50aV9haW1fc2V0dGluZ3NbNV0uZGVmZW5zaXZlX3BpdGNoMywgYW50aV9haW1fc2V0dGluZ3NbNl0uZGVmZW5zaXZlX3BpdGNoMywgYW50aV9haW1fc2V0dGluZ3NbN10uZGVmZW5zaXZlX3BpdGNoMywgYW50aV9haW1fc2V0dGluZ3NbOF0uZGVmZW5zaXZlX3BpdGNoMywgYW50aV9haW1fc2V0dGluZ3NbOV0uZGVmZW5zaXZlX3BpdGNoMywgYW50aV9haW1fc2V0dGluZ3NbMTBdLmRlZmVuc2l2ZV9waXRjaDMsCiAgICAgICAgYW50aV9haW1fc2V0dGluZ3NbMV0uZGVmZW5zaXZlX3lhdzEsIGFudGlfYWltX3NldHRpbmdzWzJdLmRlZmVuc2l2ZV95YXcxLCBhbnRpX2FpbV9zZXR0aW5nc1szXS5kZWZlbnNpdmVfeWF3MSwgYW50aV9haW1fc2V0dGluZ3NbNF0uZGVmZW5zaXZlX3lhdzEsIGFudGlfYWltX3NldHRpbmdzWzVdLmRlZmVuc2l2ZV95YXcxLCBhbnRpX2FpbV9zZXR0aW5nc1s2XS5kZWZlbnNpdmVfeWF3MSwgYW50aV9haW1fc2V0dGluZ3NbN10uZGVmZW5zaXZlX3lhdzEsIGFudGlfYWltX3NldHRpbmdzWzhdLmRlZmVuc2l2ZV95YXcxLCBhbnRpX2FpbV9zZXR0aW5nc1s5XS5kZWZlbnNpdmVfeWF3MSwgYW50aV9haW1fc2V0dGluZ3NbMTBdLmRlZmVuc2l2ZV95YXcxLAogICAgICAgIGFudGlfYWltX3NldHRpbmdzWzFdLmRlZmVuc2l2ZV95YXcyLCBhbnRpX2FpbV9zZXR0aW5nc1syXS5kZWZlbnNpdmVfeWF3MiwgYW50aV9haW1fc2V0dGluZ3NbM10uZGVmZW5zaXZlX3lhdzIsIGFudGlfYWltX3NldHRpbmdzWzRdLmRlZmVuc2l2ZV95YXcyLCBhbnRpX2FpbV9zZXR0aW5nc1s1XS5kZWZlbnNpdmVfeWF3MiwgYW50aV9haW1fc2V0dGluZ3NbNl0uZGVmZW5zaXZlX3lhdzIsIGFudGlfYWltX3NldHRpbmdzWzddLmRlZmVuc2l2ZV95YXcyLCBhbnRpX2FpbV9zZXR0aW5nc1s4XS5kZWZlbnNpdmVfeWF3MiwgYW50aV9haW1fc2V0dGluZ3NbOV0uZGVmZW5zaXZlX3lhdzIsIGFudGlfYWltX3NldHRpbmdzWzEwXS5kZWZlbnNpdmVfeWF3MiwKICAgICAgICBzZXR0aW5ncy5hdm9pZF9iYWNrc3RhYiwKICAgICAgICBzZXR0aW5ncy5zYWZlX2hlYWRfaW5fYWlyLAoJCWRlZmVuc2l2ZTEsCiAgICAgICAgc2V0dGluZ3MuZnJlZXN0YW5kaW5nX2NvbmRpdGlvbnMsCiAgICAgICAgc2V0dGluZ3MudHdlYWtzLCBtYXN0ZXJfc3dpdGNoLCBjb25zb2xlX2ZpbHRlciwgYW5pbV9icmVha2VyeCwgdHJhc2h0YWxrLCBoaXRtYXJrZXIsIGZhc3RsYWRkZXIsIHNldHRpbmdzLndhcm11cF9kaXNhYmxlciwgd2F0ZXJtYXJrX21vZGUKICAgIH0KfQoKICAgIGxvY2FsIGxhc3Rfc2ltX3RpbWUgPSAwCiAgICBsb2NhbCBkZWZlbnNpdmVfdW50aWwgPSAwCiAgICBsb2NhbCBmdW5jdGlvbiBpc19kZWZlbnNpdmVfYWN0aXZlKCkKICAgICAgICBsb2NhbCB0aWNrY291bnQgPSBnbG9iYWxzLnRpY2tjb3VudCgpCiAgICAgICAgbG9jYWwgc2ltX3RpbWUgPSB0b3RpY2tzKGVudGl0eS5nZXRfcHJvcChlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpLCAibV9mbFNpbXVsYXRpb25UaW1lIikpCiAgICAgICAgbG9jYWwgc2ltX2RpZmYgPSBzaW1fdGltZSAtIGxhc3Rfc2ltX3RpbWUKCiAgICAgICAgaWYgc2ltX2RpZmYgPCAwIHRoZW4KICAgICAgICAgICAgZGVmZW5zaXZlX3VudGlsID0gdGlja2NvdW50ICsgbWF0aC5hYnMoc2ltX2RpZmYpIC0gdG90aWNrcyhjbGllbnQubGF0ZW5jeSgpKQogICAgICAgIGVuZAoKICAgICAgICBsYXN0X3NpbV90aW1lID0gc2ltX3RpbWUKCiAgICAgICAgcmV0dXJuIGRlZmVuc2l2ZV91bnRpbCA+IHRpY2tjb3VudAogICAgZW5kCgotLQoKCmxvY2FsIGhpdG1hcmtlcl94ZCA9IHt9CgotLWh0dHBzOi8vZG9jcy5nYW1lc2Vuc2UuZ3MvZG9jcy9ldmVudHMvYWltX2ZpcmUKbG9jYWwgZnVuY3Rpb24gYWltX2ZpcmUoZSkKICAgIGxvY2FsIGZsYWdzID0gewogICAgICAgIGUudGVsZXBvcnRlZCBhbmQgIlQiIG9yICIiLAogICAgICAgIGUuaW50ZXJwb2xhdGVkIGFuZCAiSSIgb3IgIiIsCiAgICAgICAgZS5leHRyYXBvbGF0ZWQgYW5kICJFIiBvciAiIiwKICAgICAgICBlLmJvb3N0ZWQgYW5kICJCIiBvciAiIiwKICAgICAgICBlLmhpZ2hfcHJpb3JpdHkgYW5kICJIIiBvciAiIgogICAgfQoKICAgIGxvY2FsIGdyb3VwID0gaGl0Z3JvdXBfbmFtZXNbZS5oaXRncm91cCArIDFdIG9yICI/IgogICAgaWYgY29udGFpbnMoX3VpLnZpc3VhbHMuaGl0bG9ncy52YWx1ZSwgIkZpcmVkIikgdGhlbgogICAgICAgIG5ld19ub3RpZnkoc3RyaW5nLmZvcm1hdCgKICAgICAgICAgICAgIkZpcmVkIGF0ICVzICglcykgZm9yICVkIGRtZyAoY2hhbmNlPSVkJSUsIGZsYWdzPSVzKSIsCiAgICAgICAgICAgIGVudGl0eS5nZXRfcGxheWVyX25hbWUoZS50YXJnZXQpLCBncm91cCwgZS5kYW1hZ2UsCiAgICAgICAgICAgIG1hdGguZmxvb3IoZS5oaXRfY2hhbmNlICsgMC41KSwKICAgICAgICAgICAgdGFibGUuY29uY2F0KGZsYWdzKQogICAgICAgICkpCiAgICBlbmQKCiAgICBoaXRtYXJrZXJfeGRbZ2xvYmFscy50aWNrY291bnQoKV0gPSB7ZS54LGUueSxlLnosIGdsb2JhbHMuY3VydGltZSgpICsgMi44LCBlLmRhbWFnZSwgMCwgMCwgMjU1fQplbmQKCnRvX2RyYXcgPSAibm8iCnRvX3VwID0gIm5vIgp0b19kcmF3X3RpY2tzID0gMAp3YXRlcm1hcmtfeCwgd2F0ZXJtYXJrX3kgPSBYIC0gOTAsIFkgLyAyCmxvY2FsIHkgPSAwCmxvY2FsIHNjb3BlX3hkeGQgPSAwCmxvY2FsIGFscGhhID0gMjU1CmxvY2FsIHRpbWVyX3Rlc3QgPSAwCmxvY2FsIGN0eCA9IChmdW5jdGlvbigpCiAgICBsb2NhbCBjdHggPSB7fQoKICAgIGN0eC5tX3JlbmRlciA9IHsKICAgICAgICByZWMgPSBmdW5jdGlvbihzZWxmLCB4LCB5LCB3LCBoLCByYWRpdXMsIGNvbG9yKQogICAgICAgICAgICByYWRpdXMgPSBtYXRoLm1pbih4LzIsIHkvMiwgcmFkaXVzKQogICAgICAgICAgICBsb2NhbCByLCBnLCBiLCBhID0gdW5wYWNrKGNvbG9yKQogICAgICAgICAgICByZW5kZXJlci5yZWN0YW5nbGUoeCwgeSArIHJhZGl1cywgdywgaCAtIHJhZGl1cyoyLCByLCBnLCBiLCBhKQogICAgICAgICAgICByZW5kZXJlci5yZWN0YW5nbGUoeCArIHJhZGl1cywgeSwgdyAtIHJhZGl1cyoyLCByYWRpdXMsIHIsIGcsIGIsIGEpCiAgICAgICAgICAgIHJlbmRlcmVyLnJlY3RhbmdsZSh4ICsgcmFkaXVzLCB5ICsgaCAtIHJhZGl1cywgdyAtIHJhZGl1cyoyLCByYWRpdXMsIHIsIGcsIGIsIGEpCiAgICAgICAgICAgIHJlbmRlcmVyLmNpcmNsZSh4ICsgcmFkaXVzLCB5ICsgcmFkaXVzLCByLCBnLCBiLCBhLCByYWRpdXMsIDE4MCwgMC4yNSkKICAgICAgICAgICAgcmVuZGVyZXIuY2lyY2xlKHggLSByYWRpdXMgKyB3LCB5ICsgcmFkaXVzLCByLCBnLCBiLCBhLCByYWRpdXMsIDkwLCAwLjI1KQogICAgICAgICAgICByZW5kZXJlci5jaXJjbGUoeCAtIHJhZGl1cyArIHcsIHkgLSByYWRpdXMgKyBoLCByLCBnLCBiLCBhLCByYWRpdXMsIDAsIDAuMjUpCiAgICAgICAgICAgIHJlbmRlcmVyLmNpcmNsZSh4ICsgcmFkaXVzLCB5IC0gcmFkaXVzICsgaCwgciwgZywgYiwgYSwgcmFkaXVzLCAtOTAsIDAuMjUpCiAgICAgICAgZW5kLAoKICAgICAgICByZWNfb3V0bGluZSA9IGZ1bmN0aW9uKHNlbGYsIHgsIHksIHcsIGgsIHJhZGl1cywgdGhpY2tuZXNzLCBjb2xvcikKICAgICAgICAgICAgcmFkaXVzID0gbWF0aC5taW4ody8yLCBoLzIsIHJhZGl1cykKICAgICAgICAgICAgbG9jYWwgciwgZywgYiwgYSA9IHVucGFjayhjb2xvcikKICAgICAgICAgICAgaWYgcmFkaXVzID09IDEgdGhlbgogICAgICAgICAgICAgICAgcmVuZGVyZXIucmVjdGFuZ2xlKHgsIHksIHcsIHRoaWNrbmVzcywgciwgZywgYiwgYSkKICAgICAgICAgICAgICAgIHJlbmRlcmVyLnJlY3RhbmdsZSh4LCB5ICsgaCAtIHRoaWNrbmVzcywgdyAsIHRoaWNrbmVzcywgciwgZywgYiwgYSkKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgcmVuZGVyZXIucmVjdGFuZ2xlKHggKyByYWRpdXMsIHksIHcgLSByYWRpdXMqMiwgdGhpY2tuZXNzLCByLCBnLCBiLCBhKQogICAgICAgICAgICAgICAgcmVuZGVyZXIucmVjdGFuZ2xlKHggKyByYWRpdXMsIHkgKyBoIC0gdGhpY2tuZXNzLCB3IC0gcmFkaXVzKjIsIHRoaWNrbmVzcywgciwgZywgYiwgYSkKICAgICAgICAgICAgICAgIHJlbmRlcmVyLnJlY3RhbmdsZSh4LCB5ICsgcmFkaXVzLCB0aGlja25lc3MsIGggLSByYWRpdXMqMiwgciwgZywgYiwgYSkKICAgICAgICAgICAgICAgIHJlbmRlcmVyLnJlY3RhbmdsZSh4ICsgdyAtIHRoaWNrbmVzcywgeSArIHJhZGl1cywgdGhpY2tuZXNzLCBoIC0gcmFkaXVzKjIsIHIsIGcsIGIsIGEpCiAgICAgICAgICAgICAgICByZW5kZXJlci5jaXJjbGVfb3V0bGluZSh4ICsgcmFkaXVzLCB5ICsgcmFkaXVzLCByLCBnLCBiLCBhLCByYWRpdXMsIDE4MCwgMC4yNSwgdGhpY2tuZXNzKQogICAgICAgICAgICAgICAgcmVuZGVyZXIuY2lyY2xlX291dGxpbmUoeCArIHJhZGl1cywgeSArIGggLSByYWRpdXMsIHIsIGcsIGIsIGEsIHJhZGl1cywgOTAsIDAuMjUsIHRoaWNrbmVzcykKICAgICAgICAgICAgICAgIHJlbmRlcmVyLmNpcmNsZV9vdXRsaW5lKHggKyB3IC0gcmFkaXVzLCB5ICsgcmFkaXVzLCByLCBnLCBiLCBhLCByYWRpdXMsIC05MCwgMC4yNSwgdGhpY2tuZXNzKQogICAgICAgICAgICAgICAgcmVuZGVyZXIuY2lyY2xlX291dGxpbmUoeCArIHcgLSByYWRpdXMsIHkgKyBoIC0gcmFkaXVzLCByLCBnLCBiLCBhLCByYWRpdXMsIDAsIDAuMjUsIHRoaWNrbmVzcykKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kLAoKICAgICAgICBnbG93X21vZHVsZSA9IGZ1bmN0aW9uKHNlbGYsIHgsIHksIHcsIGgsIHdpZHRoLCByb3VuZGluZywgYWNjZW50LCBhY2NlbnRfaW5uZXIpCiAgICAgICAgICAgIGxvY2FsIHRoaWNrbmVzcyA9IDEKICAgICAgICAgICAgbG9jYWwgb2Zmc2V0ID0gMQogICAgICAgICAgICBsb2NhbCByLCBnLCBiLCBhID0gdW5wYWNrKGFjY2VudCkKICAgICAgICAgICAgaWYgYWNjZW50X2lubmVyIHRoZW4KICAgICAgICAgICAgICAgIHNlbGY6cmVjKHggLCB5LCB3LCBoICsgMSwgcm91bmRpbmcsIGFjY2VudF9pbm5lcikKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGZvciBrID0gMCwgd2lkdGggZG8KICAgICAgICAgICAgICAgIGlmIGEgKiAoay93aWR0aCleKDEpID4gNSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgYWNjZW50ID0ge3IsIGcsIGIsIGEgKiAoay93aWR0aCleKDIpfQogICAgICAgICAgICAgICAgICAgIHNlbGY6cmVjX291dGxpbmUoeCArIChrIC0gd2lkdGggLSBvZmZzZXQpKnRoaWNrbmVzcywgeSArIChrIC0gd2lkdGggLSBvZmZzZXQpICogdGhpY2tuZXNzLCB3IC0gKGsgLSB3aWR0aCAtIG9mZnNldCkqdGhpY2tuZXNzKjIsIGggKyAxIC0gKGsgLSB3aWR0aCAtIG9mZnNldCkqdGhpY2tuZXNzKjIsIHJvdW5kaW5nICsgdGhpY2tuZXNzICogKHdpZHRoIC0gayArIG9mZnNldCksIHRoaWNrbmVzcywgYWNjZW50KQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCwKCiAgICAgICAgcGFuZG9yYV9vZyA9IGZ1bmN0aW9uKHNlbGYsIHgseSx3LGgscixnLGIsYSwgdGV4dCkKICAgICAgICAgICAgc2VsZjpyZWMoeCx5LHcsaCwzLCB7MCwwLDAsMjU1fSkKICAgICAgICAgICAgc2VsZjpyZWNfb3V0bGluZSh4ICsgMSwgeSArIDEsIHcgLSAyLCBoIC0gMiwgMywgMSwgezQ1LDQ1LDQ1LDI1NX0pCiAgICAgICAgICAgIHNlbGY6cmVjKHggKyAzLCB5ICsgMywgdyAtIDYsIGggLSA2LCAyLCB7MTUsMTUsMTUsMjU1fSkKICAgICAgICAgICAgcmVuZGVyZXIudGV4dCh4ICsgNSwgeSArIDYsIHIsZyxiLGEsICcnLCBuaWwsIHRleHQpCiAgICAgICAgZW5kCiAgICB9CgkKICAgIGN0eC5ub3RpZnkgPSB7CgkKICAgICAgICBlYXNlSW5PdXQgPSBmdW5jdGlvbih0KQoJCQlyZXR1cm4gKHQgPiAwLjUpIGFuZCA0KigodC0xKV4zKSsxIG9yIDQqdF4zOwoJCWVuZCwKICAgICAgICBjbGFtcCA9IGZ1bmN0aW9uKHZhbCwgbG93ZXIsIHVwcGVyKQoJCQlpZiBsb3dlciA+IHVwcGVyIHRoZW4gbG93ZXIsIHVwcGVyID0gdXBwZXIsIGxvd2VyIGVuZAoJCQlyZXR1cm4gbWF0aC5tYXgobG93ZXIsIG1hdGgubWluKHVwcGVyLCB2YWwpKQoJCWVuZCwKICAgICAgICByZW5kZXIgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIGxvY2FsIE9mZnNldCA9IDAKICAgICAgICAgICAgZm9yIGksIGluZm9fbm90aSBpbiBpcGFpcnMobm90aWZ5X2RhdGEpIGRvCiAgICAgICAgICAgICAgICBpZiBpID4gNyB0aGVuCiAgICAgICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlKG5vdGlmeV9kYXRhLCBpKQogICAgICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAgICAgaWYgaW5mb19ub3RpLnRleHQgfj0gbmlsIGFuZCBpbmZvX25vdGkudGV4dCB+PSAiIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgaW5mb19ub3RpLnRpbWVyICsgNC4xIDwgZ2xvYmFscy5yZWFsdGltZSgpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaW5mb19ub3RpLmZyYWN0aW9uID0gY3R4Lm5vdGlmeS5jbGFtcChpbmZvX25vdGkuZnJhY3Rpb24gLSBnbG9iYWxzLmZyYW1ldGltZSgpIC8gMC4zLCAwLCAxKQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgaW5mb19ub3RpLmZyYWN0aW9uID0gY3R4Lm5vdGlmeS5jbGFtcChpbmZvX25vdGkuZnJhY3Rpb24gKyBnbG9iYWxzLmZyYW1ldGltZSgpIC8gMC4zLCAwLCAxKQogICAgICAgICAgICAgICAgICAgICAgICBpbmZvX25vdGkudGltZV9sZWZ0ID0gY3R4Lm5vdGlmeS5jbGFtcChpbmZvX25vdGkudGltZV9sZWZ0ICsgZ2xvYmFscy5mcmFtZXRpbWUoKSAvIDQuMSwgMCwgMSkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbG9jYWwgZnJhY3Rpb24gPSBjdHgubm90aWZ5LmVhc2VJbk91dChpbmZvX25vdGkuZnJhY3Rpb24pCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGxvY2FsIHdpZHRoID0gdmVjdG9yKHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiYyIsIGluZm9fbm90aS50ZXh0KSkKICAgICAgICAgICAgICAgIGxvY2FsIGNvbG9yID0gaW5mb19ub3RpLmNvbG9yCgogICAgICAgICAgICAgICAgLS1jdHgubV9yZW5kZXI6cGFuZG9yYV9vZyhYIC8yIC0gd2lkdGgueCAvMiwgWSAtIDIwMCAtIDEwMCArIDMxICogaSAqIGZyYWN0aW9uLCB3aWR0aC54ICsgMTAsIDI1LCBjb2xvclsxXSwgY29sb3JbMl0sIGNvbG9yWzNdLDI1NSAqIGZyYWN0aW9uLCBpbmZvX25vdGkudGV4dCkKCiAgICAgICAgICAgICAgICByZW5kZXJlci50ZXh0KFggLzIgLSB3aWR0aC54IC8yIC0gMjAgKyA1LCBZIC0gMjAwIC0gMTAwICsgMzEgKiBpICogZnJhY3Rpb24gKyA0LCBjb2xvclsxXSwgY29sb3JbMl0sIGNvbG9yWzNdLDI1NSwgJ2InLCAwLCAiIikKICAgICAgICAgICAgICAgIHJlbmRlcmVyLnRleHQoWCAvMiAtIHdpZHRoLnggLzIgLSAyMCArIDM4LCBZIC0gMjAwIC0gMTAwICsgMzEgKiBpICogZnJhY3Rpb24gKyA0LCAyNTUsMjU1LDI1NSwyNTUsICcnLCAwLCBpbmZvX25vdGkudGV4dCkKCiAgICAgICAgICAgICAgICBpZiBpbmZvX25vdGkudGltZXIgKyA0LjMgPCBnbG9iYWxzLnJlYWx0aW1lKCkgdGhlbgogICAgICAgICAgICAgICAgICAgIHRhYmxlLnJlbW92ZShub3RpZnlfZGF0YSxpKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgfQoKICAgIGN0eC5nZXRfZGVmZW5zaXZlID0gewogICAgICAgIGdldCA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgbG9jYWwgZGlmZiA9IHNpbV9kaWZmKCkKCiAgICAgICAgICAgIGlmIGRpZmYgPD0gLTEgdGhlbgogICAgICAgICAgICAgICAgdG9fZHJhdyA9ICJ5ZXMiCiAgICAgICAgICAgICAgICB0b191cCA9ICJ5ZXMiCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgfQoKICAgIGN0eC5oZWxwcyA9IHsKICAgICAgICBjYWxjdWxhdGVQZXJjZW50YWdlID0gZnVuY3Rpb24odGlja3MsIHByemV6KQogICAgICAgICAgICBsb2NhbCBwZXJjZW50YWdlID0gKHRpY2tzIC8gcHJ6ZXopICogMTAwCiAgICAgICAgICAgIHJldHVybiBwZXJjZW50YWdlCiAgICAgICAgZW5kCiAgICB9CgogICAgY3R4LmRlZmVuc2l2ZV9pbmQgPSB7CiAgICAgICAgcmVuZGVyID0gZnVuY3Rpb24oKQogICAgICAgICAgICBsb2NhbCByLGcsYixhID0gdWkuZ2V0KGN1cnJlbnRfY29sb3IpCiAgICAgICAgICAgIGlmIHRvX2RyYXcgPT0gInllcyIgYW5kIHVpLmdldChyZWYuZG91YmxldGFwWzJdKSB0aGVuCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZHJhd19hcnQgPSB0b19kcmF3X3RpY2tzICogMTAwIC8gMjcKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjdHgubV9yZW5kZXI6Z2xvd19tb2R1bGUoWCAvIDIgLSA1MCwgWSAvIDIgKiAwLjUsIDEwMCw0LCAxMCwyLHtyLGcsNTB9LCB7MzAsMzAsMzAsMTAwfSkKICAgICAgICAgICAgICAgIHJlbmRlcmVyLnRleHQoWCAvIDIgLCBZIC8gMiAgKiAwLjUgLSAxMCAsMjU1LDI1NSwyNTUsMjU1LCJjIiwwLCJkZWZlbnNpdmUiKQogICAgICAgICAgICAgICAgY3R4Lm1fcmVuZGVyOnJlYyhYIC8gMiAtIDY1LCBZIC8yICogMC41LCAxMzAsIDQwLCAyMCwgezIwLDIwLDIwLDI1NX0pCiAgICAgICAgICAgICAgICByZW5kZXJlci50ZXh0KFggLyAyIC0gMjAsIFkgLzIgKiAwLjUyLCAyNTUsMjU1LDI1NSwyNTUsICJiIiwgMCwgbWF0aC5mbG9vcihjdHguaGVscHMuY2FsY3VsYXRlUGVyY2VudGFnZSh0b19kcmF3X3RpY2tzLCAyNykpLi4iJSIpCiAgICAgICAgICAgICAgICBjdHgubV9yZW5kZXI6cmVjKFggLyAyIC0gNTksIFkgLzIgKiAwLjU1OCwgNSwgNiwgMiwge3IsZyxiLDI1NX0pCiAgICAgICAgICAgICAgICBjdHgubV9yZW5kZXI6cmVjKFggLyAyIC0gNTcsIFkgLzIgKiAwLjU1OCwgMTAsIDgsIDQsIHtyLGcsYiwyNTV9KQogICAgICAgICAgICAgICAgY3R4Lm1fcmVuZGVyOnJlYyhYIC8gMiAtIDUwLCBZIC8yICogMC41NTgsIGRyYXdfYXJ0LCA4LCAyLCB7cixnLGIsMjU1fSkKCiAgICAgICAgICAgICAgICBpZiBsb2dvIH49IG5pbCB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9nbzpkcmF3KFggLzIgKyAyMCwgWSAvMiAqIDAuNDgsIDYwLCA2MCwgcixnLGIsMjU1LCB0cnVlKQogICAgICAgICAgICAgICAgZWxzZSAKICAgICAgICAgICAgICAgICAgICBnZXRfbG9nbygpCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICBpZiB0b19kcmF3X3RpY2tzID09IDI3IHRoZW4KICAgICAgICAgICAgICAgICAgICB0b19kcmF3X3RpY2tzID0gMAogICAgICAgICAgICAgICAgICAgIHRvX2RyYXcgPSAibm8iCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIHRvX2RyYXdfdGlja3MgPSB0b19kcmF3X3RpY2tzICsgMQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIH0KCiAgICBjdHguYXJyb3dzID0gewogICAgICAgIHJlbmRlciA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgZGlyZWN0aW9uID09IC05MCB0aGVuCiAgICAgICAgICAgICAgICByZW5kZXJlci50ZXh0KFggLyAyIC0gNjAsIFkgLzIgLSA2LCAyNTUsMjU1LDI1NSwyNTUsICIiLCAwLCAiPCIpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBpZiBkaXJlY3Rpb24gPT0gOTAgdGhlbgogICAgICAgICAgICAgICAgcmVuZGVyZXIudGV4dChYIC8gMiArIDUwLCBZIC8yIC0gNiwgMjU1LDI1NSwyNTUsMjU1LCAiIiwgMCwgIj4iKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIH0KCgogICAgY3R4LnNsb3dlZF9kb3duID0gewogICAgICAgIHBhaW50ID0gZnVuY3Rpb24oKQogICAgICAgICAgICBsb2NhbCBzbG93ZWRfZG93biA9IGVudGl0eS5nZXRfcHJvcChlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpLCJtX2ZsVmVsb2NpdHlNb2RpZmllciIpICogMTAwCiAgICAgICAgICAgIGxvY2FsIHIsZyxiLGEgPSA4NywgMjM1LCA2MQogICAgICAgICAgICBsb2NhbCBpc19kZWZlbnNpdmUgPSB0b19kcmF3ID09ICJ5ZXMiIGFuZCB1aS5nZXQocmVmZXJlbmNlLmRvdWJsZV90YXBbMl0pCgkJCWxvY2FsIGlzX2R0ID0gdWkuZ2V0KHJlZmVyZW5jZS5kb3VibGVfdGFwWzJdKQogICAgICAgICAgICBsb2NhbCBzY29wZWQgPSBlbnRpdHkuZ2V0X3Byb3AoZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSwibV9iSXNTY29wZWQiKSA9PSAxIGFuZCB0cnVlIG9yIGZhbHNlCiAgICAgICAgICAgIGxvY2FsIG5leHRBdHRhY2sgPSBlbnRpdHkuZ2V0X3Byb3AoZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSwgIm1fZmxOZXh0QXR0YWNrIikKICAgICAgICAgICAgbG9jYWwgbmV4dFByaW1hcnlBdHRhY2sgPSBlbnRpdHkuZ2V0X3Byb3AoZW50aXR5LmdldF9wbGF5ZXJfd2VhcG9uKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkpLCAibV9mbE5leHRQcmltYXJ5QXR0YWNrIikKICAgICAgICAgICAgbG9jYWwgZHRBY3RpdmUgPSBmYWxzZQogICAgICAgIAogICAgICAgICAgICBpZiBuZXh0UHJpbWFyeUF0dGFjayB+PSBuaWwgdGhlbgogICAgICAgICAgICAgICAgZHRBY3RpdmUgPSBub3QgKG1hdGgubWF4KG5leHRQcmltYXJ5QXR0YWNrLCBuZXh0QXR0YWNrKSA+IGdsb2JhbHMuY3VydGltZSgpKQogICAgICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAgICAgaWYgc2xvd2VkX2Rvd24gPCAxMDAgYW5kIHNsb3dlZF9kb3duID09IHRydWUgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgc2l6ZV9iYXIgPSBzbG93ZWRfZG93bl92YWx1ZSAqIDk4IC8gMTAwCiAgICAgICAgICAgICAgICAtLSB0ZXh0CiAgICAgICAgICAgICAgICBpZiBfdWkudmlzdWFscy5zdHlsZS52YWx1ZSA9PSAiRGVmYXVsdCIgdGhlbgogICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLnRleHQoWCAvIDIgLCBpc19kZWZlbnNpdmUgYW5kIFkgLyAyICogMC41NSAtIDEwIG9yIFkgLyAyICAqIDAuNSAtIDEwICwyNTUsMjU1LDI1NSwyNTUsImMiLDAsIi0gc2xvd2VkIGRvd24gLSIpCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIucmVjdGFuZ2xlKFggLyAyIC0gNTAsIGlzX2RlZmVuc2l2ZSBhbmQgWSAvIDIgKiAwLjU1IG9yIFkgLyAyICogMC41LDEwMCwzLDEyLDEyLDEyLDI1NSkKICAgICAgICAgICAgICAgICAgICByZW5kZXJlci5yZWN0YW5nbGUoWCAvIDIgLSA1MCwgaXNfZGVmZW5zaXZlIGFuZCBZIC8yICogMC41NSBvciBZIC8gMiAqIDAuNSwgc2l6ZV9iYXIsIDIsciwgZywgYiwgMjU1KQogICAgICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAgICAgaWYgX3VpLnZpc3VhbHMuc3R5bGUudmFsdWUgPT0gIk1vZGVybiIgdGhlbgogICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLnRleHQoWCAvIDIgLCBpc19kZWZlbnNpdmUgYW5kIFkgLyAyICogMC41NSAtIDEwIG9yIFkgLyAyICAqIDAuNSAtIDEwICwgMjU1LCAyNTUsIDI1NSwgMjU1LCAiYyIsIDAsIHN0cmluZy5mb3JtYXQoIlxhRkZGRkZGRkZzbG93ZWQgZG93biBcYUZGRkZGRkZGKFxhJXMlcyUlXGFGRkZGRkZGRikiLCByZ2JhX3RvX2hleChyLCBnLCBiLCAyNTUpLCBtYXRoLmZsb29yKGN0eC5tYXRoLmNhbGN1bGF0ZVBlcmNlbnRhZ2Uoc2l6ZV9iYXIsIDEwMCkpKSkKICAgICAgICAgICAgICAgICAgICAtLXJlbmRlcmVyLnJlY3RhbmdsZShYIC8gMiAtIDUwLCBZIC8gMiAgKiAwLjUgKyAwLjMsMTAwLDQsNTAsNTAsNTAsMjU1KQogICAgICAgICAgICAgICAgICAgIGN0eC5tX3JlbmRlcjpnbG93X21vZHVsZShYIC8gMiAtIDUwLCBpc19kZWZlbnNpdmUgYW5kIFkgLyAyICogMC41NSBvciBZIC8gMiAqIDAuNSwxMDAsMywgMTQsMix7cixnLGIsNTB9LCB7MzAsMzAsMzAsMjU1fSkKICAgICAgICAgICAgICAgICAgICByZW5kZXJlci5yZWN0YW5nbGUoWCAvIDIsIGlzX2RlZmVuc2l2ZSBhbmQgWSAvIDIgKiAwLjU1ICsgMSBvciBZIC8gMiAqIDAuNSArIDEsc2l6ZV9iYXIgLyAyLDIscixnLGIsMjU1KQogICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLnJlY3RhbmdsZShYIC8gMiwgaXNfZGVmZW5zaXZlIGFuZCBZIC8gMiAqIDAuNTUgKyAxIG9yIFkgLyAyICogMC41ICsgMSwtc2l6ZV9iYXIgLyAyLDIscixnLGIsMjU1KQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgfQoJCgkJY3R4LndhdGVybWFyayA9IHsKCQkJcmVuZGVyID0gZnVuY3Rpb24oKQoJCQkJaWYgdWkuZ2V0KHdhdGVybWFya19tb2RlKSA9PSAiZGVmYXVsdCIgdGhlbgoJCQkJCWxvY2FsIHIsZyxiLGEgPSA4NywgMjM1LCA2MQoJCQkJCWxvY2FsIHRleHRfc2l6ZSA9IHZlY3RvcihyZW5kZXJlci5tZWFzdXJlX3RleHQoImNiIiwgIkcgTCBPIFIgSSBPIFMgQSIpKQoJCQkJCQoJCQkJCQkJCQlpZiB1aS5pc19tZW51X29wZW4oKSB0aGVuCgkJCQkJCXJlbmRlcmVyLnRleHQod2F0ZXJtYXJrX3gsIHdhdGVybWFya195LTIwLCAyNTUsIDI1NSwgMjU1LCAyMDAsICJjIiwgbmlsLCAiQ2xpY2sgbW91c2UyID0gY2VudGVyIHdhdGVybWFyayIpCgkJCQkJCXJlbmRlcl9yZWN0X291dGxpbmUod2F0ZXJtYXJrX3ggLSB0ZXh0X3NpemUueCAvMiAtIDIzLCB3YXRlcm1hcmtfeSAtIDEwLCB0ZXh0X3NpemUueCArIDQ3LCB0ZXh0X3NpemUueSArIDEwLCAyNTUsMjU1LDI1NSwyNTUpCgkJCQkJZW5kCgoJCQkJCWlmIGNsaWVudC5rZXlfc3RhdGUoMHgwMSkgYW5kIHVpLmlzX21lbnVfb3BlbigpIHRoZW4KCQkJCQkJbG9jYWwgbW91c2VfcG9zID0geyB1aS5tb3VzZV9wb3NpdGlvbigpIH0KCQkJCQkJaWYgaW50ZXJzZWN0KHdhdGVybWFya194IC0gdGV4dF9zaXplLnggLzIgLSAzLCB3YXRlcm1hcmtfeSAtIDEwLCB0ZXh0X3NpemUueCArIDcsIHRleHRfc2l6ZS55ICsgOSkgdGhlbgoJCQkJCQkJd2F0ZXJtYXJrX3ggPSBtb3VzZV9wb3NbMV0KCQkJCQkJCXdhdGVybWFya195ID0gbW91c2VfcG9zWzJdCgkJCQkJCWVuZAoJCQkJCWVuZAoKCQkJCQlpZiBjbGllbnQua2V5X3N0YXRlKDB4MDIpIGFuZCB1aS5pc19tZW51X29wZW4oKSB0aGVuCgkJCQkJCWlmIGludGVyc2VjdCh3YXRlcm1hcmtfeCAtIHRleHRfc2l6ZS54IC8yIC0gMywgd2F0ZXJtYXJrX3kgLSAxMCwgdGV4dF9zaXplLnggKyA3LCB0ZXh0X3NpemUueSArIDkpIHRoZW4KCQkJCQkJCXdhdGVybWFya194ID0gWCAvIDIKCQkJCQkJZW5kCgkJCQkJZW5kCgkJCQkJCgkJCQkJcmVuZGVyZXIudGV4dCh3YXRlcm1hcmtfeCwgd2F0ZXJtYXJrX3ksIHIsIGcsIGIsIDI1NSwgImJjIiwgMCwgdGV4dF9mYWRlX2FuaW1hdGlvbigzLCBjb2xvcl9yLCBjb2xvcl9nLCBjb2xvcl9iLCAyNTUsICJHIEwgTyBSIEkgTyBTIEEiKSAuLiAnXGFmYTU3NTdGRiBbU0VDUkVUXScpCgkJCQllbHNlCgkJCWVuZAoKICAgICAgICAgICAgaWYgdWkuZ2V0KHdhdGVybWFya19tb2RlKSA9PSAicGhvYmljIiB0aGVuCgkJCWxvY2FsIHdpZHRoID0gdmVjdG9yKHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiIiwgdGV4dCkpCiAgICAgICAgICAgICAgICBsb2NhbCByLGcsYixhID0gMjU1LCAyNTUsIDI1NQogICAgICAgICAgICAgICAgcmVuZGVyZXIudGV4dChYIC8yLCBZIC0gNSwgciwgZywgYiwgMTMyLCAiYy0iLCAwLCAoIkdMT1JJT1NBLlNFQ1JFVCIpKQogICAgICAgICAgICBlbmQKCQkJCiAgICAgICAgICAgIGlmIHVpLmdldCh3YXRlcm1hcmtfbW9kZSkgPT0gImNyaW5nZSIgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgbWUgPSBlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpCiAgICAgICAgICAgICAgICBpZiBtZSA9PSBuaWwgdGhlbgogICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBsb2NhbCBzdGVhbV9pZCA9IGVudGl0eS5nZXRfc3RlYW02NChtZSkKICAgICAgICAgICAgICAgIGxvY2FsIHN0ZWFtX2F2YXRhciA9IGltYWdlcy5nZXRfc3RlYW1fYXZhdGFyKHN0ZWFtX2lkKQoKCiAgICAgICAgICAgICAgICBsb2NhbCBtYXJnaW5YZGQsIG1hcmdpbll5eSA9IHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiYyIsIChzdGVhbV9pZCkpCgogICAgICAgICAgICAgICAgcmVuZGVyZXIucmVjdGFuZ2xlKFgvMiAtIDM3MCwgWSAtIDMxLCA1NSArIG1hcmdpblhkZCwgMzIsIDcwLDY2LDk0LDI1NSkKICAgICAgICAgICAgICAgIHJlbmRlcmVyLnJlY3RhbmdsZShYLzIgLSAzNzAsIFkgLSAyNSwgMzAgICsgbWFyZ2luWGRkLCAzMiwgMCwwLDAsMjU1KQogICAgICAgICAgICAgICAgcmVuZGVyZXIudGV4dChYLzIgLSAzNDAgKyBtYXJnaW5YZGQgLSBtYXJnaW5YZGQgLSAxNSxZIC0gMTgsIDI1NSwgMjU1LCAyNTUsIDI1NSwgImIiLCBuaWwsIHN0cmluZy51cHBlcihldXBoZW1pYS51c2VybmFtZSkpCiAgICAgICAgICAgICAgICByZW5kZXJlci5ncmFkaWVudChYLzIgLSAzNzAsIFkgLSAyNSwgMzAgICsgbWFyZ2luWGRkLCAyNiwgNzAsNjYsOTQsMCwgNzAsNjYsOTQsMjEwLCBmYWxzZSkKICAgICAgICAgICAgICAgIHN0ZWFtX2F2YXRhcjpkcmF3KFgvMiAtIDM0MCArIG1hcmdpblhkZCwgWSAtIDI1LCAyNSwgMjUsIDI1NSwgMjU1LCAyNTUsIDI1NSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICB9CgogICAgY3R4LmhlbHBzID0gewogICAgICAgIGxlcnAgPSBmdW5jdGlvbihhLCBiLCB0KQogICAgICAgICAgICByZXR1cm4gYSArIChiIC0gYSkgKiB0CiAgICAgICAgZW5kCiAgICB9CgogICBjdHguZGFtYWdlX2luZF9ndXdubyA9IHsKICAgICAgICByZW5kZXIgPSBmdW5jdGlvbigpICAKCQlpZiB1aS5nZXQoZGFtYWdlX2luZCkgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgcixnLGIsYSA9IHVpLmdldChjdXJyZW50X2NvbG9yKQogICAgICAgICAgICAgICAgZm9yIHRpY2ssIGRhdGEgaW4gcGFpcnMoaGl0bWFya2VyX3hkKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIGdsb2JhbHMuY3VydGltZSgpIDw9IGRhdGFbNF0gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB4MSwgeTEgPSByZW5kZXJlci53b3JsZF90b19zY3JlZW4oZGF0YVsxXSwgZGF0YVsyXSwgZGF0YVszXSkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgeDEgfj0gbmlsIGFuZCB5MSB+PSBuaWwgdGhlbgoKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVs2XSA9IGRhdGFbNl0gKyAxCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRhdGFbNl0gPiBkYXRhWzVdIHRoZW4gZGF0YVs2XSA9IGRhdGFbNV0gZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRhdGFbNl0gPiAxMDAgdGhlbiBkYXRhWzZdID0gMTAwIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgY29udGFpbnMoZG1nX2luZF9tb2RlLCAicG9zaXRpb24iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhWzddID0gbGVycChkYXRhWzddLCB5MSAtIDEzMCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDAuMDMpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBpZiBjb250YWlucyhkbWdfaW5kX21vZGUsICJ0cmFuc3BhcmVuY3kiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhWzhdID0gbGVycChkYXRhWzhdLCAwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMC40KQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIudGV4dCh4MSwgeTEgLSBkYXRhWzddLCByLCBnLCBiLCBkYXRhWzhdLCAnY2InLCAwLCBkYXRhWzZdKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKCQllbmQKICAgIH0KCgoKICAgIGN0eC5pbmRzID0gewoJCWRlZmF1bHQgPSBmdW5jdGlvbihzY29wZSkKCQkKICAgICAgICAgICAgbG9jYWwgcixnLGIsYSA9IHVpLmdldChpbmRjb2xvcnMpCgogICAgICAgICAgICBsb2NhbCBiaW5kcyA9IHN0cmluZy5mb3JtYXQoIlxhJXNRUCAgXGElc0ZTICBcYSVzSFMiLCB1aS5nZXQocmVmLnF1aWNrX3BlZWtbMl0pIGFuZCByZ2JhX3RvX2hleChyLGcsYiwyNTUpIG9yIHJnYmFfdG9faGV4KDEzMCwxMzAsMTMwLDE5MCksIHVpLmdldChyZWYuZnJlZXN0YW5kWzFdKSBhbmQgcmdiYV90b19oZXgocixnLGIsMjU1KSBvciByZ2JhX3RvX2hleCgxMzAsMTMwLDEzMCwxOTApLCB1aS5nZXQocmVmZXJlbmNlLm9uX3Nob3RfYW50aV9haW1bMl0pIGFuZCByZ2JhX3RvX2hleChyLGcsYiwyNTUpIG9yIHJnYmFfdG9faGV4KDEzMCwxMzAsMTMwLDE5MCkpCiAgICAgICAgICAgIGxvY2FsIGV4cGxvaXQgPSBzdHJpbmcuZm9ybWF0KCJcYSVzRFQiLCB1aS5nZXQocmVmLmRvdWJsZXRhcFsyXSkgYW5kIHJnYmFfdG9faGV4KHIsZyxiLDI1NSkgb3IgcmdiYV90b19oZXgoMTMwLDEzMCwxMzAsMTkwKSkgLS1sb2NhbCBsdWFfY29sb3IgPSB7ciA9IDE3NiwgZyA9IDE0OSwgYiA9IDI1NX0KCiAgICAgICAgICAgIGlmIHVpLmdldChyZWYuZG91YmxldGFwWzJdKSBhbmQgdWkuZ2V0KHJlZi5xdWlja19wZWVrWzJdKSB0aGVuIGV4cGxvaXQgPSAiXGEiLi5yZ2JhX3RvX2hleChyLGcsYiwyNTUpLi4iSURFQUwtVElDSyIgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBsb2NhbCB3aWR0aCA9IHZlY3RvcihyZW5kZXJlci5tZWFzdXJlX3RleHQoImMiLCBleHBsb2l0KSkKCiAgICAgICAgICAgIHJlbmRlcmVyLnRleHQoWC8yICsgMjEgKiBzY29wZSwgWS8yICsgMTUsIDAsIDAsIDAsIDUwLCAiYyIsIDAsIGdyYWRpZW50X3RleHQoImdsb3Jpb3NhIiwgMTAsIHIsZyxiLDI1NSkpCiAgICAgICAgICAgIHJlbmRlcmVyLnRleHQoWC8yICsgd2lkdGgueCAvMiAqIHNjb3BlLCBZLzIgKyAxNSArIDI1IC0gOCAsIDI1NSwgMjU1LCAyNTUsIDI1NSwgImMtIiwgMCwgZXhwbG9pdCkKICAgICAgICAgICAgcmVuZGVyZXIudGV4dChYLzIgKyAxNyAqIHNjb3BlLCBZLzIgKyAxNSArIDgsIDI1NSwgMjU1LCAyNTUsIDI1NSwgImMtIiwgMCwgYmluZHMpCiAgICAgICAgZW5kLAogICAgICAgIHJlbmRlciA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgbG9jYWwgbWUgPSBlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpCiAgICAgICAgICAgIGlmIG5vdCBlbnRpdHkuaXNfYWxpdmUobWUpIHRoZW4gcmV0dXJuIGVuZAogICAgICAgICAgICBpZiBlbnRpdHkuZ2V0X3Byb3AobWUsICJtX2JJc1Njb3BlZCIpID09IDEgdGhlbgogICAgICAgICAgICAgICAgc2NvcGVfeGR4ZCA9IGN0eC5ub3RpZnkuY2xhbXAoc2NvcGVfeGR4ZCArIGdsb2JhbHMuZnJhbWV0aW1lKCkgLyAwLjMsIDAsIDEpCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHNjb3BlX3hkeGQgPSBjdHgubm90aWZ5LmNsYW1wKHNjb3BlX3hkeGQgLSBnbG9iYWxzLmZyYW1ldGltZSgpIC8gMC4zLCAwLCAxKQogICAgICAgICAgICBlbmQKCiAgICAgICAgICAgIGxvY2FsIGZyYWN0aW9uID0gY3R4Lm5vdGlmeS5lYXNlSW5PdXQoc2NvcGVfeGR4ZCkKCiAgICAgICAgICAgIGlmIHVpLmdldChpbmRzKSB0aGVuCiAgICAgICAgICAgIGN0eC5pbmRzLmRlZmF1bHQoZnJhY3Rpb24pCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICB9CgogICAgcmV0dXJuIGN0eAplbmQpKCkKCgoKCmxvY2FsIHJlZmVyZW5jZXMgPSB7CiAgICBtaW5pbXVtX2RhbWFnZSA9IHVpLnJlZmVyZW5jZSgiUkFHRSIsICJBaW1ib3QiLCAiTWluaW11bSBkYW1hZ2UiKSwKICAgIG1pbmltdW1fZGFtYWdlX292ZXJyaWRlID0geyB1aS5yZWZlcmVuY2UoIlJBR0UiLCAiQWltYm90IiwgIk1pbmltdW0gZGFtYWdlIG92ZXJyaWRlIikgfQp9Cgpsb2NhbCBzY3JlZW5fc2l6ZSA9IHsgY2xpZW50LnNjcmVlbl9zaXplKCkgfQoKbG9jYWwgcGFpbnQgPSBmdW5jdGlvbihjdHgpCiAgICBsb2NhbCBsb2NhbHBsYXllciA9IGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkKICAgIGlmIGxvY2FscGxheWVyID09IG5pbCBvciBub3QgZW50aXR5LmlzX2FsaXZlKGxvY2FscGxheWVyKSB0aGVuIHJldHVybiBlbmQKCiAgICBpZiB1aS5nZXQocmVmZXJlbmNlcy5taW5pbXVtX2RhbWFnZV9vdmVycmlkZVsyXSkgdGhlbgogICAgICAgIHJlbmRlcmVyLnRleHQoc2NyZWVuX3NpemVbMV0gLyAyICsgMiwgc2NyZWVuX3NpemVbMl0gLyAyIC0gMTQsIDI1NSwgMjU1LCAyNTUsIDIyNSwgImQiLCAwLCB1aS5nZXQocmVmZXJlbmNlcy5taW5pbXVtX2RhbWFnZV9vdmVycmlkZVszXSkgLi4gIiIpCiAgICBlbmQKZW5kCgpsb2NhbCB1aV9jYWxsYmFjayA9IGZ1bmN0aW9uKHNlbGYpCiAgICBsb2NhbCBlbmFibGVkID0gdWkuZ2V0KHNlbGYpCiAgICBsb2NhbCB1cGRhdGVjYWxsYmFjayA9IGVuYWJsZWQgYW5kIGNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2sgb3IgY2xpZW50LnVuc2V0X2V2ZW50X2NhbGxiYWNrCgogICAgdXBkYXRlY2FsbGJhY2soInBhaW50IiwgcGFpbnQpCmVuZAoKdWkuc2V0X2NhbGxiYWNrKG1pbmRhbWFnZWluZCwgdWlfY2FsbGJhY2spCnVpX2NhbGxiYWNrKG1pbmRhbWFnZWluZCkKCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soJ3BhaW50JywgZnVuY3Rpb24oKQogICAgY3R4LndhdGVybWFyay5yZW5kZXIoKQoJY3R4LnNsb3dlZF9kb3duOnBhaW50KCkKICAgIGN0eC5pbmRzLnJlbmRlcigpCgljdHguZGFtYWdlX2luZF9ndXdubzpyZW5kZXIoKQplbmQpCgpmdW5jdGlvbiBuZXdfbm90aWZ5KHN0cmluZywgciwgZywgYiwgYSkKICAgIGxvY2FsIG5vdGlmaWNhdGlvbiA9IHsKICAgICAgICB0ZXh0ID0gc3RyaW5nLAogICAgICAgIHRpbWVyID0gZ2xvYmFscy5yZWFsdGltZSgpLAogICAgICAgIGNvbG9yID0geyByLCBnLCBiLCBhIH0sCiAgICAgICAgYWxwaGEgPSAwLAogICAgICAgIGZyYWN0aW9uID0gMCwKICAgICAgICB0aW1lX2xlZnQgPSAwCiAgICB9CgogICAgaWYgI25vdGlmeV9kYXRhID09IDAgdGhlbgogICAgICAgIG5vdGlmaWNhdGlvbi55ID0gWSArIDIwCiAgICBlbHNlCiAgICAgICAgbG9jYWwgbGFzdE5vdGlmaWNhdGlvbiA9IG5vdGlmeV9kYXRhWyNub3RpZnlfZGF0YV0KICAgICAgICBub3RpZmljYXRpb24ueSA9IGxhc3ROb3RpZmljYXRpb24ueSArIDIwIAogICAgZW5kCgogICAgdGFibGUuaW5zZXJ0KG5vdGlmeV9kYXRhLCBub3RpZmljYXRpb24pCmVuZAoKbG9jYWwgZnVuY3Rpb24gaW1wb3J0KHRleHQpCiAgICBsb2NhbCBzdGF0dXMsIGNvbmZpZyA9CiAgICAgICAgcGNhbGwoCiAgICAgICAgZnVuY3Rpb24oKQogICAgICAgICAgICByZXR1cm4ganNvbi5wYXJzZShiYXNlNjQuZGVjb2RlKHRleHQpKQogICAgICAgIGVuZAogICAgKQoKICAgIGlmIG5vdCBzdGF0dXMgb3Igc3RhdHVzID09IG5pbCB0aGVuCiAgICAgICAgY2xpZW50LmNvbG9yX2xvZygyNTUsIDAsIDAsICJnbG9yaW9zYX4iKQoJICAgIGNsaWVudC5jb2xvcl9sb2coMjAwLCAyMDAsIDIwMCwgIiBlcnJvciB3aGlsZSBpbXBvcnRpbmchIikKICAgICAgICByZXR1cm4KICAgIGVuZAoKICAgIGlmIGNvbmZpZyB+PSBuaWwgdGhlbgogICAgICAgIGZvciBrLCB2IGluIHBhaXJzKGNvbmZpZykgZG8KICAgICAgICAgICAgayA9ICh7WzFdID0gJ2ludGVnZXJzJ30pW2tdCgogICAgICAgICAgICBmb3IgazIsIHYyIGluIHBhaXJzKHYpIGRvCiAgICAgICAgICAgICAgICBpZiBrID09ICdpbnRlZ2VycycgdGhlbgogICAgICAgICAgICAgICAgICAgIHVpLnNldChkYXRhW2tdW2syXSwgdjIpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBjbGllbnQuY29sb3JfbG9nKDEyNCwgMjUyLCAwLCAiZ2xvcmlvc2EgfiBcMCIpCgljbGllbnQuY29sb3JfbG9nKDIwMCwgMjAwLCAyMDAsICIgY29uZmlnIHN1Y2Nlc3NmdWxseSBpbXBvcnRlZCEiKQoKZW5kCgpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCdzZXR1cF9jb21tYW5kJywgZnVuY3Rpb24oY21kKQoKCiAgICBsb2NhbCBzZWxmID0gZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKQoKICAgIGlmIGVudGl0eS5nZXRfcGxheWVyX3dlYXBvbihzZWxmKSA9PSBuaWwgdGhlbiByZXR1cm4gZW5kCgogICAgbG9jYWwgdXNpbmcgPSBmYWxzZQogICAgbG9jYWwgYW50aV9haW1fb25fdXNlID0gZmFsc2UKCiAgICBsb2NhbCBpbnZlcnRlZCA9IGVudGl0eS5nZXRfcHJvcChzZWxmLCAibV9mbFBvc2VQYXJhbWV0ZXIiLCAxMSkgKiAxMjAgLSA2MAoKICAgIGxvY2FsIGlzX3BsYW50aW5nID0gZW50aXR5LmdldF9wcm9wKHNlbGYsICdtX2JJbkJvbWJab25lJykgPT0gMSBhbmQgZW50aXR5LmdldF9jbGFzc25hbWUoZW50aXR5LmdldF9wbGF5ZXJfd2VhcG9uKHNlbGYpKSA9PSAnQ0M0JyBhbmQgZW50aXR5LmdldF9wcm9wKHNlbGYsICdtX2lUZWFtTnVtJykgPT0gMgogICAgbG9jYWwgQ1BsYW50ZWRDNCA9IGVudGl0eS5nZXRfYWxsKCdDUGxhbnRlZEM0JylbMV0KCiAgICBsb2NhbCBleWVfeCwgZXllX3ksIGV5ZV96ID0gY2xpZW50LmV5ZV9wb3NpdGlvbigpCglsb2NhbCBwaXRjaCwgeWF3ID0gY2xpZW50LmNhbWVyYV9hbmdsZXMoKQoKICAgIGxvY2FsIHNpbl9waXRjaCA9IG1hdGguc2luKG1hdGgucmFkKHBpdGNoKSkKCWxvY2FsIGNvc19waXRjaCA9IG1hdGguY29zKG1hdGgucmFkKHBpdGNoKSkKCglsb2NhbCBzaW5feWF3ID0gbWF0aC5zaW4obWF0aC5yYWQoeWF3KSkKCWxvY2FsIGNvc195YXcgPSBtYXRoLmNvcyhtYXRoLnJhZCh5YXcpKQoKICAgIGxvY2FsIGRpcmVjdGlvbl92ZWN0b3IgPSB7Y29zX3BpdGNoICogY29zX3lhdywgY29zX3BpdGNoICogc2luX3lhdywgLXNpbl9waXRjaH0KCiAgICBsb2NhbCBmcmFjdGlvbiwgZW50aXR5X2luZGV4ID0gY2xpZW50LnRyYWNlX2xpbmUoc2VsZiwgZXllX3gsIGV5ZV95LCBleWVfeiwgZXllX3ggKyAoZGlyZWN0aW9uX3ZlY3RvclsxXSAqIDgxOTIpLCBleWVfeSArIChkaXJlY3Rpb25fdmVjdG9yWzJdICogODE5MiksIGV5ZV96ICsgKGRpcmVjdGlvbl92ZWN0b3JbM10gKiA4MTkyKSkKCiAgICBpZiBDUGxhbnRlZEM0IH49IG5pbCB0aGVuCiAgICAgICAgZGlzdF90b19jNCA9IHZlY3RvcihlbnRpdHkuZ2V0X3Byb3Aoc2VsZiwgJ21fdmVjT3JpZ2luJykpOmRpc3QodmVjdG9yKGVudGl0eS5nZXRfcHJvcChDUGxhbnRlZEM0LCAnbV92ZWNPcmlnaW4nKSkpCgogICAgICAgIGlmIGVudGl0eS5nZXRfcHJvcChDUGxhbnRlZEM0LCAnbV9iQm9tYkRlZnVzZWQnKSA9PSAxIHRoZW4gZGlzdF90b19jNCA9IDU2IGVuZAoKICAgICAgICBpc19kZWZ1c2luZyA9IGRpc3RfdG9fYzQgPCA1NiBhbmQgZW50aXR5LmdldF9wcm9wKHNlbGYsICdtX2lUZWFtTnVtJykgPT0gMwogICAgZW5kCgogICAgaWYgZW50aXR5X2luZGV4IH49IC0xIHRoZW4KICAgICAgICBpZiB2ZWN0b3IoZW50aXR5LmdldF9wcm9wKHNlbGYsICdtX3ZlY09yaWdpbicpKTpkaXN0KHZlY3RvcihlbnRpdHkuZ2V0X3Byb3AoZW50aXR5X2luZGV4LCAnbV92ZWNPcmlnaW4nKSkpIDwgMTQ2IHRoZW4KICAgICAgICAgICAgdXNpbmcgPSBlbnRpdHkuZ2V0X2NsYXNzbmFtZShlbnRpdHlfaW5kZXgpIH49ICdDV29ybGQnIGFuZCBlbnRpdHkuZ2V0X2NsYXNzbmFtZShlbnRpdHlfaW5kZXgpIH49ICdDRnVuY0JydXNoJyBhbmQgZW50aXR5LmdldF9jbGFzc25hbWUoZW50aXR5X2luZGV4KSB+PSAnQ0NTUGxheWVyJwogICAgICAgIGVuZAogICAgZW5kCgogICAgaWYgY21kLmluX3VzZSA9PSAxIGFuZCBub3QgdXNpbmcgYW5kIG5vdCBpc19wbGFudGluZyBhbmQgbm90IGlzX2RlZnVzaW5nIGFuZCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3NbMTBdLm92ZXJyaWRlX3N0YXRlKSB0aGVuIGNtZC5idXR0b25zID0gYml0LmJhbmQoY21kLmJ1dHRvbnMsIGJpdC5ibm90KGJpdC5sc2hpZnQoMSwgNSkpKTsgYW50aV9haW1fb25fdXNlID0gdHJ1ZTsgc3RhdGVfaWQgPSAxMCBlbHNlIGlmICh1aS5nZXQocmVmZXJlbmNlLmRvdWJsZV90YXBbMV0pIGFuZCB1aS5nZXQocmVmZXJlbmNlLmRvdWJsZV90YXBbMl0pKSA9PSBmYWxzZSBhbmQgKHVpLmdldChyZWZlcmVuY2Uub25fc2hvdF9hbnRpX2FpbVsxXSkgYW5kIHVpLmdldChyZWZlcmVuY2Uub25fc2hvdF9hbnRpX2FpbVsyXSkpID09IGZhbHNlIGFuZCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3NbOV0ub3ZlcnJpZGVfc3RhdGUpIHRoZW4gYW50aV9haW1fb25fdXNlID0gZmFsc2U7IHN0YXRlX2lkID0gOSBlbHNlIGlmIChjbWQuaW5fanVtcCA9PSAxIG9yIGJpdC5iYW5kKGVudGl0eS5nZXRfcHJvcChzZWxmLCAnbV9mRmxhZ3MnKSwgMSkgPT0gMCkgYW5kIGVudGl0eS5nZXRfcHJvcChzZWxmLCAnbV9mbER1Y2tBbW91bnQnKSA+IDAuOCBhbmQgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzWzhdLm92ZXJyaWRlX3N0YXRlKSB0aGVuIGFudGlfYWltX29uX3VzZSA9IGZhbHNlOyBzdGF0ZV9pZCA9IDggZWxzZWlmIChjbWQuaW5fanVtcCA9PSAxIG9yIGJpdC5iYW5kKGVudGl0eS5nZXRfcHJvcChzZWxmLCAnbV9mRmxhZ3MnKSwgMSkgPT0gMCkgYW5kIGVudGl0eS5nZXRfcHJvcChzZWxmLCAnbV9mbER1Y2tBbW91bnQnKSA8IDAuOCBhbmQgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzWzddLm92ZXJyaWRlX3N0YXRlKSB0aGVuIGFudGlfYWltX29uX3VzZSA9IGZhbHNlOyBzdGF0ZV9pZCA9IDcgZWxzZWlmIGJpdC5iYW5kKGVudGl0eS5nZXRfcHJvcChzZWxmLCAnbV9mRmxhZ3MnKSwgMSkgfj0gMCBhbmQgKGVudGl0eS5nZXRfcHJvcChzZWxmLCAnbV9mbER1Y2tBbW91bnQnKSA+IDAuOCBvciB1aS5nZXQocmVmZXJlbmNlLmR1Y2tfcGVla19hc3Npc3QpKSBhbmQgdmVjdG9yKGVudGl0eS5nZXRfcHJvcChzZWxmLCAnbV92ZWNWZWxvY2l0eScpKTpsZW5ndGgoKSA+IDIgYW5kIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1s2XS5vdmVycmlkZV9zdGF0ZSkgdGhlbiBhbnRpX2FpbV9vbl91c2UgPSBmYWxzZTsgc3RhdGVfaWQgPSA2IGVsc2VpZiBiaXQuYmFuZChlbnRpdHkuZ2V0X3Byb3Aoc2VsZiwgJ21fZkZsYWdzJyksIDEpIH49IDAgYW5kIGVudGl0eS5nZXRfcHJvcChzZWxmLCAnbV9mbER1Y2tBbW91bnQnKSA+IDAuOCBhbmQgdmVjdG9yKGVudGl0eS5nZXRfcHJvcChzZWxmLCAnbV92ZWNWZWxvY2l0eScpKTpsZW5ndGgoKSA8IDIgYW5kIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1s1XS5vdmVycmlkZV9zdGF0ZSkgdGhlbiBhbnRpX2FpbV9vbl91c2UgPSBmYWxzZTsgc3RhdGVfaWQgPSA1IGVsc2VpZiBiaXQuYmFuZChlbnRpdHkuZ2V0X3Byb3Aoc2VsZiwgJ21fZkZsYWdzJyksIDEpIH49IDAgYW5kIHZlY3RvcihlbnRpdHkuZ2V0X3Byb3Aoc2VsZiwgJ21fdmVjVmVsb2NpdHknKSk6bGVuZ3RoKCkgPiAyIGFuZCBlbnRpdHkuZ2V0X3Byb3Aoc2VsZiwgJ21fZmxEdWNrQW1vdW50JykgPCAwLjggYW5kICh1aS5nZXQocmVmZXJlbmNlLnNsb3dfbW90aW9uWzFdKSBhbmQgdWkuZ2V0KHJlZmVyZW5jZS5zbG93X21vdGlvblsyXSkpID09IHRydWUgYW5kIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1s0XS5vdmVycmlkZV9zdGF0ZSkgdGhlbiBhbnRpX2FpbV9vbl91c2UgPSBmYWxzZTsgc3RhdGVfaWQgPSA0IGVsc2VpZiBiaXQuYmFuZChlbnRpdHkuZ2V0X3Byb3Aoc2VsZiwgJ21fZkZsYWdzJyksIDEpIH49IDAgYW5kIHZlY3RvcihlbnRpdHkuZ2V0X3Byb3Aoc2VsZiwgJ21fdmVjVmVsb2NpdHknKSk6bGVuZ3RoKCkgPiAyIGFuZCBlbnRpdHkuZ2V0X3Byb3Aoc2VsZiwgJ21fZmxEdWNrQW1vdW50JykgPCAwLjggYW5kICh1aS5nZXQocmVmZXJlbmNlLnNsb3dfbW90aW9uWzFdKSBhbmQgdWkuZ2V0KHJlZmVyZW5jZS5zbG93X21vdGlvblsyXSkpID09IGZhbHNlIGFuZCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3NbM10ub3ZlcnJpZGVfc3RhdGUpIHRoZW4gYW50aV9haW1fb25fdXNlID0gZmFsc2U7IHN0YXRlX2lkID0gMyBlbHNlaWYgYml0LmJhbmQoZW50aXR5LmdldF9wcm9wKHNlbGYsICdtX2ZGbGFncycpLCAxKSB+PSAwIGFuZCB2ZWN0b3IoZW50aXR5LmdldF9wcm9wKHNlbGYsICdtX3ZlY1ZlbG9jaXR5JykpOmxlbmd0aCgpIDwgMiBhbmQgZW50aXR5LmdldF9wcm9wKHNlbGYsICdtX2ZsRHVja0Ftb3VudCcpIDwgMC44IGFuZCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3NbMl0ub3ZlcnJpZGVfc3RhdGUpIHRoZW4gYW50aV9haW1fb25fdXNlID0gZmFsc2U7IHN0YXRlX2lkID0gMiBlbHNlIGFudGlfYWltX29uX3VzZSA9IGZhbHNlOyBzdGF0ZV9pZCA9IDEgZW5kIGVuZCBlbmQKICAgIGlmIGNtZC5pbl9qdW1wID09IDEgb3IgYml0LmJhbmQoZW50aXR5LmdldF9wcm9wKHNlbGYsICdtX2ZGbGFncycpLCAxKSA9PSAwIHRoZW4gZnJlZXN0YW5kaW5nX3N0YXRlX2lkID0gNSBlbHNlaWYgKGVudGl0eS5nZXRfcHJvcChzZWxmLCAnbV9mbER1Y2tBbW91bnQnKSA+IDAuOCBvciB1aS5nZXQocmVmZXJlbmNlLmR1Y2tfcGVla19hc3Npc3QpKSBhbmQgYml0LmJhbmQoZW50aXR5LmdldF9wcm9wKHNlbGYsICdtX2ZGbGFncycpLCAxKSB+PSAwIHRoZW4gZnJlZXN0YW5kaW5nX3N0YXRlX2lkID0gNCBlbHNlaWYgYml0LmJhbmQoZW50aXR5LmdldF9wcm9wKHNlbGYsICdtX2ZGbGFncycpLCAxKSB+PSAwIGFuZCB2ZWN0b3IoZW50aXR5LmdldF9wcm9wKHNlbGYsICdtX3ZlY1ZlbG9jaXR5JykpOmxlbmd0aCgpID4gMiBhbmQgKHVpLmdldChyZWZlcmVuY2Uuc2xvd19tb3Rpb25bMV0pIGFuZCB1aS5nZXQocmVmZXJlbmNlLnNsb3dfbW90aW9uWzJdKSkgPT0gdHJ1ZSB0aGVuIGZyZWVzdGFuZGluZ19zdGF0ZV9pZCA9IDMgZWxzZWlmIGJpdC5iYW5kKGVudGl0eS5nZXRfcHJvcChzZWxmLCAnbV9mRmxhZ3MnKSwgMSkgfj0gMCBhbmQgdmVjdG9yKGVudGl0eS5nZXRfcHJvcChzZWxmLCAnbV92ZWNWZWxvY2l0eScpKTpsZW5ndGgoKSA+IDIgYW5kICh1aS5nZXQocmVmZXJlbmNlLnNsb3dfbW90aW9uWzFdKSBhbmQgdWkuZ2V0KHJlZmVyZW5jZS5zbG93X21vdGlvblsyXSkpID09IGZhbHNlIHRoZW4gZnJlZXN0YW5kaW5nX3N0YXRlX2lkID0gMiBlbHNlaWYgYml0LmJhbmQoZW50aXR5LmdldF9wcm9wKHNlbGYsICdtX2ZGbGFncycpLCAxKSB+PSAwIGFuZCB2ZWN0b3IoZW50aXR5LmdldF9wcm9wKHNlbGYsICdtX3ZlY1ZlbG9jaXR5JykpOmxlbmd0aCgpIDwgMiB0aGVuIGZyZWVzdGFuZGluZ19zdGF0ZV9pZCA9IDEgZW5kCgogICAgdWkuc2V0KHNldHRpbmdzLm1hbnVhbF9mb3J3YXJkLCAnT24gaG90a2V5JykKICAgIHVpLnNldChzZXR0aW5ncy5tYW51YWxfcmlnaHQsICdPbiBob3RrZXknKQogICAgdWkuc2V0KHNldHRpbmdzLm1hbnVhbF9sZWZ0LCAnT24gaG90a2V5JykKCiAgICBjbWQuZm9yY2VfZGVmZW5zaXZlID0gdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS5kZWZlbnNpdmVfYW50aV9haW1ib3QpCglpZiB1aS5nZXQoZGVmZW5zaXZlMSkgdGhlbgoJY21kLmZvcmNlX2RlZmVuc2l2ZSA9IHVpLmdldChkZWZlbnNpdmUxKQoJZW5kCgogICAgdWkuc2V0KHJlZmVyZW5jZS5waXRjaFsxXSwgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS5waXRjaDEpKQogICAgdWkuc2V0KHJlZmVyZW5jZS5waXRjaFsyXSwgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS5waXRjaDIpKQogICAgdWkuc2V0KHJlZmVyZW5jZS55YXdfYmFzZSwgKGRpcmVjdGlvbiA9PSAxODAgb3IgZGlyZWN0aW9uID09IDkwIG9yIGRpcmVjdGlvbiA9PSAtOTApIGFuZCBhbnRpX2FpbV9vbl91c2UgPT0gZmFsc2UgYW5kICdMb2NhbCB2aWV3JyBvciB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhd19iYXNlKSkKICAgIHVpLnNldChyZWZlcmVuY2UueWF3WzFdLCAoZGlyZWN0aW9uID09IDE4MCBvciBkaXJlY3Rpb24gPT0gOTAgb3IgZGlyZWN0aW9uID09IC05MCkgYW5kIGFudGlfYWltX29uX3VzZSA9PSBmYWxzZSBhbmQgJzE4MCcgb3IgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS55YXcxKSkKCiAgICBpZiB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhdzEpIH49ICdPZmYnIGFuZCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhd19qaXR0ZXIxKSA9PSAnRGVsYXknIHRoZW4KICAgICAgICBpZiBpbnZlcnRlZCA+IDAgdGhlbgogICAgICAgICAgICBpZiB1aS5nZXQoc2V0dGluZ3MubWFudWFsX2xlZnQpIGFuZCBsYXN0X3ByZXNzICsgMC4yIDwgZ2xvYmFscy5yZWFsdGltZSgpIHRoZW4KICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IGRpcmVjdGlvbiA9PSAtOTAgYW5kIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0ueWF3X2ppdHRlcjJfbGVmdCkgb3IgLTkwCiAgICAgICAgICAgICAgICBsYXN0X3ByZXNzID0gZ2xvYmFscy5yZWFsdGltZSgpCiAgICAgICAgICAgIGVsc2VpZiB1aS5nZXQoc2V0dGluZ3MubWFudWFsX3JpZ2h0KSBhbmQgbGFzdF9wcmVzcyArIDAuMiA8IGdsb2JhbHMucmVhbHRpbWUoKSB0aGVuCiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24gPT0gOTAgYW5kIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0ueWF3X2ppdHRlcjJfbGVmdCkgb3IgOTAKCiAgICAgICAgICAgICAgICBsYXN0X3ByZXNzID0gZ2xvYmFscy5yZWFsdGltZSgpCiAgICAgICAgICAgIGVsc2VpZiB1aS5nZXQoc2V0dGluZ3MubWFudWFsX2ZvcndhcmQpIGFuZCBsYXN0X3ByZXNzICsgMC4yIDwgZ2xvYmFscy5yZWFsdGltZSgpIHRoZW4KICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IGRpcmVjdGlvbiA9PSAxODAgYW5kIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0ueWF3X2ppdHRlcjJfbGVmdCkgb3IgMTgwCgogICAgICAgICAgICAgICAgbGFzdF9wcmVzcyA9IGdsb2JhbHMucmVhbHRpbWUoKQogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlCiAgICAgICAgICAgIGlmIHVpLmdldChzZXR0aW5ncy5tYW51YWxfbGVmdCkgYW5kIGxhc3RfcHJlc3MgKyAwLjIgPCBnbG9iYWxzLnJlYWx0aW1lKCkgdGhlbgogICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gZGlyZWN0aW9uID09IC05MCBhbmQgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS55YXdfaml0dGVyMl9yaWdodCkgb3IgLTkwCiAgICAgICAgICAgICAgICBsYXN0X3ByZXNzID0gZ2xvYmFscy5yZWFsdGltZSgpCiAgICAgICAgICAgIGVsc2VpZiB1aS5nZXQoc2V0dGluZ3MubWFudWFsX3JpZ2h0KSBhbmQgbGFzdF9wcmVzcyArIDAuMiA8IGdsb2JhbHMucmVhbHRpbWUoKSB0aGVuCiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24gPT0gOTAgYW5kIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0ueWF3X2ppdHRlcjJfcmlnaHQpIG9yIDkwCiAgICAgICAgICAgICAgICBsYXN0X3ByZXNzID0gZ2xvYmFscy5yZWFsdGltZSgpCiAgICAgICAgICAgIGVsc2VpZiB1aS5nZXQoc2V0dGluZ3MubWFudWFsX2ZvcndhcmQpIGFuZCBsYXN0X3ByZXNzICsgMC4yIDwgZ2xvYmFscy5yZWFsdGltZSgpIHRoZW4KICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IGRpcmVjdGlvbiA9PSAxODAgYW5kIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0ueWF3X2ppdHRlcjJfcmlnaHQpIG9yIDE4MAoKICAgICAgICAgICAgICAgIGxhc3RfcHJlc3MgPSBnbG9iYWxzLnJlYWx0aW1lKCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbHNlCiAgICAgICAgaWYgaW52ZXJ0ZWQgPiAwIHRoZW4KICAgICAgICAgICAgaWYgdWkuZ2V0KHNldHRpbmdzLm1hbnVhbF9sZWZ0KSBhbmQgbGFzdF9wcmVzcyArIDAuMiA8IGdsb2JhbHMucmVhbHRpbWUoKSB0aGVuCiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24gPT0gLTkwIGFuZCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhdzJfbGVmdCkgb3IgLTkwCgogICAgICAgICAgICAgICAgbGFzdF9wcmVzcyA9IGdsb2JhbHMucmVhbHRpbWUoKQogICAgICAgICAgICBlbHNlaWYgdWkuZ2V0KHNldHRpbmdzLm1hbnVhbF9yaWdodCkgYW5kIGxhc3RfcHJlc3MgKyAwLjIgPCBnbG9iYWxzLnJlYWx0aW1lKCkgdGhlbgogICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gZGlyZWN0aW9uID09IDkwIGFuZCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhdzJfbGVmdCkgb3IgOTAKCiAgICAgICAgICAgICAgICBsYXN0X3ByZXNzID0gZ2xvYmFscy5yZWFsdGltZSgpCiAgICAgICAgICAgIGVsc2VpZiB1aS5nZXQoc2V0dGluZ3MubWFudWFsX2ZvcndhcmQpIGFuZCBsYXN0X3ByZXNzICsgMC4yIDwgZ2xvYmFscy5yZWFsdGltZSgpIHRoZW4KICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IGRpcmVjdGlvbiA9PSAxODAgYW5kIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0ueWF3Ml9sZWZ0KSBvciAxODAKCiAgICAgICAgICAgICAgICBsYXN0X3ByZXNzID0gZ2xvYmFscy5yZWFsdGltZSgpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2UKICAgICAgICAgICAgaWYgdWkuZ2V0KHNldHRpbmdzLm1hbnVhbF9sZWZ0KSBhbmQgbGFzdF9wcmVzcyArIDAuMiA8IGdsb2JhbHMucmVhbHRpbWUoKSB0aGVuCiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24gPT0gLTkwIGFuZCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhdzJfcmlnaHQpIG9yIC05MAoKICAgICAgICAgICAgICAgIGxhc3RfcHJlc3MgPSBnbG9iYWxzLnJlYWx0aW1lKCkKICAgICAgICAgICAgZWxzZWlmIHVpLmdldChzZXR0aW5ncy5tYW51YWxfcmlnaHQpIGFuZCBsYXN0X3ByZXNzICsgMC4yIDwgZ2xvYmFscy5yZWFsdGltZSgpIHRoZW4KICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IGRpcmVjdGlvbiA9PSA5MCBhbmQgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS55YXcyX3JpZ2h0KSBvciA5MAoKICAgICAgICAgICAgICAgIGxhc3RfcHJlc3MgPSBnbG9iYWxzLnJlYWx0aW1lKCkKICAgICAgICAgICAgZWxzZWlmIHVpLmdldChzZXR0aW5ncy5tYW51YWxfZm9yd2FyZCkgYW5kIGxhc3RfcHJlc3MgKyAwLjIgPCBnbG9iYWxzLnJlYWx0aW1lKCkgdGhlbgogICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gZGlyZWN0aW9uID09IDE4MCBhbmQgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS55YXcyX3JpZ2h0KSBvciAxODAKCiAgICAgICAgICAgICAgICBsYXN0X3ByZXNzID0gZ2xvYmFscy5yZWFsdGltZSgpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCgogICAgaWYgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS55YXcxKSB+PSAnT2ZmJyBhbmQgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS55YXdfaml0dGVyMSkgPT0gJ0RlbGF5JyB0aGVuCiAgICAgICAgaWYgbWF0aC5yYW5kb20oMCwgMSkgfj0gMCB0aGVuCiAgICAgICAgICAgIHlhd19qaXR0ZXIyX2xlZnQgPSB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhd19qaXR0ZXIyX2xlZnQpIC0gbWF0aC5yYW5kb20oMCwgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS55YXdfaml0dGVyMl9yYW5kb21pemUpKQogICAgICAgICAgICB5YXdfaml0dGVyMl9yaWdodCA9IHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0ueWF3X2ppdHRlcjJfcmlnaHQpIC0gbWF0aC5yYW5kb20oMCwgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS55YXdfaml0dGVyMl9yYW5kb21pemUpKQogICAgICAgIGVsc2UKICAgICAgICAgICAgeWF3X2ppdHRlcjJfbGVmdCA9IHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0ueWF3X2ppdHRlcjJfbGVmdCkgKyBtYXRoLnJhbmRvbSgwLCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhd19qaXR0ZXIyX3JhbmRvbWl6ZSkpCiAgICAgICAgICAgIHlhd19qaXR0ZXIyX3JpZ2h0ID0gdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS55YXdfaml0dGVyMl9yaWdodCkgKyBtYXRoLnJhbmRvbSgwLCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhd19qaXR0ZXIyX3JhbmRvbWl6ZSkpCiAgICAgICAgZW5kCgogICAgICAgIGlmIGludmVydGVkID4gMCB0aGVuCiAgICAgICAgICAgIGlmIHlhd19qaXR0ZXIyX2xlZnQgPT0gMTgwIHRoZW4geWF3X2ppdHRlcjJfbGVmdCA9IC0xODAgZWxzZWlmIHlhd19qaXR0ZXIyX2xlZnQgPT0gOTAgdGhlbiB5YXdfaml0dGVyMl9sZWZ0ID0gODkgZWxzZWlmIHlhd19qaXR0ZXIyX2xlZnQgPT0gLTkwIHRoZW4geWF3X2ppdHRlcjJfbGVmdCA9IC04OSBlbmQKCiAgICAgICAgICAgIGlmIG5vdCAoZGlyZWN0aW9uID09IDE4MCBvciBkaXJlY3Rpb24gPT0gOTAgb3IgZGlyZWN0aW9uID09IC05MCkgdGhlbiBkaXJlY3Rpb24gPSB5YXdfaml0dGVyMl9sZWZ0IGVuZAogICAgICAgIGVsc2UKICAgICAgICAgICAgaWYgeWF3X2ppdHRlcjJfcmlnaHQgPT0gMTgwIHRoZW4geWF3X2ppdHRlcjJfcmlnaHQgPSAtMTgwIGVsc2VpZiB5YXdfaml0dGVyMl9yaWdodCA9PSA5MCB0aGVuIHlhd19qaXR0ZXIyX3JpZ2h0ID0gODkgZWxzZWlmIHlhd19qaXR0ZXIyX3JpZ2h0ID09IC05MCB0aGVuIHlhd19qaXR0ZXIyX3JpZ2h0ID0gLTg5IGVuZAoKICAgICAgICAgICAgaWYgbm90IChkaXJlY3Rpb24gPT0gMTgwIG9yIGRpcmVjdGlvbiA9PSA5MCBvciBkaXJlY3Rpb24gPT0gLTkwKSB0aGVuIGRpcmVjdGlvbiA9IHlhd19qaXR0ZXIyX3JpZ2h0IGVuZAogICAgICAgIGVuZAogICAgZWxzZQogICAgICAgIGlmIGludmVydGVkID4gMCB0aGVuCiAgICAgICAgICAgIGlmIG1hdGgucmFuZG9tKDAsIDEpIH49IDAgdGhlbiB5YXcyX2xlZnQgPSB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhdzJfbGVmdCkgLSBtYXRoLnJhbmRvbSgwLCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhdzJfcmFuZG9taXplKSkgZWxzZSB5YXcyX2xlZnQgPSB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhdzJfbGVmdCkgKyBtYXRoLnJhbmRvbSgwLCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhdzJfcmFuZG9taXplKSkgZW5kCgogICAgICAgICAgICBpZiB5YXcyX2xlZnQgPT0gMTgwIHRoZW4geWF3Ml9sZWZ0ID0gLTE4MCBlbHNlaWYgeWF3Ml9sZWZ0ID09IDkwIHRoZW4geWF3Ml9sZWZ0ID0gODkgZWxzZWlmIHlhdzJfbGVmdCA9PSAtOTAgdGhlbiB5YXcyX2xlZnQgPSAtODkgZW5kCgogICAgICAgICAgICBpZiBub3QgKGRpcmVjdGlvbiA9PSA5MCBvciBkaXJlY3Rpb24gPT0gLTkwIG9yIGRpcmVjdGlvbiA9PSAxODApIHRoZW4gZGlyZWN0aW9uID0geWF3Ml9sZWZ0IGVuZAogICAgICAgIGVsc2UKICAgICAgICAgICAgaWYgbWF0aC5yYW5kb20oMCwgMSkgfj0gMCB0aGVuIHlhdzJfcmlnaHQgPSB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhdzJfcmlnaHQpIC0gbWF0aC5yYW5kb20oMCwgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS55YXcyX3JhbmRvbWl6ZSkpIGVsc2UgeWF3Ml9yaWdodCA9IHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0ueWF3Ml9yaWdodCkgKyBtYXRoLnJhbmRvbSgwLCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhdzJfcmFuZG9taXplKSkgZW5kCgogICAgICAgICAgICBpZiB5YXcyX3JpZ2h0ID09IDE4MCB0aGVuIHlhdzJfcmlnaHQgPSAtMTgwIGVsc2VpZiB5YXcyX3JpZ2h0ID09IDkwIHRoZW4geWF3Ml9yaWdodCA9IDg5IGVsc2VpZiB5YXcyX3JpZ2h0ID09IC05MCB0aGVuIHlhdzJfcmlnaHQgPSAtODkgZW5kCgogICAgICAgICAgICBpZiBub3QgKGRpcmVjdGlvbiA9PSA5MCBvciBkaXJlY3Rpb24gPT0gLTkwIG9yIGRpcmVjdGlvbiA9PSAxODApIHRoZW4gZGlyZWN0aW9uID0geWF3Ml9yaWdodCBlbmQKICAgICAgICBlbmQKICAgIGVuZAoKICAgIGlmIGFudGlfYWltX29uX3VzZSA9PSB0cnVlIHRoZW4KICAgICAgICBpZiB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhdzEpIH49ICdPZmYnIGFuZCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhd19qaXR0ZXIxKSA9PSAnRGVsYXknIHRoZW4KICAgICAgICAgICAgaWYgaW52ZXJ0ZWQgPiAwIHRoZW4KICAgICAgICAgICAgICAgIGlmIG1hdGgucmFuZG9tKDAsIDEpIH49IDAgdGhlbgogICAgICAgICAgICAgICAgICAgIGFudGlfYWltX29uX3VzZV9kaXJlY3Rpb24gPSB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhd19qaXR0ZXIyX2xlZnQpIC0gbWF0aC5yYW5kb20oMCwgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS55YXdfaml0dGVyMl9yYW5kb21pemUpKQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGFudGlfYWltX29uX3VzZV9kaXJlY3Rpb24gPSB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhd19qaXR0ZXIyX2xlZnQpICsgbWF0aC5yYW5kb20oMCwgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS55YXdfaml0dGVyMl9yYW5kb21pemUpKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGlmIG1hdGgucmFuZG9tKDAsIDEpIH49IDAgdGhlbgogICAgICAgICAgICAgICAgICAgIGFudGlfYWltX29uX3VzZV9kaXJlY3Rpb24gPSB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhd19qaXR0ZXIyX3JpZ2h0KSAtIG1hdGgucmFuZG9tKDAsIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0ueWF3X2ppdHRlcjJfcmFuZG9taXplKSkKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBhbnRpX2FpbV9vbl91c2VfZGlyZWN0aW9uID0gdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS55YXdfaml0dGVyMl9yaWdodCkgKyBtYXRoLnJhbmRvbSgwLCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhd19qaXR0ZXIyX3JhbmRvbWl6ZSkpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZQogICAgICAgICAgICBpZiBpbnZlcnRlZCA+IDAgdGhlbgogICAgICAgICAgICAgICAgaWYgbWF0aC5yYW5kb20oMCwgMSkgfj0gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgYW50aV9haW1fb25fdXNlX2RpcmVjdGlvbiA9IHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0ueWF3Ml9sZWZ0KSAtIG1hdGgucmFuZG9tKDAsIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0ueWF3Ml9yYW5kb21pemUpKQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGFudGlfYWltX29uX3VzZV9kaXJlY3Rpb24gPSB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhdzJfbGVmdCkgKyBtYXRoLnJhbmRvbSgwLCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhdzJfcmFuZG9taXplKSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBpZiBtYXRoLnJhbmRvbSgwLCAxKSB+PSAwIHRoZW4KICAgICAgICAgICAgICAgICAgICBhbnRpX2FpbV9vbl91c2VfZGlyZWN0aW9uID0gdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS55YXcyX3JpZ2h0KSAtIG1hdGgucmFuZG9tKDAsIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0ueWF3Ml9yYW5kb21pemUpKQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGFudGlfYWltX29uX3VzZV9kaXJlY3Rpb24gPSB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhdzJfcmlnaHQpICsgbWF0aC5yYW5kb20oMCwgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS55YXcyX3JhbmRvbWl6ZSkpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBpZiBkaXJlY3Rpb24gPiAxODAgb3IgZGlyZWN0aW9uIDwgLTE4MCB0aGVuIGRpcmVjdGlvbiA9IC0xODAgZW5kCiAgICBpZiBhbnRpX2FpbV9vbl91c2VfZGlyZWN0aW9uID4gMTgwIG9yIGFudGlfYWltX29uX3VzZV9kaXJlY3Rpb24gPCAtMTgwIHRoZW4gYW50aV9haW1fb25fdXNlX2RpcmVjdGlvbiA9IC0xODAgZW5kCgogICAgdWkuc2V0KHJlZmVyZW5jZS55YXdbMl0sIGFudGlfYWltX29uX3VzZSA9PSBmYWxzZSBhbmQgZGlyZWN0aW9uIG9yIGFudGlfYWltX29uX3VzZV9kaXJlY3Rpb24pCiAgICB1aS5zZXQocmVmZXJlbmNlLnlhd19qaXR0ZXJbMV0sICgoZGlyZWN0aW9uID09IDE4MCBvciBkaXJlY3Rpb24gPT0gOTAgb3IgZGlyZWN0aW9uID09IC05MCkgYW5kIGNvbnRhaW5zKHNldHRpbmdzLnR3ZWFrcywgJ09mZiBqaXR0ZXIgb24gbWFudWFsJykgYW5kIGFudGlfYWltX29uX3VzZSA9PSBmYWxzZSBvciB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhd19qaXR0ZXIxKSA9PSAnRGVsYXknIG9yIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0ueWF3MSkgPT0gJ09mZicpIGFuZCAnT2ZmJyBvciB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhd19qaXR0ZXIxKSkKCiAgICBpZiBpbnZlcnRlZCA+IDAgdGhlbgogICAgICAgIGlmIG1hdGgucmFuZG9tKDAsIDEpIH49IDAgdGhlbiB5YXdfaml0dGVyMl9sZWZ0ID0gdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS55YXdfaml0dGVyMl9sZWZ0KSAtIG1hdGgucmFuZG9tKDAsIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0ueWF3X2ppdHRlcjJfcmFuZG9taXplKSkgZWxzZSB5YXdfaml0dGVyMl9sZWZ0ID0gdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS55YXdfaml0dGVyMl9sZWZ0KSArIG1hdGgucmFuZG9tKDAsIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0ueWF3X2ppdHRlcjJfcmFuZG9taXplKSkgZW5kCgogICAgICAgIGlmIHlhd19qaXR0ZXIyX2xlZnQgPiAxODAgb3IgeWF3X2ppdHRlcjJfbGVmdCA8IC0xODAgdGhlbiB5YXdfaml0dGVyMl9sZWZ0ID0gLTE4MCBlbmQKCiAgICAgICAgdWkuc2V0KHJlZmVyZW5jZS55YXdfaml0dGVyWzJdLCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhdzEpIH49ICdPZmYnIGFuZCB5YXdfaml0dGVyMl9sZWZ0IG9yIDApCiAgICBlbHNlCiAgICAgICAgaWYgbWF0aC5yYW5kb20oMCwgMSkgfj0gMCB0aGVuIHlhd19qaXR0ZXIyX3JpZ2h0ID0gdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS55YXdfaml0dGVyMl9yaWdodCkgLSBtYXRoLnJhbmRvbSgwLCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhd19qaXR0ZXIyX3JhbmRvbWl6ZSkpIGVsc2UgeWF3X2ppdHRlcjJfcmlnaHQgPSB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhd19qaXR0ZXIyX3JpZ2h0KSArIG1hdGgucmFuZG9tKDAsIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0ueWF3X2ppdHRlcjJfcmFuZG9taXplKSkgZW5kCgogICAgICAgIGlmIHlhd19qaXR0ZXIyX3JpZ2h0ID4gMTgwIG9yIHlhd19qaXR0ZXIyX3JpZ2h0IDwgLTE4MCB0aGVuIHlhd19qaXR0ZXIyX3JpZ2h0ID0gLTE4MCBlbmQKCiAgICAgICAgdWkuc2V0KHJlZmVyZW5jZS55YXdfaml0dGVyWzJdLCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLnlhdzEpIH49ICdPZmYnIGFuZCB5YXdfaml0dGVyMl9yaWdodCBvciAwKQogICAgZW5kCgogICAgaWYgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS55YXcxKSB+PSAnT2ZmJyBhbmQgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS55YXdfaml0dGVyMSkgPT0gJ0RlbGF5JyB0aGVuCiAgICAgICAgaWYgKHVpLmdldChyZWZlcmVuY2UuZG91YmxlX3RhcFsxXSkgYW5kIHVpLmdldChyZWZlcmVuY2UuZG91YmxlX3RhcFsyXSkpID09IHRydWUgb3IgKHVpLmdldChyZWZlcmVuY2Uub25fc2hvdF9hbnRpX2FpbVsxXSkgYW5kIHVpLmdldChyZWZlcmVuY2Uub25fc2hvdF9hbnRpX2FpbVsyXSkpID09IHRydWUgdGhlbgogICAgICAgICAgICB1aS5zZXQocmVmZXJlbmNlLmJvZHlfeWF3WzFdLCAoZGlyZWN0aW9uID09IDE4MCBvciBkaXJlY3Rpb24gPT0gOTAgb3IgZGlyZWN0aW9uID09IC05MCkgYW5kIGNvbnRhaW5zKHNldHRpbmdzLnR3ZWFrcywgJ09mZiBqaXR0ZXIgb24gbWFudWFsJykgYW5kIGFudGlfYWltX29uX3VzZSA9PSBmYWxzZSBhbmQgJ09wcG9zaXRlJyBvciAnU3RhdGljJykKICAgICAgICBlbHNlCiAgICAgICAgICAgIHVpLnNldChyZWZlcmVuY2UuYm9keV95YXdbMV0sIChkaXJlY3Rpb24gPT0gMTgwIG9yIGRpcmVjdGlvbiA9PSA5MCBvciBkaXJlY3Rpb24gPT0gLTkwKSBhbmQgY29udGFpbnMoc2V0dGluZ3MudHdlYWtzLCAnT2ZmIGppdHRlciBvbiBtYW51YWwnKSBhbmQgYW50aV9haW1fb25fdXNlID09IGZhbHNlIGFuZCAnT3Bwb3NpdGUnIG9yICdKaXR0ZXInKQogICAgICAgIGVuZAogICAgZWxzZQogICAgICAgIHVpLnNldChyZWZlcmVuY2UuYm9keV95YXdbMV0sIChkaXJlY3Rpb24gPT0gMTgwIG9yIGRpcmVjdGlvbiA9PSA5MCBvciBkaXJlY3Rpb24gPT0gLTkwKSBhbmQgY29udGFpbnMoc2V0dGluZ3MudHdlYWtzLCAnT2ZmIGppdHRlciBvbiBtYW51YWwnKSBhbmQgYW50aV9haW1fb25fdXNlID09IGZhbHNlIGFuZCAnT3Bwb3NpdGUnIG9yIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0uYm9keV95YXcxKSkKICAgIGVuZAoKICAgIGlmIGNtZC5jb21tYW5kX251bWJlciAlIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0ueWF3X2ppdHRlcjJfZGVsYXkpICsgMSA+IHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0ueWF3X2ppdHRlcjJfZGVsYXkpIC0gMSB0aGVuCiAgICAgICAgZGVsYXllZF9qaXR0ZXIgPSBub3QgZGVsYXllZF9qaXR0ZXIKICAgIGVuZAoKICAgIGlmIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0ueWF3MSkgfj0gJ09mZicgYW5kIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0ueWF3X2ppdHRlcjEpID09ICdEZWxheScgdGhlbgogICAgICAgIGlmICh1aS5nZXQocmVmZXJlbmNlLmRvdWJsZV90YXBbMV0pIGFuZCB1aS5nZXQocmVmZXJlbmNlLmRvdWJsZV90YXBbMl0pKSA9PSB0cnVlIG9yICh1aS5nZXQocmVmZXJlbmNlLm9uX3Nob3RfYW50aV9haW1bMV0pIGFuZCB1aS5nZXQocmVmZXJlbmNlLm9uX3Nob3RfYW50aV9haW1bMl0pKSA9PSB0cnVlIHRoZW4KICAgICAgICAgICAgdWkuc2V0KHJlZmVyZW5jZS5ib2R5X3lhd1syXSwgZGVsYXllZF9qaXR0ZXIgYW5kIC05MCBvciA5MCkKICAgICAgICBlbHNlCiAgICAgICAgICAgIHVpLnNldChyZWZlcmVuY2UuYm9keV95YXdbMl0sIC00MCkKICAgICAgICBlbmQKICAgIGVsc2UKICAgICAgICB1aS5zZXQocmVmZXJlbmNlLmJvZHlfeWF3WzJdLCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLmJvZHlfeWF3MikpCiAgICBlbmQKCiAgICB1aS5zZXQocmVmZXJlbmNlLmZyZWVzdGFuZGluZ19ib2R5X3lhdywgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS55YXcxKSB+PSAnT2ZmJyBhbmQgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS55YXdfaml0dGVyMSkgPT0gJ0RlbGF5JyBhbmQgZmFsc2Ugb3IgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS5mcmVlc3RhbmRpbmdfYm9keV95YXcpKQoKICAgIC0tZGVmZW5zaXZlX2FhCiAgICBpZiB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLmRlZmVuc2l2ZV9hbnRpX2FpbWJvdCkgYW5kIGlzX2RlZmVuc2l2ZV9hY3RpdmUgYW5kICgodWkuZ2V0KHJlZmVyZW5jZS5kb3VibGVfdGFwWzFdKSBhbmQgdWkuZ2V0KHJlZmVyZW5jZS5kb3VibGVfdGFwWzJdKSkgb3IgKHVpLmdldChyZWZlcmVuY2Uub25fc2hvdF9hbnRpX2FpbVsxXSkgYW5kIHVpLmdldChyZWZlcmVuY2Uub25fc2hvdF9hbnRpX2FpbVsyXSkpKSBhbmQgbm90IChkaXJlY3Rpb24gPT0gMTgwIG9yIGRpcmVjdGlvbiA9PSA5MCBvciBkaXJlY3Rpb24gPT0gLTkwKSB0aGVuCiAgICAgICAgdWkuc2V0KHJlZmVyZW5jZS5waXRjaFsxXSwgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS5kZWZlbnNpdmVfcGl0Y2gxKSkKCiAgICAgICAgaWYgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS5kZWZlbnNpdmVfcGl0Y2gxKSA9PSAnUmFuZG9tJyB0aGVuCiAgICAgICAgICAgIHVpLnNldChyZWZlcmVuY2UucGl0Y2hbMV0sICdDdXN0b20nKQogICAgICAgICAgICB1aS5zZXQocmVmZXJlbmNlLnBpdGNoWzJdLCBtYXRoLnJhbmRvbSh1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLmRlZmVuc2l2ZV9waXRjaDIpLCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLmRlZmVuc2l2ZV9waXRjaDMpKSkKICAgICAgICBlbHNlCiAgICAgICAgICAgIHVpLnNldChyZWZlcmVuY2UucGl0Y2hbMl0sIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0uZGVmZW5zaXZlX3BpdGNoMikpCiAgICAgICAgZW5kCgogICAgICAgIHVpLnNldChyZWZlcmVuY2UueWF3X2ppdHRlclsxXSwgJ09mZicpCiAgICAgICAgdWkuc2V0KHJlZmVyZW5jZS5ib2R5X3lhd1sxXSwgJ09wcG9zaXRlJykKCiAgICAgICAgaWYgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS5kZWZlbnNpdmVfeWF3MSkgPT0gJzE4MCcgdGhlbgogICAgICAgICAgICB1aS5zZXQocmVmZXJlbmNlLnlhd1sxXSwgJzE4MCcpCgogICAgICAgICAgICB1aS5zZXQocmVmZXJlbmNlLnlhd1syXSwgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS5kZWZlbnNpdmVfeWF3MikpCiAgICAgICAgZWxzZWlmIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0uZGVmZW5zaXZlX3lhdzEpID09ICdTcGluJyB0aGVuCiAgICAgICAgICAgIHVpLnNldChyZWZlcmVuY2UueWF3WzFdLCAnU3BpbicpCgogICAgICAgICAgICB1aS5zZXQocmVmZXJlbmNlLnlhd1syXSwgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS5kZWZlbnNpdmVfeWF3MikpCiAgICAgICAgZWxzZWlmIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tzdGF0ZV9pZF0uZGVmZW5zaXZlX3lhdzEpID09ICcxODAgWicgdGhlbgogICAgICAgICAgICB1aS5zZXQocmVmZXJlbmNlLnlhd1sxXSwgJzE4MCBaJykKCiAgICAgICAgICAgIHVpLnNldChyZWZlcmVuY2UueWF3WzJdLCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3Nbc3RhdGVfaWRdLmRlZmVuc2l2ZV95YXcyKSkKICAgICAgICBlbHNlaWYgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS5kZWZlbnNpdmVfeWF3MSkgPT0gJ1NpZGV3YXlzJyB0aGVuCiAgICAgICAgICAgIHVpLnNldChyZWZlcmVuY2UueWF3WzFdLCAnMTgwJykKCiAgICAgICAgICAgIGlmIGNtZC5jb21tYW5kX251bWJlciAlIDQgPj0gMiB0aGVuCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmZXJlbmNlLnlhd1syXSwgbWF0aC5yYW5kb20oODUsIDEwMCkpCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHVpLnNldChyZWZlcmVuY2UueWF3WzJdLCBtYXRoLnJhbmRvbSgtMTAwLCAtODUpKQogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlaWYgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW3N0YXRlX2lkXS5kZWZlbnNpdmVfeWF3MSkgPT0gJ1JhbmRvbScgdGhlbgogICAgICAgICAgICB1aS5zZXQocmVmZXJlbmNlLnlhd1sxXSwgJzE4MCcpCgogICAgICAgICAgICB1aS5zZXQocmVmZXJlbmNlLnlhd1syXSwgbWF0aC5yYW5kb20oLTE4MCwgMTgwKSkKICAgICAgICBlbmQKICAgIGVuZAoKICAgIGlmIHVpLmdldChzZXR0aW5ncy5zYWZlX2hlYWRfaW5fYWlyKSBhbmQgKGNtZC5pbl9qdW1wID09IDEgb3IgYml0LmJhbmQoZW50aXR5LmdldF9wcm9wKHNlbGYsICdtX2ZGbGFncycpLCAxKSA9PSAwKSBhbmQgZW50aXR5LmdldF9wcm9wKHNlbGYsICdtX2ZsRHVja0Ftb3VudCcpID4gMC44IGFuZCAoZW50aXR5LmdldF9jbGFzc25hbWUoZW50aXR5LmdldF9wbGF5ZXJfd2VhcG9uKHNlbGYpKSA9PSAnQ0tuaWZlJyBvciBlbnRpdHkuZ2V0X2NsYXNzbmFtZShlbnRpdHkuZ2V0X3BsYXllcl93ZWFwb24oc2VsZikpID09ICdDV2VhcG9uVGFzZXInKSBhbmQgYW50aV9haW1fb25fdXNlID09IGZhbHNlIGFuZCBub3QgKGRpcmVjdGlvbiA9PSAxODAgb3IgZGlyZWN0aW9uID09IDkwIG9yIGRpcmVjdGlvbiA9PSAtOTApIHRoZW4KICAgICAgICB1aS5zZXQocmVmZXJlbmNlLnBpdGNoWzFdLCAnRG93bicpCiAgICAgICAgdWkuc2V0KHJlZmVyZW5jZS55YXdbMV0sICcxODAnKQogICAgICAgIHVpLnNldChyZWZlcmVuY2UueWF3WzJdLCAwKQogICAgICAgIHVpLnNldChyZWZlcmVuY2UueWF3X2ppdHRlclsxXSwgJ09mZicpCiAgICAgICAgdWkuc2V0KHJlZmVyZW5jZS5ib2R5X3lhd1sxXSwgJ09mZicpCiAgICBlbmQKCiAgICBpZiB1aS5nZXQoc2V0dGluZ3MuZnJlZXN0YW5kaW5nKSBhbmQgKChjb250YWlucyhzZXR0aW5ncy5mcmVlc3RhbmRpbmdfY29uZGl0aW9ucywgJ1N0YW5kaW5nJykgYW5kIGZyZWVzdGFuZGluZ19zdGF0ZV9pZCA9PSAxKSBvciAoY29udGFpbnMoc2V0dGluZ3MuZnJlZXN0YW5kaW5nX2NvbmRpdGlvbnMsICdNb3ZpbmcnKSBhbmQgZnJlZXN0YW5kaW5nX3N0YXRlX2lkID09IDIpIG9yIChjb250YWlucyhzZXR0aW5ncy5mcmVlc3RhbmRpbmdfY29uZGl0aW9ucywgJ1Nsb3cgbW90aW9uJykgYW5kIGZyZWVzdGFuZGluZ19zdGF0ZV9pZCA9PSAzKSBvciAoY29udGFpbnMoc2V0dGluZ3MuZnJlZXN0YW5kaW5nX2NvbmRpdGlvbnMsICdDcm91Y2hpbmcnKSBhbmQgZnJlZXN0YW5kaW5nX3N0YXRlX2lkID09IDQpIG9yIChjb250YWlucyhzZXR0aW5ncy5mcmVlc3RhbmRpbmdfY29uZGl0aW9ucywgJ0luIGFpcicpIGFuZCBmcmVlc3RhbmRpbmdfc3RhdGVfaWQgPT0gNSkpIGFuZCBhbnRpX2FpbV9vbl91c2UgPT0gZmFsc2UgYW5kIG5vdCAoZGlyZWN0aW9uID09IDE4MCBvciBkaXJlY3Rpb24gPT0gOTAgb3IgZGlyZWN0aW9uID09IC05MCkgdGhlbgogICAgICAgIHVpLnNldChyZWZlcmVuY2UuZnJlZXN0YW5kaW5nWzFdLCB0cnVlKQogICAgICAgIHVpLnNldChyZWZlcmVuY2UuZnJlZXN0YW5kaW5nWzJdLCAnQWx3YXlzIG9uJykKCiAgICAgICAgaWYgY29udGFpbnMoc2V0dGluZ3MudHdlYWtzLCAnT2ZmIGppdHRlciB3aGlsZSBmcmVlc3RhbmRpbmcnKSB0aGVuCiAgICAgICAgICAgIHVpLnNldChyZWZlcmVuY2UueWF3WzFdLCAnMTgwJykKICAgICAgICAgICAgdWkuc2V0KHJlZmVyZW5jZS55YXdbMl0sIDApCiAgICAgICAgICAgIHVpLnNldChyZWZlcmVuY2UueWF3X2ppdHRlclsxXSwgJ09mZicpCiAgICAgICAgICAgIHVpLnNldChyZWZlcmVuY2UuYm9keV95YXdbMV0sICdPcHBvc2l0ZScpCiAgICAgICAgICAgIHVpLnNldChyZWZlcmVuY2UuYm9keV95YXdbMl0sIDApCiAgICAgICAgICAgIHVpLnNldChyZWZlcmVuY2UuZnJlZXN0YW5kaW5nX2JvZHlfeWF3LCB0cnVlKQogICAgICAgIGVuZAogICAgZWxzZQogICAgICAgIHVpLnNldChyZWZlcmVuY2UuZnJlZXN0YW5kaW5nWzFdLCBmYWxzZSkKICAgICAgICB1aS5zZXQocmVmZXJlbmNlLmZyZWVzdGFuZGluZ1syXSwgJ09uIGhvdGtleScpCiAgICBlbmQKCiAgICBpZiB1aS5nZXQoc2V0dGluZ3MuYXZvaWRfYmFja3N0YWIpIGFuZCBhbnRpX2FpbV9vbl91c2UgPT0gZmFsc2UgYW5kIG5vdCAoZGlyZWN0aW9uID09IDE4MCBvciBkaXJlY3Rpb24gPT0gOTAgb3IgZGlyZWN0aW9uID09IC05MCkgdGhlbgogICAgICAgIGxvY2FsIHBsYXllcnMgPSBlbnRpdHkuZ2V0X3BsYXllcnModHJ1ZSkKCiAgICAgICAgaWYgcGxheWVycyB+PSBuaWwgdGhlbgogICAgICAgICAgICBmb3IgaSwgZW5lbXkgaW4gcGFpcnMocGxheWVycykgZG8KICAgICAgICAgICAgICAgIGZvciBoID0gMCwgMTggZG8KICAgICAgICAgICAgICAgICAgICBsb2NhbCBoZWFkX3gsIGhlYWRfeSwgaGVhZF96ID0gZW50aXR5LmhpdGJveF9wb3NpdGlvbihwbGF5ZXJzW2ldLCBoKQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHd4LCB3eSA9IHJlbmRlcmVyLndvcmxkX3RvX3NjcmVlbihoZWFkX3gsIGhlYWRfeSwgaGVhZF96KQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGZyYWN0aW9ucywgZW50aW5kZXhfaGl0ID0gY2xpZW50LnRyYWNlX2xpbmUoc2VsZiwgZXllX3gsIGV5ZV95LCBleWVfeiwgaGVhZF94LCBoZWFkX3ksIGhlYWRfeikKCiAgICAgICAgICAgICAgICAgICAgaWYgMjUwID49IHZlY3RvcihlbnRpdHkuZ2V0X3Byb3AoZW5lbXksICdtX3ZlY09yaWdpbicpKTpkaXN0KHZlY3RvcihlbnRpdHkuZ2V0X3Byb3Aoc2VsZiwgJ21fdmVjT3JpZ2luJykpKSBhbmQgZW50aXR5LmlzX2FsaXZlKGVuZW15KSBhbmQgZW50aXR5LmdldF9wbGF5ZXJfd2VhcG9uKGVuZW15KSB+PSBuaWwgYW5kIGVudGl0eS5nZXRfY2xhc3NuYW1lKGVudGl0eS5nZXRfcGxheWVyX3dlYXBvbihlbmVteSkpID09ICdDS25pZmUnIGFuZCAoZW50aW5kZXhfaGl0ID09IHBsYXllcnNbaV0gb3IgZnJhY3Rpb25zID09IDEpIGFuZCBub3QgZW50aXR5LmlzX2Rvcm1hbnQocGxheWVyc1tpXSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmZXJlbmNlLnlhd1sxXSwgJzE4MCcpCiAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZlcmVuY2UueWF3WzJdLCAtMTgwKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCkKCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soJ3BhaW50X3VpJywgZnVuY3Rpb24oKQogICAgaWYgZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSA9PSBuaWwgdGhlbiBjaGVrZWRfdGlja3MgPSAwIGVuZAoKICAgIGlmIHVpLmlzX21lbnVfb3BlbigpIHRoZW4KICAgICAgICB1aS5zZXRfdmlzaWJsZShyZWZlcmVuY2UuYWFfZW5hYmxlLCBmYWxzZSkKICAgICAgICB1aS5zZXRfdmlzaWJsZShyZWZlcmVuY2UucGl0Y2hbMV0sIGZhbHNlKQogICAgICAgIHVpLnNldF92aXNpYmxlKHJlZmVyZW5jZS5waXRjaFsyXSwgZmFsc2UpCiAgICAgICAgdWkuc2V0X3Zpc2libGUocmVmZXJlbmNlLnlhd19iYXNlLCBmYWxzZSkKICAgICAgICB1aS5zZXRfdmlzaWJsZShyZWZlcmVuY2UueWF3WzFdLCBmYWxzZSkKICAgICAgICB1aS5zZXRfdmlzaWJsZShyZWZlcmVuY2UueWF3WzJdLCBmYWxzZSkKICAgICAgICB1aS5zZXRfdmlzaWJsZShyZWZlcmVuY2UueWF3X2ppdHRlclsxXSwgZmFsc2UpCiAgICAgICAgdWkuc2V0X3Zpc2libGUocmVmZXJlbmNlLnlhd19qaXR0ZXJbMl0sIGZhbHNlKQogICAgICAgIHVpLnNldF92aXNpYmxlKHJlZmVyZW5jZS5ib2R5X3lhd1sxXSwgZmFsc2UpCiAgICAgICAgdWkuc2V0X3Zpc2libGUocmVmZXJlbmNlLmJvZHlfeWF3WzJdLCBmYWxzZSkKICAgICAgICB1aS5zZXRfdmlzaWJsZShyZWZlcmVuY2UuZnJlZXN0YW5kaW5nX2JvZHlfeWF3LCBmYWxzZSkKICAgICAgICB1aS5zZXRfdmlzaWJsZShyZWZlcmVuY2UuZWRnZV95YXcsIGZhbHNlKQogICAgICAgIHVpLnNldF92aXNpYmxlKHJlZmVyZW5jZS5mcmVlc3RhbmRpbmdbMV0sIGZhbHNlKQogICAgICAgIHVpLnNldF92aXNpYmxlKHJlZmVyZW5jZS5mcmVlc3RhbmRpbmdbMl0sIGZhbHNlKQogICAgICAgIHVpLnNldF92aXNpYmxlKHJlZmVyZW5jZS5yb2xsLCBmYWxzZSkKICAgICAgICB1aS5zZXRfdmlzaWJsZShjdXJyZW50X3N0YXRlX21lbnUsIHVpLmdldChjdXJyZW50X3RhYikgPT0gIkFudGktQWltIikKICAgICAgICB1aS5zZXRfdmlzaWJsZShzZXR0aW5ncy5hbnRpX2FpbV9zdGF0ZSwgdWkuZ2V0KGN1cnJlbnRfdGFiKSA9PSAnQW50aS1BaW0nIGFuZCB1aS5nZXQoY3VycmVudF9zdGF0ZV9tZW51KSA9PSAiYnVpbGRlciIpCiAgICAgICAgdWkuc2V0X3Zpc2libGUoc2V0dGluZ3MuYXZvaWRfYmFja3N0YWIsIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ0FudGktQWltJyBhbmQgdWkuZ2V0KGN1cnJlbnRfc3RhdGVfbWVudSkgPT0gIm90aGVyIikKICAgICAgICB1aS5zZXRfdmlzaWJsZShzZXR0aW5ncy5zYWZlX2hlYWRfaW5fYWlyLCB1aS5nZXQoY3VycmVudF90YWIpID09ICdBbnRpLUFpbScgYW5kIHVpLmdldChjdXJyZW50X3N0YXRlX21lbnUpID09ICJvdGhlciIpCgkJdWkuc2V0X3Zpc2libGUoZGVmZW5zaXZlMSwgdWkuZ2V0KGN1cnJlbnRfdGFiKSA9PSAnQW50aS1BaW0nIGFuZCB1aS5nZXQoY3VycmVudF9zdGF0ZV9tZW51KSA9PSAib3RoZXIiKQogICAgICAgIHVpLnNldF92aXNpYmxlKHNldHRpbmdzLm1hbnVhbF9mb3J3YXJkLCB1aS5nZXQoY3VycmVudF90YWIpID09ICdBbnRpLUFpbScgYW5kIHVpLmdldChjdXJyZW50X3N0YXRlX21lbnUpID09ICJrZXliaW5kcyIpCiAgICAgICAgdWkuc2V0X3Zpc2libGUoc2V0dGluZ3MubWFudWFsX3JpZ2h0LCB1aS5nZXQoY3VycmVudF90YWIpID09ICdBbnRpLUFpbScgYW5kIHVpLmdldChjdXJyZW50X3N0YXRlX21lbnUpID09ICJrZXliaW5kcyIpCiAgICAgICAgdWkuc2V0X3Zpc2libGUoc2V0dGluZ3MubWFudWFsX2xlZnQsIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ0FudGktQWltJyBhbmQgdWkuZ2V0KGN1cnJlbnRfc3RhdGVfbWVudSkgPT0gImtleWJpbmRzIikKICAgICAgICB1aS5zZXRfdmlzaWJsZShzZXR0aW5ncy5mcmVlc3RhbmRpbmcsIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ0FudGktQWltJyBhbmQgdWkuZ2V0KGN1cnJlbnRfc3RhdGVfbWVudSkgPT0gImtleWJpbmRzIikKICAgICAgICB1aS5zZXRfdmlzaWJsZShzZXR0aW5ncy53YXJtdXBfZGlzYWJsZXIsIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ0FudGktQWltJyBhbmQgdWkuZ2V0KGN1cnJlbnRfc3RhdGVfbWVudSkgPT0gIm90aGVyIikKICAgICAgICB1aS5zZXRfdmlzaWJsZShzZXR0aW5ncy5mcmVlc3RhbmRpbmdfY29uZGl0aW9ucywgdWkuZ2V0KGN1cnJlbnRfdGFiKSA9PSAnQW50aS1BaW0nIGFuZCB1aS5nZXQoY3VycmVudF9zdGF0ZV9tZW51KSA9PSAia2V5YmluZHMiKQogICAgICAgIHVpLnNldF92aXNpYmxlKHNldHRpbmdzLnR3ZWFrcywgdWkuZ2V0KGN1cnJlbnRfdGFiKSA9PSAnQW50aS1BaW0nIGFuZCB1aS5nZXQoY3VycmVudF9zdGF0ZV9tZW51KSA9PSAia2V5YmluZHMiKQogICAgICAgIHVpLnNldF92aXNpYmxlKG1hc3Rlcl9zd2l0Y2gsIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ1Zpc3VhbHMnKQogICAgICAgIHVpLnNldF92aXNpYmxlKGNvbnNvbGVfZmlsdGVyLCB1aS5nZXQoY3VycmVudF90YWIpID09ICdNaXNjJykKICAgICAgICB1aS5zZXRfdmlzaWJsZShhbmltYXRpb25zLCB1aS5nZXQoY3VycmVudF90YWIpID09ICdNaXNjJykKICAgICAgICB1aS5zZXRfdmlzaWJsZShhbmltYXRpb25zLCB1aS5nZXQoYW5pbWF0aW9uc0VuYWJsZWQpID09IHRydWUpCiAgICAgICAgdWkuc2V0X3Zpc2libGUoYW5pbWF0aW9uc0VuYWJsZWQsIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ01pc2MnKQogICAgICAgIHVpLnNldF92aXNpYmxlKGZhc3RsYWRkZXIsIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ01pc2MnKQogICAgICAgIHVpLnNldF92aXNpYmxlKGluZHMsIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ1Zpc3VhbHMnKQogICAgICAgIHVpLnNldF92aXNpYmxlKHB1c3RvMiwgdWkuZ2V0KGN1cnJlbnRfdGFiKSA9PSAnVmlzdWFscycpCiAgICAgICAgdWkuc2V0X3Zpc2libGUoY2xhblRhZywgdWkuZ2V0KGN1cnJlbnRfdGFiKSA9PSAnVmlzdWFscycpCiAgICAgICAgdWkuc2V0X3Zpc2libGUobWlzY18sIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ01pc2MnKQogICAgICAgIHVpLnNldF92aXNpYmxlKGxpbmUzLCB1aS5nZXQoY3VycmVudF90YWIpID09ICdNaXNjJykKCQl1aS5zZXRfdmlzaWJsZShkYW1hZ2VfaW5kLCB1aS5nZXQoY3VycmVudF90YWIpID09ICdWaXN1YWxzJykKCQl1aS5zZXRfdmlzaWJsZShtaW5kYW1hZ2VpbmQsIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ1Zpc3VhbHMnKQkKICAgICAgICB1aS5zZXRfdmlzaWJsZShpbmRjb2xvcnMsIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ1Zpc3VhbHMnKQoKCi0tIEZ1bmN0aW9uIHRvIHVwZGF0ZSB2aXNpYmlsaXR5IGJhc2VkIG9uIGN1cnJlbnQgdGFiIGFuZCBlbmFibGUgc3RhdGVzCi0tIEZ1bmN0aW9uIHRvIHVwZGF0ZSB2aXNpYmlsaXR5IGJhc2VkIG9uIGN1cnJlbnQgdGFiIGFuZCBlbmFibGUgc3RhdGVzCmxvY2FsIGZ1bmN0aW9uIHVwZGF0ZV92aXNpYmlsaXR5KCkKICAgIC0tIENoZWNrIGlmIHRoZSBjdXJyZW50IHRhYiBpcyAnVmlzdWFscycKICAgIGxvY2FsIGlzX3Zpc3VhbHNfdGFiID0gdWkuZ2V0KGN1cnJlbnRfdGFiKSA9PSAnVmlzdWFscycKICAgIGxvY2FsIGlzX21pc2NfdGFiID0gdWkuZ2V0KGN1cnJlbnRfdGFiKSA9PSAnTWlzYycKICAgIAogICAgLS0gU2V0IHRoZSB2aXNpYmlsaXR5IG9mIHdhdGVybWFya0VuYWJsZSwgdHJhc2hUYWxrLCBhbmQgYW5pbWF0aW9uc0VuYWJsZWQgYmFzZWQgb24gdGhlIGN1cnJlbnQgdGFiCiAgICB1aS5zZXRfdmlzaWJsZSh3YXRlcm1hcmtFbmFibGUsIGlzX3Zpc3VhbHNfdGFiKQogICAgdWkuc2V0X3Zpc2libGUodHJhc2hUYWxrLCBpc192aXN1YWxzX3RhYikKICAgIHVpLnNldF92aXNpYmxlKGFuaW1hdGlvbnNFbmFibGVkLCBpc19taXNjX3RhYikKICAgIAogICAgLS0gU2V0IHRoZSB2aXNpYmlsaXR5IG9mIHdhdGVybWFya19tb2RlIGJhc2VkIG9uIHRoZSB3YXRlcm1hcmtFbmFibGUgc3RhdGUgYW5kIGlmIHdlIGFyZSBpbiB0aGUgdmlzdWFscyB0YWIKICAgIGxvY2FsIGlzX3dhdGVybWFya19lbmFibGVkID0gaXNfdmlzdWFsc190YWIgYW5kIHVpLmdldCh3YXRlcm1hcmtFbmFibGUpCiAgICB1aS5zZXRfdmlzaWJsZSh3YXRlcm1hcmtfbW9kZSwgaXNfd2F0ZXJtYXJrX2VuYWJsZWQpCiAgICAKICAgIC0tIFNldCB0aGUgdmlzaWJpbGl0eSBvZiB0cmFzaFRhbGtfdmlib3IgYmFzZWQgb24gdGhlIHRyYXNoVGFsayBzdGF0ZSBhbmQgaWYgd2UgYXJlIGluIHRoZSB2aXN1YWxzIHRhYgogICAgbG9jYWwgaXNfdHJhc2hfdGFsa19lbmFibGVkID0gaXNfdmlzdWFsc190YWIgYW5kIHVpLmdldCh0cmFzaFRhbGspCiAgICB1aS5zZXRfdmlzaWJsZSh0cmFzaFRhbGtfdmlib3IsIGlzX3RyYXNoX3RhbGtfZW5hYmxlZCkKICAgIAogICAgLS0gU2V0IHRoZSB2aXNpYmlsaXR5IG9mIGFuaW1hdGlvbnMgYmFzZWQgb24gdGhlIGFuaW1hdGlvbnNFbmFibGVkIHN0YXRlIGFuZCBpZiB3ZSBhcmUgaW4gdGhlIHZpc3VhbHMgdGFiCiAgICBsb2NhbCBpc19hbmltYXRpb25zX2VuYWJsZWQgPSBpc19taXNjX3RhYiBhbmQgdWkuZ2V0KGFuaW1hdGlvbnNFbmFibGVkKQogICAgdWkuc2V0X3Zpc2libGUoYW5pbWF0aW9ucywgaXNfYW5pbWF0aW9uc19lbmFibGVkKQplbmQKCi0tIENhbGwgdGhlIHVwZGF0ZSBmdW5jdGlvbiB3aGVuIHRoZSBzY3JpcHQgbG9hZHMgb3Igd2hlbiB0aGUgdGFiIG9yIGVuYWJsZSBzdGF0ZXMgY2hhbmdlCnVwZGF0ZV92aXNpYmlsaXR5KCkKCi0tIFNldCB1cCBldmVudCBsaXN0ZW5lcnMgdG8gdXBkYXRlIHZpc2liaWxpdHkgd2hlbiBuZWNlc3NhcnkKdWkuc2V0X2NhbGxiYWNrKGN1cnJlbnRfdGFiLCB1cGRhdGVfdmlzaWJpbGl0eSkKdWkuc2V0X2NhbGxiYWNrKHdhdGVybWFya0VuYWJsZSwgdXBkYXRlX3Zpc2liaWxpdHkpCnVpLnNldF9jYWxsYmFjayh0cmFzaFRhbGssIHVwZGF0ZV92aXNpYmlsaXR5KQp1aS5zZXRfY2FsbGJhY2soYW5pbWF0aW9uc0VuYWJsZWQsIHVwZGF0ZV92aXNpYmlsaXR5KQoKCgogICAgCgoKCgoKICAgICAgICB1aS5zZXRfdmlzaWJsZShuaWxlMiwgdWkuZ2V0KGN1cnJlbnRfdGFiKSA9PSAnVmlzdWFscycpCiAgICAgICAgdWkuc2V0X3Zpc2libGUocG9sb3NhLCB1aS5nZXQoY3VycmVudF90YWIpID09ICdWaXN1YWxzJykKICAgICAgICB1aS5zZXRfdmlzaWJsZShvdGhlcl8sIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ1Zpc3VhbHMnKQogICAgICAgIHVpLnNldF92aXNpYmxlKHZpc3VhbF8sIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ1Zpc3VhbHMnKQogICAgICAgIHVpLnNldF92aXNpYmxlKHVuc2FmZWNoYXJoZ2UsIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ01pc2MnKQoJCS0tdWkuc2V0X3Zpc2libGUoc2xvd2VkX2Rvd24sIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ1Zpc3VhbHMnKQoKICAgICAgICBmb3IgaSA9IDEsICNhbnRpX2FpbV9zdGF0ZXMgZG8KICAgICAgICAgICAgdWkuc2V0X3Zpc2libGUoYW50aV9haW1fc2V0dGluZ3NbaV0ub3ZlcnJpZGVfc3RhdGUsIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ0FudGktQWltJyBhbmQgdWkuZ2V0KHNldHRpbmdzLmFudGlfYWltX3N0YXRlKSA9PSBhbnRpX2FpbV9zdGF0ZXNbaV0gYW5kIHVpLmdldChjdXJyZW50X3N0YXRlX21lbnUpID09ICJidWlsZGVyIik7IHVpLnNldChhbnRpX2FpbV9zZXR0aW5nc1sxXS5vdmVycmlkZV9zdGF0ZSwgdHJ1ZSk7IHVpLnNldF92aXNpYmxlKGFudGlfYWltX3NldHRpbmdzWzFdLm92ZXJyaWRlX3N0YXRlLCBmYWxzZSkKICAgICAgICAgICAgdWkuc2V0X3Zpc2libGUoYW50aV9haW1fc2V0dGluZ3NbaV0ucGl0Y2gxLHVpLmdldChjdXJyZW50X3RhYikgPT0gJ0FudGktQWltJyBhbmQgIHVpLmdldChzZXR0aW5ncy5hbnRpX2FpbV9zdGF0ZSkgPT0gYW50aV9haW1fc3RhdGVzW2ldIGFuZCB1aS5nZXQoY3VycmVudF9zdGF0ZV9tZW51KSA9PSAiYnVpbGRlciIpCiAgICAgICAgICAgIHVpLnNldF92aXNpYmxlKGFudGlfYWltX3NldHRpbmdzW2ldLnBpdGNoMiwgdWkuZ2V0KGN1cnJlbnRfdGFiKSA9PSAnQW50aS1BaW0nIGFuZCB1aS5nZXQoc2V0dGluZ3MuYW50aV9haW1fc3RhdGUpID09IGFudGlfYWltX3N0YXRlc1tpXSBhbmQgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW2ldLnBpdGNoMSkgPT0gJ0N1c3RvbScgYW5kIHVpLmdldChjdXJyZW50X3N0YXRlX21lbnUpID09ICJidWlsZGVyIikKICAgICAgICAgICAgdWkuc2V0X3Zpc2libGUoYW50aV9haW1fc2V0dGluZ3NbaV0ueWF3X2Jhc2UsIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ0FudGktQWltJyBhbmQgdWkuZ2V0KHNldHRpbmdzLmFudGlfYWltX3N0YXRlKSA9PSBhbnRpX2FpbV9zdGF0ZXNbaV0gYW5kIHVpLmdldChjdXJyZW50X3N0YXRlX21lbnUpID09ICJidWlsZGVyIikKICAgICAgICAgICAgdWkuc2V0X3Zpc2libGUoYW50aV9haW1fc2V0dGluZ3NbaV0ueWF3MSwgdWkuZ2V0KGN1cnJlbnRfdGFiKSA9PSAnQW50aS1BaW0nIGFuZCB1aS5nZXQoc2V0dGluZ3MuYW50aV9haW1fc3RhdGUpID09IGFudGlfYWltX3N0YXRlc1tpXSBhbmQgdWkuZ2V0KGN1cnJlbnRfc3RhdGVfbWVudSkgPT0gImJ1aWxkZXIiKQogICAgICAgICAgICB1aS5zZXRfdmlzaWJsZShhbnRpX2FpbV9zZXR0aW5nc1tpXS55YXcyX2xlZnQsIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ0FudGktQWltJyBhbmQgdWkuZ2V0KHNldHRpbmdzLmFudGlfYWltX3N0YXRlKSA9PSBhbnRpX2FpbV9zdGF0ZXNbaV0gYW5kIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tpXS55YXcxKSB+PSAnT2ZmJyBhbmQgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW2ldLnlhd19qaXR0ZXIxKSB+PSAnRGVsYXknIGFuZCB1aS5nZXQoY3VycmVudF9zdGF0ZV9tZW51KSA9PSAiYnVpbGRlciIpCiAgICAgICAgICAgIHVpLnNldF92aXNpYmxlKGFudGlfYWltX3NldHRpbmdzW2ldLnlhdzJfcmlnaHQsIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ0FudGktQWltJyBhbmQgdWkuZ2V0KHNldHRpbmdzLmFudGlfYWltX3N0YXRlKSA9PSBhbnRpX2FpbV9zdGF0ZXNbaV0gYW5kIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tpXS55YXcxKSB+PSAnT2ZmJyBhbmQgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW2ldLnlhd19qaXR0ZXIxKSB+PSAnRGVsYXknIGFuZCB1aS5nZXQoY3VycmVudF9zdGF0ZV9tZW51KSA9PSAiYnVpbGRlciIpCiAgICAgICAgICAgIHVpLnNldF92aXNpYmxlKGFudGlfYWltX3NldHRpbmdzW2ldLnlhdzJfcmFuZG9taXplLCB1aS5nZXQoY3VycmVudF90YWIpID09ICdBbnRpLUFpbScgYW5kIHVpLmdldChzZXR0aW5ncy5hbnRpX2FpbV9zdGF0ZSkgPT0gYW50aV9haW1fc3RhdGVzW2ldIGFuZCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3NbaV0ueWF3MSkgfj0gJ09mZicgYW5kIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tpXS55YXdfaml0dGVyMSkgfj0gJ0RlbGF5JyBhbmQgdWkuZ2V0KGN1cnJlbnRfc3RhdGVfbWVudSkgPT0gImJ1aWxkZXIiKQogICAgICAgICAgICB1aS5zZXRfdmlzaWJsZShhbnRpX2FpbV9zZXR0aW5nc1tpXS55YXdfaml0dGVyMSwgdWkuZ2V0KGN1cnJlbnRfdGFiKSA9PSAnQW50aS1BaW0nIGFuZCB1aS5nZXQoc2V0dGluZ3MuYW50aV9haW1fc3RhdGUpID09IGFudGlfYWltX3N0YXRlc1tpXSBhbmQgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW2ldLnlhdzEpIH49ICdPZmYnIGFuZCB1aS5nZXQoY3VycmVudF9zdGF0ZV9tZW51KSA9PSAiYnVpbGRlciIpCiAgICAgICAgICAgIHVpLnNldF92aXNpYmxlKGFudGlfYWltX3NldHRpbmdzW2ldLnlhd19qaXR0ZXIyX2xlZnQsIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ0FudGktQWltJyBhbmQgdWkuZ2V0KHNldHRpbmdzLmFudGlfYWltX3N0YXRlKSA9PSBhbnRpX2FpbV9zdGF0ZXNbaV0gYW5kIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tpXS55YXcxKSB+PSAnT2ZmJyBhbmQgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW2ldLnlhd19qaXR0ZXIxKSB+PSAnT2ZmJyBhbmQgdWkuZ2V0KGN1cnJlbnRfc3RhdGVfbWVudSkgPT0gImJ1aWxkZXIiKQogICAgICAgICAgICB1aS5zZXRfdmlzaWJsZShhbnRpX2FpbV9zZXR0aW5nc1tpXS55YXdfaml0dGVyMl9yaWdodCwgdWkuZ2V0KGN1cnJlbnRfdGFiKSA9PSAnQW50aS1BaW0nIGFuZCB1aS5nZXQoc2V0dGluZ3MuYW50aV9haW1fc3RhdGUpID09IGFudGlfYWltX3N0YXRlc1tpXSBhbmQgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW2ldLnlhdzEpIH49ICdPZmYnIGFuZCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3NbaV0ueWF3X2ppdHRlcjEpIH49ICdPZmYnIGFuZCB1aS5nZXQoY3VycmVudF9zdGF0ZV9tZW51KSA9PSAiYnVpbGRlciIpCiAgICAgICAgICAgIHVpLnNldF92aXNpYmxlKGFudGlfYWltX3NldHRpbmdzW2ldLnlhd19qaXR0ZXIyX3JhbmRvbWl6ZSwgdWkuZ2V0KGN1cnJlbnRfdGFiKSA9PSAnQW50aS1BaW0nIGFuZCB1aS5nZXQoc2V0dGluZ3MuYW50aV9haW1fc3RhdGUpID09IGFudGlfYWltX3N0YXRlc1tpXSBhbmQgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW2ldLnlhdzEpIH49ICdPZmYnIGFuZCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3NbaV0ueWF3X2ppdHRlcjEpIH49ICdPZmYnIGFuZCB1aS5nZXQoY3VycmVudF9zdGF0ZV9tZW51KSA9PSAiYnVpbGRlciIpCiAgICAgICAgICAgIHVpLnNldF92aXNpYmxlKGFudGlfYWltX3NldHRpbmdzW2ldLnlhd19qaXR0ZXIyX2RlbGF5LCB1aS5nZXQoY3VycmVudF90YWIpID09ICdBbnRpLUFpbScgYW5kIHVpLmdldChzZXR0aW5ncy5hbnRpX2FpbV9zdGF0ZSkgPT0gYW50aV9haW1fc3RhdGVzW2ldIGFuZCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3NbaV0ueWF3MSkgfj0gJ09mZicgYW5kIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tpXS55YXdfaml0dGVyMSkgPT0gJ0RlbGF5JyBhbmQgdWkuZ2V0KGN1cnJlbnRfc3RhdGVfbWVudSkgPT0gImJ1aWxkZXIiKQogICAgICAgICAgICB1aS5zZXRfdmlzaWJsZShhbnRpX2FpbV9zZXR0aW5nc1tpXS5ib2R5X3lhdzEsIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ0FudGktQWltJyBhbmQgdWkuZ2V0KHNldHRpbmdzLmFudGlfYWltX3N0YXRlKSA9PSBhbnRpX2FpbV9zdGF0ZXNbaV0gYW5kIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tpXS55YXdfaml0dGVyMSkgfj0gJ0RlbGF5JyBhbmQgdWkuZ2V0KGN1cnJlbnRfc3RhdGVfbWVudSkgPT0gImJ1aWxkZXIiKQogICAgICAgICAgICB1aS5zZXRfdmlzaWJsZShhbnRpX2FpbV9zZXR0aW5nc1tpXS5ib2R5X3lhdzIsIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ0FudGktQWltJyBhbmQgdWkuZ2V0KHNldHRpbmdzLmFudGlfYWltX3N0YXRlKSA9PSBhbnRpX2FpbV9zdGF0ZXNbaV0gYW5kICh1aS5nZXQoYW50aV9haW1fc2V0dGluZ3NbaV0uYm9keV95YXcxKSB+PSAnT2ZmJyBhbmQgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW2ldLmJvZHlfeWF3MSkgfj0gJ09wcG9zaXRlJykgYW5kIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tpXS55YXdfaml0dGVyMSkgfj0gJ0RlbGF5JyBhbmQgdWkuZ2V0KGN1cnJlbnRfc3RhdGVfbWVudSkgPT0gImJ1aWxkZXIiKQogICAgICAgICAgICB1aS5zZXRfdmlzaWJsZShhbnRpX2FpbV9zZXR0aW5nc1tpXS5mcmVlc3RhbmRpbmdfYm9keV95YXcsIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ0FudGktQWltJyBhbmQgdWkuZ2V0KHNldHRpbmdzLmFudGlfYWltX3N0YXRlKSA9PSBhbnRpX2FpbV9zdGF0ZXNbaV0gYW5kIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tpXS5ib2R5X3lhdzEpIH49ICdPZmYnIGFuZCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3NbaV0ueWF3X2ppdHRlcjEpIH49ICdEZWxheScgYW5kIHVpLmdldChjdXJyZW50X3N0YXRlX21lbnUpID09ICJidWlsZGVyIikKICAgICAgICAgICAgdWkuc2V0X3Zpc2libGUoYW50aV9haW1fc2V0dGluZ3NbaV0uZGVmZW5zaXZlX2FudGlfYWltYm90LCB1aS5nZXQoY3VycmVudF90YWIpID09ICdBbnRpLUFpbScgYW5kIHVpLmdldChzZXR0aW5ncy5hbnRpX2FpbV9zdGF0ZSkgPT0gYW50aV9haW1fc3RhdGVzW2ldIGFuZCB1aS5nZXQoY3VycmVudF9zdGF0ZV9tZW51KSA9PSAiYnVpbGRlciIpOyB1aS5zZXRfdmlzaWJsZShhbnRpX2FpbV9zZXR0aW5nc1s5XS5kZWZlbnNpdmVfYW50aV9haW1ib3QsIGZhbHNlKQogICAgICAgICAgICB1aS5zZXRfdmlzaWJsZShhbnRpX2FpbV9zZXR0aW5nc1tpXS5kZWZlbnNpdmVfcGl0Y2gxLCB1aS5nZXQoY3VycmVudF90YWIpID09ICdBbnRpLUFpbScgYW5kIHVpLmdldChzZXR0aW5ncy5hbnRpX2FpbV9zdGF0ZSkgPT0gYW50aV9haW1fc3RhdGVzW2ldIGFuZCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3NbaV0uZGVmZW5zaXZlX2FudGlfYWltYm90KSBhbmQgdWkuZ2V0KGN1cnJlbnRfc3RhdGVfbWVudSkgPT0gImJ1aWxkZXIiKTsgdWkuc2V0X3Zpc2libGUoYW50aV9haW1fc2V0dGluZ3NbOV0uZGVmZW5zaXZlX3BpdGNoMSwgZmFsc2UpCiAgICAgICAgICAgIHVpLnNldF92aXNpYmxlKGFudGlfYWltX3NldHRpbmdzW2ldLmRlZmVuc2l2ZV9waXRjaDIsIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ0FudGktQWltJyBhbmQgdWkuZ2V0KHNldHRpbmdzLmFudGlfYWltX3N0YXRlKSA9PSBhbnRpX2FpbV9zdGF0ZXNbaV0gYW5kIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tpXS5kZWZlbnNpdmVfYW50aV9haW1ib3QpIGFuZCAodWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW2ldLmRlZmVuc2l2ZV9waXRjaDEpID09ICdSYW5kb20nIG9yIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tpXS5kZWZlbnNpdmVfcGl0Y2gxKSA9PSAnQ3VzdG9tJykgYW5kIHVpLmdldChjdXJyZW50X3N0YXRlX21lbnUpID09ICJidWlsZGVyIik7IHVpLnNldF92aXNpYmxlKGFudGlfYWltX3NldHRpbmdzWzldLmRlZmVuc2l2ZV9waXRjaDIsIGZhbHNlKQogICAgICAgICAgICB1aS5zZXRfdmlzaWJsZShhbnRpX2FpbV9zZXR0aW5nc1tpXS5kZWZlbnNpdmVfcGl0Y2gzLCB1aS5nZXQoY3VycmVudF90YWIpID09ICdBbnRpLUFpbScgYW5kIHVpLmdldChzZXR0aW5ncy5hbnRpX2FpbV9zdGF0ZSkgPT0gYW50aV9haW1fc3RhdGVzW2ldIGFuZCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3NbaV0uZGVmZW5zaXZlX2FudGlfYWltYm90KSBhbmQgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW2ldLmRlZmVuc2l2ZV9waXRjaDEpID09ICdSYW5kb20nIGFuZCB1aS5nZXQoY3VycmVudF9zdGF0ZV9tZW51KSA9PSAiYnVpbGRlciIpOyB1aS5zZXRfdmlzaWJsZShhbnRpX2FpbV9zZXR0aW5nc1s5XS5kZWZlbnNpdmVfcGl0Y2gzLCBmYWxzZSkKICAgICAgICAgICAgdWkuc2V0X3Zpc2libGUoYW50aV9haW1fc2V0dGluZ3NbaV0uZGVmZW5zaXZlX3lhdzEsIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ0FudGktQWltJyBhbmQgdWkuZ2V0KHNldHRpbmdzLmFudGlfYWltX3N0YXRlKSA9PSBhbnRpX2FpbV9zdGF0ZXNbaV0gYW5kIHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tpXS5kZWZlbnNpdmVfYW50aV9haW1ib3QpIGFuZCB1aS5nZXQoY3VycmVudF9zdGF0ZV9tZW51KSA9PSAiYnVpbGRlciIpOyB1aS5zZXRfdmlzaWJsZShhbnRpX2FpbV9zZXR0aW5nc1s5XS5kZWZlbnNpdmVfeWF3MSwgZmFsc2UpCiAgICAgICAgICAgIHVpLnNldF92aXNpYmxlKGFudGlfYWltX3NldHRpbmdzW2ldLmRlZmVuc2l2ZV95YXcyLCB1aS5nZXQoY3VycmVudF90YWIpID09ICdBbnRpLUFpbScgYW5kIHVpLmdldChzZXR0aW5ncy5hbnRpX2FpbV9zdGF0ZSkgPT0gYW50aV9haW1fc3RhdGVzW2ldIGFuZCB1aS5nZXQoYW50aV9haW1fc2V0dGluZ3NbaV0uZGVmZW5zaXZlX2FudGlfYWltYm90KSBhbmQgKHVpLmdldChhbnRpX2FpbV9zZXR0aW5nc1tpXS5kZWZlbnNpdmVfeWF3MSkgPT0gJzE4MCcgb3IgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW2ldLmRlZmVuc2l2ZV95YXcxKSA9PSAnU3Bpbicgb3IgdWkuZ2V0KGFudGlfYWltX3NldHRpbmdzW2ldLmRlZmVuc2l2ZV95YXcxKSA9PSAnMTgwIFonKSBhbmQgdWkuZ2V0KGN1cnJlbnRfc3RhdGVfbWVudSkgPT0gImJ1aWxkZXIiKTsgdWkuc2V0X3Zpc2libGUoYW50aV9haW1fc2V0dGluZ3NbOV0uZGVmZW5zaXZlX3lhdzIsIGZhbHNlKQogICAgICAgIGVuZAogICAgZW5kCmVuZCkKCmxvY2FsIHJlZnMgPSB7CiAgICBzbG93bW90aW9uID0gdWkucmVmZXJlbmNlKCJBQSIsICJPdGhlciIsICJTbG93IG1vdGlvbiIpLAogICAgT1NBQUEgPSB1aS5yZWZlcmVuY2UoIkFBIiwgIk90aGVyIiwgIk9uIHNob3QgYW50aS1haW0iKSwKICAgIExlZ21vdmVzID0gdWkucmVmZXJlbmNlKCJBQSIsICJPdGhlciIsICJMZWcgbW92ZW1lbnQiKSwKICAgIGxlZ2l0ID0gdWkucmVmZXJlbmNlKCJMRUdJVCIsICJBaW1ib3QiLCAiRW5hYmxlZCIpLAogICAgbWluaW11bV9kYW1hZ2Vfb3ZlcnJpZGUgPSB7IHVpLnJlZmVyZW5jZSgiUmFnZSIsICJBaW1ib3QiLCAiTWluaW11bSBkYW1hZ2Ugb3ZlcnJpZGUiKSB9LAogICAgZmFrZUR1Y2sgPSB1aS5yZWZlcmVuY2UoIlJBR0UiLCAiT3RoZXIiLCAiRHVjayBwZWVrIGFzc2lzdCIpLAogICAgbWluaW11bV9kYW1hZ2UgPSB1aS5yZWZlcmVuY2UoIlJhZ2UiLCAiQWltYm90IiwgIk1pbmltdW0gZGFtYWdlIiksCiAgICBoaXRDaGFuY2UgPSB1aS5yZWZlcmVuY2UoIlJBR0UiLCAiQWltYm90IiwgIk1pbmltdW0gaGl0IGNoYW5jZSIpLAogICAgc2FmZVBvaW50ID0gdWkucmVmZXJlbmNlKCJSQUdFIiwgIkFpbWJvdCIsICJGb3JjZSBzYWZlIHBvaW50IiksCiAgICBmb3JjZUJhaW0gPSB1aS5yZWZlcmVuY2UoIlJBR0UiLCAiQWltYm90IiwgIkZvcmNlIGJvZHkgYWltIiksCiAgICBkdExpbWl0ID0gdWkucmVmZXJlbmNlKCJSQUdFIiwgIkFpbWJvdCIsICJEb3VibGUgdGFwIGZha2UgbGFnIGxpbWl0IiksCiAgICBxdWlja1BlZWsgPSB7dWkucmVmZXJlbmNlKCJSQUdFIiwgIk90aGVyIiwgIlF1aWNrIHBlZWsgYXNzaXN0Iil9LAogICAgZHQgPSB7dWkucmVmZXJlbmNlKCJSQUdFIiwgIkFpbWJvdCIsICJEb3VibGUgdGFwIil9LAogICAgZW5hYmxlZCA9IHVpLnJlZmVyZW5jZSgiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgIkVuYWJsZWQiKSwKICAgIHBpdGNoID0ge3VpLnJlZmVyZW5jZSgiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgInBpdGNoIil9LAogICAgcm9sbCA9IHVpLnJlZmVyZW5jZSgiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgInJvbGwiKSwKICAgIHlhd0Jhc2UgPSB1aS5yZWZlcmVuY2UoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJZYXcgYmFzZSIpLAogICAgeWF3ID0ge3VpLnJlZmVyZW5jZSgiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgIllhdyIpfSwKICAgIGZsTGltaXQgPSB1aS5yZWZlcmVuY2UoIkFBIiwgIkZha2UgbGFnIiwgIkxpbWl0IiksCiAgICBmbGFtb3VudCA9IHVpLnJlZmVyZW5jZSgiQUEiLCAiRmFrZSBsYWciLCAiQW1vdW50IiksCiAgICBmbGVuYWJsZWQgPSB1aS5yZWZlcmVuY2UoIkFBIiwgIkZha2UgbGFnIiwgIkVuYWJsZWQiKSwKICAgIGZsVmFyaWFuY2UgPSB1aS5yZWZlcmVuY2UoIkFBIiwgIkZha2UgbGFnIiwgIlZhcmlhbmNlIiksCiAgICBBQWZha2UgPSB1aS5yZWZlcmVuY2UoIkFBIiwgIk90aGVyIiwgIkZha2UgcGVlayIpLAogICAgZnNCb2R5WWF3ID0gdWkucmVmZXJlbmNlKCJBQSIsICJhbnRpLWFpbWJvdCBhbmdsZXMiLCAiRnJlZXN0YW5kaW5nIGJvZHkgeWF3IiksCiAgICBlZGdlWWF3ID0gdWkucmVmZXJlbmNlKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiRWRnZSB5YXciKSwKICAgIHlhd0ppdHRlciA9IHt1aS5yZWZlcmVuY2UoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJZYXcgaml0dGVyIil9LAogICAgYm9keVlhdyA9IHt1aS5yZWZlcmVuY2UoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJCb2R5IHlhdyIpfSwKICAgIGZyZWVTdGFuZCA9IHt1aS5yZWZlcmVuY2UoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJGcmVlc3RhbmRpbmciKX0sCiAgICBvcyA9IHt1aS5yZWZlcmVuY2UoIkFBIiwgIk90aGVyIiwgIk9uIHNob3QgYW50aS1haW0iKX0sCiAgICBzbG93ID0ge3VpLnJlZmVyZW5jZSgiQUEiLCAiT3RoZXIiLCAiU2xvdyBtb3Rpb24iKX0sCiAgICBmYWtlTGFnID0ge3VpLnJlZmVyZW5jZSgiQUEiLCAiRmFrZSBsYWciLCAiTGltaXQiKX0sCiAgICBsZWdNb3ZlbWVudCA9IHVpLnJlZmVyZW5jZSgiQUEiLCAiT3RoZXIiLCAiTGVnIG1vdmVtZW50IiksCiAgICBpbmRpY2F0b3JzID0ge3VpLnJlZmVyZW5jZSgiVklTVUFMUyIsICJPdGhlciBFU1AiLCAiRmVhdHVyZSBpbmRpY2F0b3JzIil9LAogICAgcGluZyA9IHt1aS5yZWZlcmVuY2UoIk1JU0MiLCAiTWlzY2VsbGFuZW91cyIsICJQaW5nIHNwaWtlIil9LAp9CgoKbG9jYWwgZnVuYyA9IHsKICAgIHJlbmRlcl90ZXh0ID0gZnVuY3Rpb24oeCwgeSwgLi4uKQogICAgICAgIGxvY2FsIHhfT2Zmc2V0ID0gMAogICAgICAgIAogICAgICAgIGxvY2FsIGFyZ3MgPSB7Li4ufQogICAgCiAgICAgICAgZm9yIGksIGxpbmUgaW4gcGFpcnMoYXJncykgZG8KICAgICAgICAgICAgbG9jYWwgciwgZywgYiwgYSwgdGV4dCA9IHVucGFjayhsaW5lKQogICAgICAgICAgICBsb2NhbCBzaXplID0gdmVjdG9yKHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLWQiLCB0ZXh0KSkKICAgICAgICAgICAgcmVuZGVyZXIudGV4dCh4ICsgeF9PZmZzZXQsIHksIHIsIGcsIGIsIGEsICItZCIsIDAsIHRleHQpCiAgICAgICAgICAgIHhfT2Zmc2V0ID0geF9PZmZzZXQgKyBzaXplLngKICAgICAgICBlbmQKICAgIGVuZCwKICAgIGVhc2VJbk91dCA9IGZ1bmN0aW9uKHQpCiAgICAgICAgcmV0dXJuICh0ID4gMC41KSBhbmQgNCooKHQtMSleMykrMSBvciA0KnReMzsKICAgIGVuZCwKICAgIHJlYyA9IGZ1bmN0aW9uKHgsIHksIHcsIGgsIHJhZGl1cywgY29sb3IpCiAgICAgICAgcmFkaXVzID0gbWF0aC5taW4oeC8yLCB5LzIsIHJhZGl1cykKICAgICAgICBsb2NhbCByLCBnLCBiLCBhID0gdW5wYWNrKGNvbG9yKQogICAgICAgIHJlbmRlcmVyLnJlY3RhbmdsZSh4LCB5ICsgcmFkaXVzLCB3LCBoIC0gcmFkaXVzKjIsIHIsIGcsIGIsIGEpCiAgICAgICAgcmVuZGVyZXIucmVjdGFuZ2xlKHggKyByYWRpdXMsIHksIHcgLSByYWRpdXMqMiwgcmFkaXVzLCByLCBnLCBiLCBhKQogICAgICAgIHJlbmRlcmVyLnJlY3RhbmdsZSh4ICsgcmFkaXVzLCB5ICsgaCAtIHJhZGl1cywgdyAtIHJhZGl1cyoyLCByYWRpdXMsIHIsIGcsIGIsIGEpCiAgICAgICAgcmVuZGVyZXIuY2lyY2xlKHggKyByYWRpdXMsIHkgKyByYWRpdXMsIHIsIGcsIGIsIGEsIHJhZGl1cywgMTgwLCAwLjI1KQogICAgICAgIHJlbmRlcmVyLmNpcmNsZSh4IC0gcmFkaXVzICsgdywgeSArIHJhZGl1cywgciwgZywgYiwgYSwgcmFkaXVzLCA5MCwgMC4yNSkKICAgICAgICByZW5kZXJlci5jaXJjbGUoeCAtIHJhZGl1cyArIHcsIHkgLSByYWRpdXMgKyBoLCByLCBnLCBiLCBhLCByYWRpdXMsIDAsIDAuMjUpCiAgICAgICAgcmVuZGVyZXIuY2lyY2xlKHggKyByYWRpdXMsIHkgLSByYWRpdXMgKyBoLCByLCBnLCBiLCBhLCByYWRpdXMsIC05MCwgMC4yNSkKICAgIGVuZCwKICAgIHJlY19vdXRsaW5lID0gZnVuY3Rpb24oeCwgeSwgdywgaCwgcmFkaXVzLCB0aGlja25lc3MsIGNvbG9yKQogICAgICAgIHJhZGl1cyA9IG1hdGgubWluKHcvMiwgaC8yLCByYWRpdXMpCiAgICAgICAgbG9jYWwgciwgZywgYiwgYSA9IHVucGFjayhjb2xvcikKICAgICAgICBpZiByYWRpdXMgPT0gMSB0aGVuCiAgICAgICAgICAgIHJlbmRlcmVyLnJlY3RhbmdsZSh4LCB5LCB3LCB0aGlja25lc3MsIHIsIGcsIGIsIGEpCiAgICAgICAgICAgIHJlbmRlcmVyLnJlY3RhbmdsZSh4LCB5ICsgaCAtIHRoaWNrbmVzcywgdyAsIHRoaWNrbmVzcywgciwgZywgYiwgYSkKICAgICAgICBlbHNlCiAgICAgICAgICAgIHJlbmRlcmVyLnJlY3RhbmdsZSh4ICsgcmFkaXVzLCB5LCB3IC0gcmFkaXVzKjIsIHRoaWNrbmVzcywgciwgZywgYiwgYSkKICAgICAgICAgICAgcmVuZGVyZXIucmVjdGFuZ2xlKHggKyByYWRpdXMsIHkgKyBoIC0gdGhpY2tuZXNzLCB3IC0gcmFkaXVzKjIsIHRoaWNrbmVzcywgciwgZywgYiwgYSkKICAgICAgICAgICAgcmVuZGVyZXIucmVjdGFuZ2xlKHgsIHkgKyByYWRpdXMsIHRoaWNrbmVzcywgaCAtIHJhZGl1cyoyLCByLCBnLCBiLCBhKQogICAgICAgICAgICByZW5kZXJlci5yZWN0YW5nbGUoeCArIHcgLSB0aGlja25lc3MsIHkgKyByYWRpdXMsIHRoaWNrbmVzcywgaCAtIHJhZGl1cyoyLCByLCBnLCBiLCBhKQogICAgICAgICAgICByZW5kZXJlci5jaXJjbGVfb3V0bGluZSh4ICsgcmFkaXVzLCB5ICsgcmFkaXVzLCByLCBnLCBiLCBhLCByYWRpdXMsIDE4MCwgMC4yNSwgdGhpY2tuZXNzKQogICAgICAgICAgICByZW5kZXJlci5jaXJjbGVfb3V0bGluZSh4ICsgcmFkaXVzLCB5ICsgaCAtIHJhZGl1cywgciwgZywgYiwgYSwgcmFkaXVzLCA5MCwgMC4yNSwgdGhpY2tuZXNzKQogICAgICAgICAgICByZW5kZXJlci5jaXJjbGVfb3V0bGluZSh4ICsgdyAtIHJhZGl1cywgeSArIHJhZGl1cywgciwgZywgYiwgYSwgcmFkaXVzLCAtOTAsIDAuMjUsIHRoaWNrbmVzcykKICAgICAgICAgICAgcmVuZGVyZXIuY2lyY2xlX291dGxpbmUoeCArIHcgLSByYWRpdXMsIHkgKyBoIC0gcmFkaXVzLCByLCBnLCBiLCBhLCByYWRpdXMsIDAsIDAuMjUsIHRoaWNrbmVzcykKICAgICAgICBlbmQKICAgIGVuZCwKICAgIGNsYW1wID0gZnVuY3Rpb24oeCwgbWluLCBtYXgpCiAgICAgICAgcmV0dXJuIHggPCBtaW4gYW5kIG1pbiBvciB4ID4gbWF4IGFuZCBtYXggb3IgeAogICAgZW5kLAogICAgdGFibGVfY29udGFpbnMgPSBmdW5jdGlvbih0YmwsIHZhbHVlKQogICAgICAgIGZvciBpID0gMSwgI3RibCBkbwogICAgICAgICAgICBpZiB0YmxbaV0gPT0gdmFsdWUgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuIHRydWUKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICBlbmQsCiAgICBzZXRBQVRhYiA9IGZ1bmN0aW9uKHJlZikKICAgICAgICB1aS5zZXRfdmlzaWJsZShyZWZzLmVuYWJsZWQsIHJlZikKICAgICAgICB1aS5zZXRfdmlzaWJsZShyZWZzLnBpdGNoWzFdLCByZWYpCiAgICAgICAgdWkuc2V0X3Zpc2libGUocmVmcy5waXRjaFsyXSwgcmVmKQogICAgICAgIHVpLnNldF92aXNpYmxlKHJlZnMucm9sbCwgcmVmKQogICAgICAgIHVpLnNldF92aXNpYmxlKHJlZnMuc2xvd21vdGlvbiwgcmVmKQogICAgICAgIHVpLnNldF92aXNpYmxlKHJlZnMuTGVnbW92ZXMsIHJlZikKICAgICAgICB1aS5zZXRfdmlzaWJsZShyZWZzLnlhd0Jhc2UsIHJlZikKICAgICAgICB1aS5zZXRfdmlzaWJsZShyZWZzLnlhd1sxXSwgcmVmKQogICAgICAgIHVpLnNldF92aXNpYmxlKHJlZnMueWF3WzJdLCByZWYpCiAgICAgICAgdWkuc2V0X3Zpc2libGUocmVmcy55YXdKaXR0ZXJbMV0sIHJlZikKICAgICAgICB1aS5zZXRfdmlzaWJsZShyZWZzLnlhd0ppdHRlclsyXSwgcmVmKQogICAgICAgIHVpLnNldF92aXNpYmxlKHJlZnMuYm9keVlhd1sxXSwgcmVmKQogICAgICAgIHVpLnNldF92aXNpYmxlKHJlZnMuYm9keVlhd1syXSwgcmVmKQogICAgICAgIHVpLnNldF92aXNpYmxlKHJlZnMuZnJlZVN0YW5kWzFdLCByZWYpCiAgICAgICAgdWkuc2V0X3Zpc2libGUocmVmcy5mcmVlU3RhbmRbMl0sIHJlZikKICAgICAgICB1aS5zZXRfdmlzaWJsZShyZWZzLmZzQm9keVlhdywgcmVmKQogICAgICAgIHVpLnNldF92aXNpYmxlKHJlZnMuZWRnZVlhdywgcmVmKQogICAgICAgIHVpLnNldF92aXNpYmxlKHJlZnMuZmxMaW1pdCwgcmVmKQogICAgICAgIHVpLnNldF92aXNpYmxlKHJlZnMuZmxhbW91bnQsIHJlZikKICAgICAgICB1aS5zZXRfdmlzaWJsZShyZWZzLmZsVmFyaWFuY2UsIHJlZikKICAgICAgICB1aS5zZXRfdmlzaWJsZShyZWZzLmZsZW5hYmxlZCwgcmVmKQogICAgICAgIHVpLnNldF92aXNpYmxlKHJlZnMuQUFmYWtlLCByZWYpCiAgICAgICAgdWkuc2V0X3Zpc2libGUocmVmcy5PU0FBQSwgcmVmKQogICAgZW5kLAogICAgZmluZERpc3QgPSBmdW5jdGlvbiAoeDEsIHkxLCB6MSwgeDIsIHkyLCB6MikKICAgICAgICByZXR1cm4gbWF0aC5zcXJ0KCh4MiAtIHgxKV4yICsgKHkyIC0geTEpXjIgKyAoejIgLSB6MSleMikKICAgIGVuZCwKICAgIHJlc2V0QUFUYWIgPSBmdW5jdGlvbigpCiAgICAgICAgdWkuc2V0KHJlZnMuT1NBQWEsIGZhbHNlKQogICAgICAgIHVpLnNldChyZWZzLmVuYWJsZWQsIGZhbHNlKQogICAgICAgIHVpLnNldChyZWZzLnBpdGNoWzFdLCAiT2ZmIikKICAgICAgICB1aS5zZXQocmVmcy5waXRjaFsyXSwgMCkKICAgICAgICB1aS5zZXQocmVmcy5yb2xsLCAwKQogICAgICAgIHVpLnNldChyZWZzLnNsb3dtb3Rpb24sIGZhbHNlKQogICAgICAgIHVpLnNldChyZWZzLnlhd0Jhc2UsICJsb2NhbCB2aWV3IikKICAgICAgICB1aS5zZXQocmVmcy55YXdbMV0sICJPZmYiKQogICAgICAgIHVpLnNldChyZWZzLnlhd1syXSwgMCkKICAgICAgICB1aS5zZXQocmVmcy55YXdKaXR0ZXJbMV0sICJPZmYiKQogICAgICAgIHVpLnNldChyZWZzLnlhd0ppdHRlclsyXSwgMCkKICAgICAgICB1aS5zZXQocmVmcy5ib2R5WWF3WzFdLCAiT2ZmIikKICAgICAgICB1aS5zZXQocmVmcy5ib2R5WWF3WzJdLCAwKQogICAgICAgIHVpLnNldChyZWZzLmZyZWVTdGFuZFsxXSwgZmFsc2UpCiAgICAgICAgdWkuc2V0KHJlZnMuZnJlZVN0YW5kWzJdLCAiT24gaG90a2V5IikKICAgICAgICB1aS5zZXQocmVmcy5mc0JvZHlZYXcsIGZhbHNlKQogICAgICAgIHVpLnNldChyZWZzLmVkZ2VZYXcsIGZhbHNlKQogICAgICAgIHVpLnNldChyZWZzLmZsTGltaXQsIGZhbHNlKQogICAgICAgIHVpLnNldChyZWZzLmZsYW1vdW50LCBmYWxzZSkKICAgICAgICB1aS5zZXQocmVmcy5mbGVuYWJsZWQsIGZhbHNlKQogICAgICAgIHVpLnNldChyZWZzLmZsVmFyaWFuY2UsIGZhbHNlKQogICAgICAgIHVpLnNldChyZWZzLkFBZmFrZSwgZmFsc2UpCiAgICBlbmQsCiAgICB0eXBlX2Zyb21fc3RyaW5nID0gZnVuY3Rpb24oaW5wdXQpCiAgICAgICAgaWYgdHlwZShpbnB1dCkgfj0gInN0cmluZyIgdGhlbiByZXR1cm4gaW5wdXQgZW5kCgogICAgICAgIGxvY2FsIHZhbHVlID0gaW5wdXQ6bG93ZXIoKQoKICAgICAgICBpZiB2YWx1ZSA9PSAidHJ1ZSIgdGhlbgogICAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgIGVsc2VpZiB2YWx1ZSA9PSAiZmFsc2UiIHRoZW4KICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgZWxzZWlmIHRvbnVtYmVyKHZhbHVlKSB+PSBuaWwgdGhlbgogICAgICAgICAgICByZXR1cm4gdG9udW1iZXIodmFsdWUpCiAgICAgICAgZWxzZQogICAgICAgICAgICByZXR1cm4gdG9zdHJpbmcoaW5wdXQpCiAgICAgICAgZW5kCiAgICBlbmQsCiAgICBsZXJwID0gZnVuY3Rpb24oc3RhcnQsIHZlbmQsIHRpbWUpCiAgICAgICAgcmV0dXJuIHN0YXJ0ICsgKHZlbmQgLSBzdGFydCkgKiB0aW1lCiAgICBlbmQsCiAgICB2ZWNfYW5nbGVzID0gZnVuY3Rpb24oYW5nbGVfeCwgYW5nbGVfeSkKICAgICAgICBsb2NhbCBzeSA9IG1hdGguc2luKG1hdGgucmFkKGFuZ2xlX3kpKQogICAgICAgIGxvY2FsIGN5ID0gbWF0aC5jb3MobWF0aC5yYWQoYW5nbGVfeSkpCiAgICAgICAgbG9jYWwgc3AgPSBtYXRoLnNpbihtYXRoLnJhZChhbmdsZV94KSkKICAgICAgICBsb2NhbCBjcCA9IG1hdGguY29zKG1hdGgucmFkKGFuZ2xlX3gpKQogICAgICAgIHJldHVybiBjcCAqIGN5LCBjcCAqIHN5LCAtc3AKICAgIGVuZCwKICAgIGhleCA9IGZ1bmN0aW9uKGFyZykKICAgICAgICBsb2NhbCByZXN1bHQgPSAiXGEiCiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gbmV4dCwgYXJnIGRvCiAgICAgICAgICAgIGxvY2FsIG91dHB1dCA9ICIiCiAgICAgICAgICAgIHdoaWxlIHZhbHVlID4gMCBkbwogICAgICAgICAgICAgICAgbG9jYWwgaW5kZXggPSBtYXRoLmZtb2QodmFsdWUsIDE2KSArIDEKICAgICAgICAgICAgICAgIHZhbHVlID0gbWF0aC5mbG9vcih2YWx1ZSAvIDE2KQogICAgICAgICAgICAgICAgb3V0cHV0ID0gc3RyaW5nLnN1YigiMDEyMzQ1Njc4OUFCQ0RFRiIsIGluZGV4LCBpbmRleCkgLi4gb3V0cHV0IAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgaWYgI291dHB1dCA9PSAwIHRoZW4gCiAgICAgICAgICAgICAgICBvdXRwdXQgPSAiMDAiIAogICAgICAgICAgICBlbHNlaWYgI291dHB1dCA9PSAxIHRoZW4gCiAgICAgICAgICAgICAgICBvdXRwdXQgPSAiMCIgLi4gb3V0cHV0IAogICAgICAgICAgICBlbmQgCiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCAuLiBvdXRwdXQKICAgICAgICBlbmQgCiAgICAgICAgcmV0dXJuIHJlc3VsdCAuLiAiRkYiCiAgICBlbmQsCiAgICBzcGxpdCA9IGZ1bmN0aW9uKCBpbnB1dHN0ciwgc2VwKQogICAgICAgIGlmIHNlcCA9PSBuaWwgdGhlbgogICAgICAgICAgICAgICAgc2VwID0gIiVzIgogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHQ9e30KICAgICAgICBmb3Igc3RyIGluIHN0cmluZy5nbWF0Y2goaW5wdXRzdHIsICIoW14iLi5zZXAuLiJdKykiKSBkbwogICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHQsIHN0cikKICAgICAgICBlbmQKICAgICAgICByZXR1cm4gdAogICAgZW5kLAogICAgUkdCQXRvSEVYID0gZnVuY3Rpb24ocmVkQXJnLCBncmVlbkFyZywgYmx1ZUFyZywgYWxwaGFBcmcpCiAgICAgICAgcmV0dXJuIHN0cmluZy5mb3JtYXQoJyUuMnglLjJ4JS4yeCUuMngnLCByZWRBcmcsIGdyZWVuQXJnLCBibHVlQXJnLCBhbHBoYUFyZykKICAgIGVuZCwKICAgIGNyZWF0ZV9jb2xvcl9hcnJheSA9IGZ1bmN0aW9uKHIsIGcsIGIsIHN0cmluZykKICAgICAgICBsb2NhbCBjb2xvcnMgPSB7fQogICAgICAgIGZvciBpID0gMCwgI3N0cmluZyBkbwogICAgICAgICAgICBsb2NhbCBjb2xvciA9IHtyLCBnLCBiLCAyNTUgKiBtYXRoLmFicygxICogbWF0aC5jb3MoMiAqIG1hdGgucGkgKiBnbG9iYWxzLmN1cnRpbWUoKSAvIDQgKyBpICogNSAvIDMwKSl9CiAgICAgICAgICAgIHRhYmxlLmluc2VydChjb2xvcnMsIGNvbG9yKQogICAgICAgIGVuZAogICAgICAgIHJldHVybiBjb2xvcnMKICAgIGVuZCwKICAgIHRleHRBcnJheSA9IGZ1bmN0aW9uKHN0cmluZykKICAgICAgICBsb2NhbCByZXN1bHQgPSB7fQogICAgICAgIGZvciBpPTEsICNzdHJpbmcgZG8KICAgICAgICAgICAgcmVzdWx0W2ldID0gc3RyaW5nLnN1YihzdHJpbmcsIGksIGkpCiAgICAgICAgZW5kCiAgICAgICAgcmV0dXJuIHJlc3VsdAogICAgZW5kLAogICAgaW5jbHVkZXMgPSBmdW5jdGlvbih0YmwsIHZhbHVlKQogICAgICAgIGZvciBpID0gMSwgI3RibCBkbwogICAgICAgICAgICBpZiB0YmxbaV0gPT0gdmFsdWUgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuIHRydWUKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICBlbmQsCiAgICBncmFkaWVudF90ZXh0ID0gZnVuY3Rpb24ocjEsIGcxLCBiMSwgYTEsIHIyLCBnMiwgYjIsIGEyLCB0ZXh0KQogICAgICAgIGxvY2FsIG91dHB1dCA9ICcnCiAgICAKICAgICAgICBsb2NhbCBsZW4gPSAjdGV4dC0xCiAgICAKICAgICAgICBsb2NhbCByaW5jID0gKHIyIC0gcjEpIC8gbGVuCiAgICAgICAgbG9jYWwgZ2luYyA9IChnMiAtIGcxKSAvIGxlbgogICAgICAgIGxvY2FsIGJpbmMgPSAoYjIgLSBiMSkgLyBsZW4KICAgICAgICBsb2NhbCBhaW5jID0gKGEyIC0gYTEpIC8gbGVuCiAgICAKICAgICAgICBmb3IgaT0xLCBsZW4rMSBkbwogICAgICAgICAgICBvdXRwdXQgPSBvdXRwdXQgLi4gKCdcYSUwMnglMDJ4JTAyeCUwMnglcycpOmZvcm1hdChyMSwgZzEsIGIxLCBhMSwgdGV4dDpzdWIoaSwgaSkpCiAgICAKICAgICAgICAgICAgcjEgPSByMSArIHJpbmMKICAgICAgICAgICAgZzEgPSBnMSArIGdpbmMKICAgICAgICAgICAgYjEgPSBiMSArIGJpbmMKICAgICAgICAgICAgYTEgPSBhMSArIGFpbmMKICAgICAgICBlbmQKICAgIAogICAgICAgIHJldHVybiBvdXRwdXQKICAgIGVuZAosICAgIAogICAgdGltZV90b190aWNrcyA9IGZ1bmN0aW9uKHQpCiAgICAgICAgcmV0dXJuIG1hdGguZmxvb3IoMC41ICsgKHQgLyBnbG9iYWxzLnRpY2tpbnRlcnZhbCgpKSkKICAgIGVuZCwKICAgIGhlYWRWaXNpYmxlID0gZnVuY3Rpb24oZW5lbXkpCiAgICAgICAgbG9jYWxfcGxheWVyID0gZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKQogICAgICAgIGlmIGxvY2FsX3BsYXllciA9PSBuaWwgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgbG9jYWwgZXgsIGV5LCBleiA9IGVudGl0eS5oaXRib3hfcG9zaXRpb24oZW5lbXksIDEpCiAgICAKICAgICAgICBsb2NhbCBoeCwgaHksIGh6ID0gZW50aXR5LmhpdGJveF9wb3NpdGlvbihsb2NhbF9wbGF5ZXIsIDEpCiAgICAgICAgbG9jYWwgaGVhZF9mcmFjdGlvbiwgaGVhZF9lbnRpbmRleF9oaXQgPSBjbGllbnQudHJhY2VfbGluZShlbmVteSwgZXgsIGV5LCBleiwgaHgsIGh5LCBoeikKICAgICAgICBpZiBoZWFkX2VudGluZGV4X2hpdCA9PSBsb2NhbF9wbGF5ZXIgb3IgaGVhZF9mcmFjdGlvbiA9PSAxIHRoZW4gcmV0dXJuIHRydWUgZWxzZSByZXR1cm4gZmFsc2UgZW5kCiAgICBlbmQKfQoKbG9jYWwgbGVnc1NhdmVkID0gZmFsc2UKbG9jYWwgbGVnc1R5cGVzID0ge1sxXSA9ICJPZmYiLCBbMl0gPSAiQWx3YXlzIHNsaWRlIiwgWzNdID0gIk5ldmVyIHNsaWRlIn0KbG9jYWwgZ3JvdW5kX3RpY2tzID0gMApjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCJwcmVfcmVuZGVyIiwgZnVuY3Rpb24oKQogICAgaWYgbm90IHVpLmdldChhbmltYXRpb25zRW5hYmxlZCkgdGhlbgogICAgICAgIHJldHVybgogICAgZW5kCgogICAgaWYgbm90IGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkgdGhlbiByZXR1cm4gZW5kCiAgICBsb2NhbCBmbGFncyA9IGVudGl0eS5nZXRfcHJvcChlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpLCAibV9mRmxhZ3MiKQogICAgZ3JvdW5kX3RpY2tzID0gYml0LmJhbmQoZmxhZ3MsIDEpID09IDAgYW5kIDAgb3IgKGdyb3VuZF90aWNrcyA8IDUgYW5kIGdyb3VuZF90aWNrcyArIDEgb3IgZ3JvdW5kX3RpY2tzKQoKICAgIGlmIGZ1bmMudGFibGVfY29udGFpbnModWkuZ2V0KGFuaW1hdGlvbnMpLCAiU3RhdGljIGxlZ3MiKSB0aGVuCiAgICAgICAgZW50aXR5LnNldF9wcm9wKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCksICJtX2ZsUG9zZVBhcmFtZXRlciIsIDEsIDYpIAogICAgZW5kCgogICAgaWYgZnVuYy50YWJsZV9jb250YWlucyh1aS5nZXQoYW5pbWF0aW9ucyksICJLaW5ndXJ1IikgdGhlbgogICAgICAgIGVudGl0eS5zZXRfcHJvcChlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpLCAibV9mbFBvc2VQYXJhbWV0ZXIiLCBtYXRoLnJhbmRvbSgwLCAxMCkvMTAsIDMpCiAgICAgICAgZW50aXR5LnNldF9wcm9wKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCksICJtX2ZsUG9zZVBhcmFtZXRlciIsIG1hdGgucmFuZG9tKDAsIDEwKS8xMCwgNykKICAgICAgICBlbnRpdHkuc2V0X3Byb3AoZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSwgIm1fZmxQb3NlUGFyYW1ldGVyIiwgbWF0aC5yYW5kb20oMCwgMTApLzEwLCA2KQogICAgZW5kCgogICAgaWYgZnVuYy50YWJsZV9jb250YWlucyh1aS5nZXQoYW5pbWF0aW9ucyksICJMZWcgZnVja2VyIikgdGhlbgogICAgICAgIGlmIG5vdCBsZWdzU2F2ZWQgdGhlbgogICAgICAgICAgICBsZWdzU2F2ZWQgPSB1aS5nZXQocmVmcy5sZWdNb3ZlbWVudCkKICAgICAgICBlbmQKICAgICAgICB1aS5zZXRfdmlzaWJsZShyZWZzLmxlZ01vdmVtZW50LCBmYWxzZSkKICAgICAgICBpZiBmdW5jLnRhYmxlX2NvbnRhaW5zKHVpLmdldChhbmltYXRpb25zKSwgIkxlZyBmdWNrZXIiKSB0aGVuCiAgICAgICAgICAgIHVpLnNldChyZWZzLmxlZ01vdmVtZW50LCBsZWdzVHlwZXNbbWF0aC5yYW5kb20oMSwgMyldKQogICAgICAgICAgICBlbnRpdHkuc2V0X3Byb3AoZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSwgIm1fZmxQb3NlUGFyYW1ldGVyIiwgOSwgIDApCiAgICAgICAgZW5kCiAgICBlbHNlaWYgKGxlZ3NTYXZlZCA9PSAiT2ZmIiBvciBsZWdzU2F2ZWQgPT0gIkFsd2F5cyBzbGlkZSIgb3IgbGVnc1NhdmVkID09ICJOZXZlciBzbGlkZSIpIHRoZW4KICAgICAgICB1aS5zZXRfdmlzaWJsZShyZWZzLmxlZ01vdmVtZW50LCB0cnVlKQogICAgICAgIHVpLnNldChyZWZzLmxlZ01vdmVtZW50LCBsZWdzU2F2ZWQpCiAgICAgICAgbGVnc1NhdmVkID0gZmFsc2UKICAgIGVuZAoKICAgIGlmIGZ1bmMudGFibGVfY29udGFpbnModWkuZ2V0KGFuaW1hdGlvbnMpLCAiMCBwaXRjaCBvbiBsYW5kaW5nIikgdGhlbgogICAgICAgIGdyb3VuZF90aWNrcyA9IGJpdC5iYW5kKGZsYWdzLCAxKSA9PSAxIGFuZCBncm91bmRfdGlja3MgKyAxIG9yIDAKCiAgICAgICAgaWYgZ3JvdW5kX3RpY2tzID4gMjAgYW5kIGdyb3VuZF90aWNrcyA8IDE1MCB0aGVuCiAgICAgICAgICAgIGVudGl0eS5zZXRfcHJvcChlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpLCAibV9mbFBvc2VQYXJhbWV0ZXIiLCAwLjUsIDEyKQogICAgICAgIGVuZAogICAgZW5kCgogICAgaWYgZnVuYy50YWJsZV9jb250YWlucyh1aS5nZXQoYW5pbWF0aW9ucyksICJNb29ud2FsayIpIHRoZW4KICAgICAgICBpZiBub3QgbGVnc1NhdmVkIHRoZW4KICAgICAgICAgICAgbGVnc1NhdmVkID0gdWkuZ2V0KHJlZnMubGVnTW92ZW1lbnQpCiAgICAgICAgZW5kCiAgICAgICAgdWkuc2V0X3Zpc2libGUocmVmcy5sZWdNb3ZlbWVudCwgZmFsc2UpCiAgICAgICAgZW50aXR5LnNldF9wcm9wKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCksICJtX2ZsUG9zZVBhcmFtZXRlciIsIDAsIDcpCiAgICAgICAgbG9jYWwgbWUgPSAgZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKQogICAgICAgIGxvY2FsIG9uZ3JvdW5kID0gYml0LmJhbmQoZmxhZ3MsIDEpIH49IDAKICAgICAgICB1aS5zZXQocmVmcy5sZWdNb3ZlbWVudCwgIk9mZiIpCiAgICBlbHNlaWYgKGxlZ3NTYXZlZCA9PSAiT2ZmIiBvciBsZWdzU2F2ZWQgPT0gIkFsd2F5cyBzbGlkZSIgb3IgbGVnc1NhdmVkID09ICJOZXZlciBzbGlkZSIpIHRoZW4KICAgICAgICB1aS5zZXRfdmlzaWJsZShyZWZzLmxlZ01vdmVtZW50LCB0cnVlKQogICAgICAgIHVpLnNldChyZWZzLmxlZ01vdmVtZW50LCBsZWdzU2F2ZWQpCiAgICAgICAgbGVnc1NhdmVkID0gZmFsc2UKICAgIGVuZAplbmQpCgoKaW1wb3J0X2J0biA9IHVpLm5ld19idXR0b24oIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJJbXBvcnQgc2V0dGluZ3MiLCBmdW5jdGlvbigpIGltcG9ydChjbGlwYm9hcmQuZ2V0KCkpIGVuZCkKZXhwb3J0X2J0biA9IHVpLm5ld19idXR0b24oIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJFeHBvcnQgc2V0dGluZ3MiLCBmdW5jdGlvbigpIAogICAgbG9jYWwgY29kZSA9IHt7fX0KCiAgICBmb3IgaSwgaW50ZWdlcnMgaW4gcGFpcnMoZGF0YS5pbnRlZ2VycykgZG8KICAgICAgICB0YWJsZS5pbnNlcnQoY29kZVsxXSwgdWkuZ2V0KGludGVnZXJzKSkKICAgIGVuZAoKICAgIGNsaXBib2FyZC5zZXQoYmFzZTY0LmVuY29kZShqc29uLnN0cmluZ2lmeShjb2RlKSkpCiAgICBjbGllbnQuY29sb3JfbG9nKDEyNCwgMjUyLCAwLCAiZ2xvcmlvc2EgICAgICB+XDAiKQoJY2xpZW50LmNvbG9yX2xvZygyMDAsIDIwMCwgMjAwLCAiIGNvbmZpZyBzdWNjZXNzZnVsbHkgZXhwb3J0ZWQhIikKZW5kKQpkZWZhdWx0X2J0biA9IHVpLm5ld19idXR0b24oIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJEZWZhdWx0IENvbmZpZyIsIGZ1bmN0aW9uKCkgCiAgICBpbXBvcnQoJ1cxc2lTVzRnWVdseUlpeDBjblZsTEhSeWRXVXNkSEoxWlN4bVlXeHpaU3gwY25WbExIUnlkV1VzZEhKMVpTeDBjblZsTEhSeWRXVXNabUZzYzJVc0lrOW1aaUlzSWtSdmQyNGlMQ0pFYjNkdUlpd2lUMlptSWl3aVJHOTNiaUlzSWtSdmQyNGlMQ0pFYjNkdUlpd2lSRzkzYmlJc0lrUnZkMjRpTENKUFptWWlMREFzTUN3d0xEQXNNQ3d3TERBc01Dd3dMREFzSWt4dlkyRnNJSFpwWlhjaUxDSk1iMk5oYkNCMmFXVjNJaXdpUVhRZ2RHRnlaMlYwY3lJc0lreHZZMkZzSUhacFpYY2lMQ0pCZENCMFlYSm5aWFJ6SWl3aVFYUWdkR0Z5WjJWMGN5SXNJa0YwSUhSaGNtZGxkSE1pTENKQmRDQjBZWEpuWlhSeklpd2lRWFFnZEdGeVoyVjBjeUlzSWt4dlkyRnNJSFpwWlhjaUxDSlBabVlpTENJeE9EQWlMQ0l4T0RBaUxDSlBabVlpTENJeE9EQWlMQ0l4T0RBaUxDSXhPREFpTENJeE9EQWlMQ0l4T0RBaUxDSlBabVlpTERBc0xUSTJMREFzTUN3dE16WXNNQ3d5T1N3dE1qZ3NNQ3d3TERBc016QXNNQ3d3TERJNExEQXNMVEl5TERReUxEQXNNQ3d3TERBc01Dd3dMREFzTUN3M0xEQXNNQ3d3TENKUFptWWlMQ0pFWld4aGVTSXNJa1JsYkdGNUlpd2lUMlptSWl3aVJHVnNZWGtpTENKRVpXeGhlU0lzSWtSbGJHRjVJaXdpUkdWc1lYa2lMQ0pFWld4aGVTSXNJazltWmlJc01Dd3RNek1zTFRNekxEQXNMVFV5TEMwek9Dd3RNalFzTFRNMUxDMHpNaXd3TERBc05ESXNORFFzTUN3ME1pd3pNaXd6TXl3eU5Dd3pOaXd3TERBc01Dd3dMREFzTUN3d0xEQXNNQ3d3TERBc01pdzJMRGNzTWl3MExEY3NPQ3cwTERZc01pd2lUMlptSWl3aVQyWm1JaXdpVDJabUlpd2lUMlptSWl3aVQyWm1JaXdpVDJabUlpd2lUMlptSWl3aVQyWm1JaXdpVDJabUlpd2lUMlptSWl3d0xEQXNNQ3d3TERBc01Dd3dMREFzTUN3d0xHWmhiSE5sTEdaaGJITmxMR1poYkhObExHWmhiSE5sTEdaaGJITmxMR1poYkhObExHWmhiSE5sTEdaaGJITmxMR1poYkhObExHWmhiSE5sTEdaaGJITmxMR1poYkhObExHWmhiSE5sTEdaaGJITmxMSFJ5ZFdVc2RISjFaU3htWVd4elpTeG1ZV3h6WlN4bVlXeHpaU3htWVd4elpTd2lUMlptSWl3aVJHOTNiaUlzSWtSdmQyNGlMQ0pQWm1ZaUxDSkViM2R1SWl3aVJHOTNiaUlzSWtSdmQyNGlMQ0pFYjNkdUlpd2lSRzkzYmlJc0lrOW1aaUlzTVN3d0xEQXNNQ3d0T0Rrc0xUZzVMQzAwTVN3dE9Ea3NNQ3d3TERFc01Dd3dMREFzTFRnNUxDMDRPU3d0TkRFc0xUZzVMREFzTUN3aU1UZ3dJaXdpVTNCcGJpSXNJbE53YVc0aUxDSXhPREFpTENKVGNHbHVJaXdpVTNCcGJpSXNJbE53YVc0aUxDSlRjR2x1SWl3aVUybGtaWGRoZVhNaUxDSXhPREFpTERFc01Dd3dMREFzTFRnNUxDMDRPU3d0TkRFc0xUZzVMREFzTUN4MGNuVmxMSFJ5ZFdVc2RISjFaU3g3ZlN4N2ZTeG1ZV3h6WlN4bVlXeHpaU3htWVd4elpTeG1ZV3h6WlN4bVlXeHpaVjFkJykKZW5kKQoKY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygncGFpbnRfdWknLCBmdW5jdGlvbigpCiAgICBpZiBlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpID09IG5pbCB0aGVuIGNoZWtlZF90aWNrcyA9IDAgZW5kCgogICAgdWkuc2V0X3Zpc2libGUoZXhwb3J0X2J0biwgdWkuZ2V0KGN1cnJlbnRfdGFiKSA9PSAnQ29uZmlnJykKICAgIHVpLnNldF92aXNpYmxlKGltcG9ydF9idG4sIHVpLmdldChjdXJyZW50X3RhYikgPT0gJ0NvbmZpZycpCiAgICB1aS5zZXRfdmlzaWJsZShkZWZhdWx0X2J0biwgdWkuZ2V0KGN1cnJlbnRfdGFiKSA9PSAnQ29uZmlnJykKZW5kKQoKdWkuc2V0X2NhbGxiYWNrKGNvbnNvbGVfZmlsdGVyLCBmdW5jdGlvbigpCiAgICBjdmFyLmNvbl9maWx0ZXJfdGV4dDpzZXRfc3RyaW5nKCJjb29sIHRleHQiKQogICAgY3Zhci5jb25fZmlsdGVyX2VuYWJsZTpzZXRfaW50KDEpCmVuZCkKCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCgoKbG9jYWwgZnVuY3Rpb24gaXNfdnVsbmVyYWJsZSgpCiAgICBmb3IgXywgdiBpbiBpcGFpcnMoZW50aXR5LmdldF9wbGF5ZXJzKHRydWUpKSBkbwogICAgICAgIGxvY2FsIGZsYWdzID0gKGVudGl0eS5nZXRfZXNwX2RhdGEodikpLmZsYWdzCgogICAgICAgIGlmIGJpdC5iYW5kKGZsYWdzLCBiaXQubHNoaWZ0KDEsIDExKSkgfj0gMCB0aGVuCiAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICByZXR1cm4gZmFsc2UKZW5kCgpsb2NhbCBhdXRvX2Rpc2NoYXJnZSA9IGZ1bmN0aW9uKGNtZCkKICAgIGlmIG5vdCB1aS5nZXQodW5zYWZlY2hhcmhnZSkgb3IgCiAgICAoZW50aXR5LmdldF9jbGFzc25hbWUoZW50aXR5LmdldF9wbGF5ZXJfd2VhcG9uKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkpKSB+PSAiQ1dlYXBvblNTRzA4IiBhbmQgZW50aXR5LmdldF9jbGFzc25hbWUoZW50aXR5LmdldF9wbGF5ZXJfd2VhcG9uKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkpKSB+PSAiQ1dlYXBvbkFXUCIpIHRoZW4gcmV0dXJuIGVuZAoKICAgIGxvY2FsIHZlbF8yID0gbWF0aC5mbG9vcihlbnRpdHkuZ2V0X3Byb3AoZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSwgIm1fdmVjVmVsb2NpdHlbMl0iKSkKCiAgICBpZiBpc192dWxuZXJhYmxlKCkgYW5kIHZlbF8yID4gMTggdGhlbgogICAgICAgIGNtZC5pbl9qdW1wID0gZmFsc2UKICAgICAgICBjbWQuZGlzY2hhcmdlX3BlbmRpbmcgPSB0cnVlCiAgICBlbmQKZW5kCgpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCJzZXR1cF9jb21tYW5kIiwgZnVuY3Rpb24oY21kKQogICAgYXV0b19kaXNjaGFyZ2UoY21kKQplbmQpCgoKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpsb2NhbCBjb25zb2xlX2NvbW1hbmQgPSBjbGllbnQuZXhlYwpsb2NhbCBjbGllbnRfdXNlcmlkX3RvX2VudGluZGV4ID0gY2xpZW50LnVzZXJpZF90b19lbnRpbmRleApsb2NhbCBjbGllbnRfZHJhd19kZWJ1Z190ZXh0ID0gY2xpZW50LmRyYXdfZGVidWdfdGV4dApsb2NhbCBjbGllbnRfZHJhd19oaXRib3hlcyA9IGNsaWVudC5kcmF3X2hpdGJveGVzCmxvY2FsIGNsaWVudF9yYW5kb21faW50ID0gY2xpZW50LnJhbmRvbV9pbnQKbG9jYWwgY2xpZW50X3JhbmRvbV9mbG9hdCA9IGNsaWVudC5yYW5kb21fZmxvYXQKbG9jYWwgY2xpZW50X2RyYXdfdGV4dCA9IGNsaWVudC5kcmF3X3RleHQKbG9jYWwgY2xpZW50X2RyYXdfcmVjdGFuZ2xlID0gY2xpZW50LmRyYXdfcmVjdGFuZ2xlCmxvY2FsIGNsaWVudF9kcmF3X2xpbmUgPSBjbGllbnQuZHJhd19saW5lCmxvY2FsIGNsaWVudF93b3JsZF90b19zY3JlZW4gPSBjbGllbnQud29ybGRfdG9fc2NyZWVuCmxvY2FsIGNsaWVudF9pc19sb2NhbF9wbGF5ZXIgPSBjbGllbnQuaXNfbG9jYWxfcGxheWVyCmxvY2FsIGNsaWVudF9kZWxheV9jYWxsID0gY2xpZW50LmRlbGF5X2NhbGwKbG9jYWwgY2xhdGVuY3kgPSBjbGllbnQubGF0ZW5jeQpsb2NhbCBpbmRpY2F0b3IgPSBjbGllbnQuZHJhd19pbmRpY2F0b3IKbG9jYWwgY2xpZW50X3Zpc2libGUgPSBjbGllbnQudmlzaWJsZQpsb2NhbCBjdmFyX2lzID0gY2xpZW50LmdldF9jdmFyCmxvY2FsIGN2YXIgPSBjbGllbnQuc2V0X2N2YXIKbG9jYWwgZW50aXR5X2dldF9sb2NhbF9wbGF5ZXIsIGVudGl0eV9pc19lbmVteSwgZW50aXR5X2hpdGJveF9wb3NpdGlvbiwgZW50aXR5X2dldF9wbGF5ZXJfbmFtZSwgZW50aXR5X2dldF9zdGVhbTY0LCBlbnRpdHlfZ2V0X2JvdW5kaW5nX2JveCwgZW50aXR5X2dldF9hbGwsIGVudGl0eV9zZXRfcHJvcCA9IGVudGl0eS5nZXRfbG9jYWxfcGxheWVyLCBlbnRpdHkuaXNfZW5lbXksIGVudGl0eS5oaXRib3hfcG9zaXRpb24sIGVudGl0eS5nZXRfcGxheWVyX25hbWUsIGVudGl0eS5nZXRfc3RlYW02NCwgZW50aXR5LmdldF9ib3VuZGluZ19ib3gsIGVudGl0eS5nZXRfYWxsLCBlbnRpdHkuc2V0X3Byb3AgCgoKbG9jYWwgZW50aXR5X2dldF9sb2NhbF9wbGF5ZXIgPSBlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcgpsb2NhbCBlbnRpdHlfZ2V0X2FsbCA9IGVudGl0eS5nZXRfYWxsCmxvY2FsIGVudGl0eV9nZXRfcGxheWVycyA9IGVudGl0eS5nZXRfcGxheWVycwpsb2NhbCBlbnRpdHlfZ2V0X2NsYXNzbmFtZSA9IGVudGl0eS5nZXRfY2xhc3NuYW1lCmxvY2FsIGVudGl0eV9zZXRfcHJvcCA9IGVudGl0eS5zZXRfcHJvcApsb2NhbCBlbnRpdHlfZ2V0X3Byb3AgPSBlbnRpdHkuZ2V0X3Byb3AKbG9jYWwgZW50aXR5X2lzX2VuZW15ID0gZW50aXR5LmlzX2VuZW15CmxvY2FsIGVudGl0eV9nZXRfcGxheWVyX25hbWUgPSBlbnRpdHkuZ2V0X3BsYXllcl9uYW1lCmxvY2FsIGVudGl0eV9nZXRfcGxheWVyX3dlYXBvbiA9IGVudGl0eS5nZXRfcGxheWVyX3dlYXBvbgpsb2NhbCBkZWxheV90aW1lID0gMApsb2NhbCBjbGllbnRfZHJhd19yZWN0YW5nbGUgPSBjbGllbnQuZHJhd19yZWN0YW5nbGUKbG9jYWwgY2xpZW50X2RyYXdfdGV4dCA9IGNsaWVudC5kcmF3X3RleHQKbG9jYWwgdWlfbmV3X2NoZWNrYm94ID0gdWkubmV3X2NoZWNrYm94CmxvY2FsIHVpX25ld19jb21ib2JveCA9IHVpLm5ld19jb21ib2JveApsb2NhbCB1aV9nZXQgPSB1aS5nZXQKbG9jYWwgbWF0aF9mbW9kID0gbWF0aC5mbW9kCmxvY2FsIHNjcmVlbl93aWR0aCwgc2NyZWVuX2hlaWdodCA9IGNsaWVudC5zY3JlZW5fc2l6ZSgpCgpsb2NhbCB0b19udW1iZXIgPSB0b251bWJlcgpsb2NhbCBtYXRoX2Zsb29yID0gbWF0aC5mbG9vcgpsb2NhbCBtYXRoX3JhbmRvbSA9IG1hdGgucmFuZG9tCmxvY2FsIHRhYmxlX2luc2VydCA9IHRhYmxlLmluc2VydApsb2NhbCB0YWJsZV9yZW1vdmUgPSB0YWJsZS5yZW1vdmUKbG9jYWwgdGFibGVfc2l6ZSA9IHRhYmxlLmdldG4KbG9jYWwgc3RyaW5nX2Zvcm1hdCA9IHN0cmluZy5mb3JtYXQKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLU1lbnUgRWxlbWVudHMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLU1lbnUgRWxlbWVudHMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKbG9jYWwgY2hhdF9zcGFtbWVyID0ge30KCmNoYXRfc3BhbW1lci5waHJhc2VzID0gewogICAga2lsbCA9IHsKICAgICAgICB7ItCc0JDQnNCQINCi0JLQntCvINCS0KvQldCR0JDQndCQINCf0JjQlNCe0KDQkNChIiwgItCy0LfRj9C7INCyINGA0L7RgiDQvNC+0Lkg0LHQvtC70YzRiNC+0Lkg0LHQvtC70YIifSwKICAgICAgICB7ItC+0L/Rj9GC0Ywg0LzQuNGB0L3Rg9C70LAg0LTQvtC70LHQsNC10LHQuNC90LAsINC/0L7Qv9Cw0LTQuCDRhdC+0YLRjCDRgNCw0LcifSwKICAgICAgICB7ItC/0LjQt9C00LXRhiDRgtGLINC/0LDQtNCw0LXRiNGMINC+0YIg0LzQtdC90Y8iLCAi0LrRgNGD0YLRi9GI0LrQsCIsICLQu9C40LLQvdC4INC90LDRhdGD0Lkg0YEg0YHQtdGA0LLQtdGA0LAifSwKICAgICAgICB7ItC+0L/Rj9GC0Ywg0LIg0LzQvtC40YUg0L3QvtCz0LDRhSIsICLQsNCw0YjQutC4INCyINCz0LvQvtGA0LjQvtC30LUg0LHRg9GB0YLRj9GCIn0sCiAgICAgICAgeyLQtNC+0LvQsdC+0LXQsSDQvtC/0Y/RgtGMINC80LjRgdGB0L3Rg9C7Iiwi0YEg0LTQtdGE0L7Qu9GCINC/0YDQtdGB0LXRgtC+0Lwg0LXQsdGDINGC0LXQsdGPINC60LvQvtC/0LAg0LXQsdCw0L3QvtCz0L4ifSwKICAgICAgICB7IiAkJCQgR0xPUklPU0EgJCQkIn0sCiAgICAgICAgeyLQutGD0L/QuCDQuCDQvdC1INC/0L7Qt9C+0YDRjNGB0Y8g0YjQsNC60LDQuyDQtdCx0LDQvdGL0LkgLSBuZXZlcmxvc2UuY2MvbWFya2V0L2l0ZW0/aWQ9ZnNCR29RIn0sCiAgICAgICAgeyLRh9C1INC10LHQsNC90YvQuSDRhdCw0Ycg0LjQtNC4INGA0LDQsdC+0YLQsNC5INCyINC00L7RgdGC0LDQstC60LUiLCAi0LAg0YLQviDQu9GD0LDRiNC60YMg0L3QtSDQutGD0L/QuNC7LCDQutC+0L3RhNC40LMg0L3QtSDQutGD0L/QuNC7LCDQsCDRjyDRgtC+INCz0L7Qu9C+0LTQvdGL0LkifSwKICAgICAgICB7ItGH0LvQtdC90Y/QutGDINC/0L7RgdC+0YHQsNC7IiwgItC+0L/Rj9GC0YwiLCAi0LXQsdCw0L3QsNGCINC60L7Qs9C00LAg0YPQttC1INC40LPRgNCw0YLRjCDQvdCw0YPRh9C40YjRjNGB0Y8ifSwKICAgICAgICB7Ilt0ZWRkeV0gc3RheSB3aXRoIHVzIC0gZ2xvcmlvc2EgIn0sCiAgICAgICAgeyLQoSDQnSDQniDQkiDQkCDQkiDQqyDQqCDQlSDQmyDQnyDQniDQkSDQlSDQlCDQmCDQoiDQlSDQmyDQgSDQnCJ9LAogICAgICAgIHsiMSDQotCV0JHQlSDQltCY0KDQndCr0Jkg0KXQkNCnIn0sCiAgICB9LAoKICAgIGRlYXRoID0gewogICAgICAgIHsidCxrZnkgcmp5eHR5c3EgdmZubSBuZGouIHQsZmsiLCAi0LXQsdC70LDQvSDQutC+0L3Rh9C10L3Ri9C5In0sCiAgICAgICAgeyLRiNCw0LrQsNC7INC10LHQsNC90YvQuSIsICLQv9C+0LLQtdC30LvQviDRh9GC0L4g0YEg0LvQtdGB0LAg0LLRi9C70LXQtyDQuCDRg9Cx0LjQuyDQvNC10L3RjyJ9LAogICAgICAgIHsi0YXQsNGHINC10LHQsNC90YvQuSIsICLQvdC1INC/0L7QvdC40LzQsNC10YIiLCAi0YfRgtC+INC10LzRgyDQv9C+0LLQtdC30LvQviDQutC+0L3QvdC60YDQtdGC0L3QviJ9LAogICAgICAgIHsi0LDRhdGD0LXRgtGMIiwgItCwINGH0LjRgtGD0LvRjyDRgtC+INC00LDQtdGCINCx0LDQt9GDIn0KICAgIH0KfQoKY2hhdF9zcGFtbWVyLnBocmFzZV9jb3VudCA9IHsKICAgIGRlYXRoID0gMCwKICAgIGtpbGwgPSAwLAp9CgpjaGF0X3NwYW1tZXIuaGFuZGxlID0gZnVuY3Rpb24oZSkKICAgIGlmIG5vdCB1aS5nZXQodHJhc2hUYWxrKSB0aGVuCiAgICAgICAgcmV0dXJuCiAgICBlbmQKCiAgICBsb2NhbCBwbGF5ZXIgPSBlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpCgogICAgaWYgcGxheWVyID09IG5pbCB0aGVuCiAgICAgICAgcmV0dXJuCiAgICBlbmQKCiAgICBsb2NhbCB2aWN0aW0gPSBjbGllbnQudXNlcmlkX3RvX2VudGluZGV4KGUudXNlcmlkKQoKICAgIGlmIHZpY3RpbSA9PSBuaWwgdGhlbgogICAgICAgIHJldHVybgogICAgZW5kCgogICAgbG9jYWwgYXR0YWNrZXIgPSBjbGllbnQudXNlcmlkX3RvX2VudGluZGV4KGUuYXR0YWNrZXIpCgogICAgaWYgYXR0YWNrZXIgPT0gbmlsIHRoZW4KICAgICAgICByZXR1cm4KICAgIGVuZAoKICAgIGNoYXRfc3BhbW1lci5waHJhc2VfY291bnQuZGVhdGggPSBjaGF0X3NwYW1tZXIucGhyYXNlX2NvdW50LmRlYXRoICsgMQogICAgaWYgY2hhdF9zcGFtbWVyLnBocmFzZV9jb3VudC5kZWF0aCA+ICNjaGF0X3NwYW1tZXIucGhyYXNlcy5kZWF0aCB0aGVuCiAgICAgICAgY2hhdF9zcGFtbWVyLnBocmFzZV9jb3VudC5kZWF0aCA9IDEKICAgIGVuZAoKICAgIGNoYXRfc3BhbW1lci5waHJhc2VfY291bnQua2lsbCA9IGNoYXRfc3BhbW1lci5waHJhc2VfY291bnQua2lsbCArIDEKICAgIGlmIGNoYXRfc3BhbW1lci5waHJhc2VfY291bnQua2lsbCA+ICNjaGF0X3NwYW1tZXIucGhyYXNlcy5raWxsIHRoZW4KICAgICAgICBjaGF0X3NwYW1tZXIucGhyYXNlX2NvdW50LmtpbGwgPSAxCiAgICBlbmQKCiAgICBsb2NhbCBwaHJhc2UgPSB7CiAgICAgICAgZGVhdGggPSBjaGF0X3NwYW1tZXIucGhyYXNlcy5kZWF0aFtjaGF0X3NwYW1tZXIucGhyYXNlX2NvdW50LmRlYXRoXSwKICAgICAgICBraWxsID0gY2hhdF9zcGFtbWVyLnBocmFzZXMua2lsbFtjaGF0X3NwYW1tZXIucGhyYXNlX2NvdW50LmtpbGxdLAogICAgfQoKICAgIGlmIGZ1bmMuaW5jbHVkZXModWkuZ2V0KHRyYXNoVGFsa192aWJvciksICJLaWxsIikgdGhlbgogICAgICAgIGlmIGF0dGFja2VyID09IHBsYXllciBhbmQgdmljdGltIH49IHBsYXllciB0aGVuCiAgICAgICAgICAgIGZvciBpID0gMSwgI3BocmFzZS5raWxsIGRvCiAgICAgICAgICAgICAgICBjbGllbnQuZGVsYXlfY2FsbChpKjIsIGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBjbGllbnQuZXhlYygoInNheSAlcyIpOmZvcm1hdChwaHJhc2Uua2lsbFtpXSkpCiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCgogICAgaWYgZnVuYy5pbmNsdWRlcyh1aS5nZXQodHJhc2hUYWxrX3ZpYm9yKSwgIkRlYXRoIikgdGhlbgogICAgICAgIGlmIGF0dGFja2VyIH49IHBsYXllciBhbmQgdmljdGltID09IHBsYXllciB0aGVuCiAgICAgICAgICAgIGZvciBpID0gMSwgI3BocmFzZS5kZWF0aCBkbwogICAgICAgICAgICAgICAgY2xpZW50LmRlbGF5X2NhbGwoaSoyLCBmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgY2xpZW50LmV4ZWMoKCJzYXkgJXMiKTpmb3JtYXQocGhyYXNlLmRlYXRoW2ldKSkKICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCgpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCdwbGF5ZXJfZGVhdGgnLCBjaGF0X3NwYW1tZXIuaGFuZGxlKQoKCgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoKLS1sZWdicmVha2VycwotLS0gQHJlZ2lvbjogcHJvY2VzcyBtYWluIHdvcmsKLS0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygic2V0dXBfY29tbWFuZCIsIGZ1bmN0aW9uKCkKICAgIGlmIGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkgPT0gbmlsIHRoZW4gcmV0dXJuIGVuZAoKICAgIGdhbWVydWxlc3Byb3h5ID0gZW50aXR5LmdldF9hbGwoIkNDU0dhbWVSdWxlc1Byb3h5IilbMV0KICAgIHdhcm11cCA9IGVudGl0eS5nZXRfcHJvcChnYW1lcnVsZXNwcm94eSwibV9iV2FybXVwUGVyaW9kIikKICAgIC0tcHJpbnQod2FybXVwKQogIAogICAgaWYgdWkuZ2V0KHNldHRpbmdzLndhcm11cF9kaXNhYmxlcikgYW5kIHdhcm11cCA9PSAxIHRoZW4KICAgICAgICB1aS5zZXQocmVmZXJlbmNlLmJvZHlfeWF3WzFdLCAnT2ZmJykKICAgICAgICB1aS5zZXQocmVmZXJlbmNlLnlhd1syXSwgbWF0aC5yYW5kb20oLTE4MCwgMTgwKSkKICAgICAgICB1aS5zZXQocmVmZXJlbmNlLnlhd19qaXR0ZXJbMV0sICdSYW5kb20nKQogICAgICAgIHVpLnNldChyZWZlcmVuY2UucGl0Y2hbMV0sICdSYW5kb20nKQogICAgZW5kCmVuZCkKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCmxvY2FsIGNsYW50YWdfYW5pbSA9IGZ1bmN0aW9uKHRleHQsIGluZGljZXMpCiAgICBsb2NhbCB0ZXh0X2FuaW0gPSAiICAgICAgICAgICAgICAgIiAuLiB0ZXh0IC4uICAgICAgICAgICAgICAgICAgICAgICAiIiAKICAgIGxvY2FsIHRpY2tpbnRlcnZhbCA9IGdsb2JhbHMudGlja2ludGVydmFsKCkKICAgIGxvY2FsIHRpY2tjb3VudCA9IGdsb2JhbHMudGlja2NvdW50KCkgKyBmdW5jLnRpbWVfdG9fdGlja3MoY2xpZW50LmxhdGVuY3koKSkKICAgIGxvY2FsIGkgPSB0aWNrY291bnQgLyBmdW5jLnRpbWVfdG9fdGlja3MoMC4yKQogICAgaSA9IG1hdGguZmxvb3IoaSAlICNpbmRpY2VzKQogICAgaSA9IGluZGljZXNbaSsxXSsxCiAgICByZXR1cm4gc3RyaW5nLnN1Yih0ZXh0X2FuaW0sIGksIGkrMTUpCmVuZAoKbG9jYWwgY2xhbnRhZyA9IHsKICAgIHN0ZWFtID0gc3RlYW13b3Jrcy5JU3RlYW1GcmllbmRzLAogICAgcHJldl9jdCA9ICIiLAogICAgb3JpZ19jdCA9ICIiLAogICAgZW5iID0gZmFsc2UsCn0KCmxvY2FsIGZ1bmN0aW9uIGdldF9vcmlnaW5hbF9jbGFudGFnKCkKCiAgICBsb2NhbCBjbGFuX2NvdW50ID0gY2xhbnRhZy5zdGVhbS5HZXRDbGFuQ291bnQoKQogICAgZm9yIGkgPSAwLCBjbGFuX2NvdW50IGRvIAogICAgICAgIGxvY2FsIGdyb3VwX2lkID0gY2xhbnRhZy5zdGVhbS5HZXRDbGFuQnlJbmRleChpKQogICAgICAgIGlmIGdyb3VwX2lkID09IGNsYW5faWQgdGhlbgogICAgICAgICAgICByZXR1cm4gY2xhbnRhZy5zdGVhbS5HZXRDbGFuVGFnKGdyb3VwX2lkKQogICAgICAgIGVuZAogICAgZW5kCmVuZAoKbG9jYWwgZnVuY3Rpb24gY2xhbnRhZ19zZXQoKQogICAgbG9jYWwgbHVhX25hbWUgPSAiZ2xvcmlvc2EiCiAgICBpZiB1aS5nZXQoY2xhblRhZykgdGhlbgogICAgICAgIGlmIHVpLmdldCh1aS5yZWZlcmVuY2UoIk1pc2MiLCAiTWlzY2VsbGFuZW91cyIsICJDbGFuIHRhZyBzcGFtbWVyIikpIHRoZW4gcmV0dXJuIGVuZAoKCQlsb2NhbCBjbGFuX3RhZyA9IGNsYW50YWdfYW5pbShsdWFfbmFtZSwgezAsIDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTEsIDExLCAxMSwgMTIsIDEzLCAxNCwgMTUsIDE2LCAxNywgMTgsIDE5LCAyMCwgMjEsIDIyLCAyMywgMjQsIDI1fSkKCiAgICAgICAgaWYgZW50aXR5LmdldF9wcm9wKGVudGl0eS5nZXRfZ2FtZV9ydWxlcygpLCAibV9nYW1lUGhhc2UiKSA9PSA1IHRoZW4KICAgICAgICAgICAgY2xhbl90YWcgPSBjbGFudGFnX2FuaW0oJ2dsb3Jpb3NhJywgezEwfSkKICAgICAgICAgICAgY2xpZW50LnNldF9jbGFuX3RhZyhjbGFuX3RhZykKICAgICAgICBlbHNlaWYgZW50aXR5LmdldF9wcm9wKGVudGl0eS5nZXRfZ2FtZV9ydWxlcygpLCAibV90aW1lVW50aWxOZXh0UGhhc2VTdGFydHMiKSB+PSAwIHRoZW4KICAgICAgICAgICAgY2xhbl90YWcgPSBjbGFudGFnX2FuaW0oJ2dsb3Jpb3NhJywgezEwfSkKICAgICAgICAgICAgY2xpZW50LnNldF9jbGFuX3RhZyhjbGFuX3RhZykKICAgICAgICBlbHNlaWYgY2xhbl90YWcgfj0gY2xhbnRhZy5wcmV2X2N0ICB0aGVuCiAgICAgICAgICAgIGNsaWVudC5zZXRfY2xhbl90YWcoY2xhbl90YWcpCiAgICAgICAgZW5kCgogICAgICAgIGNsYW50YWcucHJldl9jdCA9IGNsYW5fdGFnCiAgICAgICAgY2xhbnRhZy5lbmIgPSB0cnVlCiAgICBlbHNlaWYgY2xhbnRhZy5lbmIgPT0gdHJ1ZSB0aGVuCiAgICAgICAgY2xpZW50LnNldF9jbGFuX3RhZyhnZXRfb3JpZ2luYWxfY2xhbnRhZygpKQogICAgICAgIGNsYW50YWcuZW5iID0gZmFsc2UKICAgIGVuZAplbmQKCmNsYW50YWcucGFpbnQgPSBmdW5jdGlvbigpCiAgICBpZiBlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpIH49IG5pbCB0aGVuCiAgICAgICAgaWYgZ2xvYmFscy50aWNrY291bnQoKSAlIDIgPT0gMCB0aGVuCiAgICAgICAgICAgIGNsYW50YWdfc2V0KCkKICAgICAgICBlbmQKICAgIGVuZAplbmQKCmNsYW50YWcucnVuX2NvbW1hbmQgPSBmdW5jdGlvbihlKQogICAgaWYgZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSB+PSBuaWwgdGhlbiAKICAgICAgICBpZiBlLmNob2tlZGNvbW1hbmRzID09IDAgdGhlbgogICAgICAgICAgICBjbGFudGFnX3NldCgpCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCgpjbGFudGFnLnBsYXllcl9jb25uZWN0X2Z1bGwgPSBmdW5jdGlvbihlKQogICAgaWYgY2xpZW50LnVzZXJpZF90b19lbnRpbmRleChlLnVzZXJpZCkgPT0gZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSB0aGVuIAogICAgICAgIGNsYW50YWcub3JpZ19jdCA9IGdldF9vcmlnaW5hbF9jbGFudGFnKCkKICAgIGVuZAplbmQKCmNsYW50YWcuc2h1dGRvd24gPSBmdW5jdGlvbigpCiAgICBjbGllbnQuc2V0X2NsYW5fdGFnKGdldF9vcmlnaW5hbF9jbGFudGFnKCkpCmVuZAoKY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygicGFpbnQiLCBjbGFudGFnLnBhaW50KQpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCJydW5fY29tbWFuZCIsIGNsYW50YWcucnVuX2NvbW1hbmQpCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soInBsYXllcl9jb25uZWN0X2Z1bGwiLCBjbGFudGFnLnBsYXllcl9jb25uZWN0X2Z1bGwpCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soInNodXRkb3duIiwgY2xhbnRhZy5zaHV0ZG93bikKCgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoKbG9jYWwgaGl0Z3JvdXBfbmFtZXMgPSB7ImdlbmVyaWMiLCAiaGVhZCIsICJjaGVzdCIsICJzdG9tYWNoIiwgImxlZnQgYXJtIiwgInJpZ2h0IGFybSIsICJsZWZ0IGxlZyIsICJyaWdodCBsZWciLCAibmVjayIsICI/IiwgImdlYXIifQpsb2NhbCB3ZWFwb25fdG9fdmVyYiA9IHsga25pZmUgPSAnICAgICBLbmlmZWQnLCBoZWdyZW5hZGUgPSAnICAgICBOYWRlZCcsIGluZmVybm8gPSAnICAgICBCdXJuZWQnIH0KCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soJ2FpbV9oaXQnLCBmdW5jdGlvbihlKQoJaWYgbm90IHVpLmdldChtYXN0ZXJfc3dpdGNoKSBvciBlLmlkID09IG5pbCB0aGVuCgkJcmV0dXJuCgllbmQKCglsb2NhbCBncm91cCA9IGhpdGdyb3VwX25hbWVzW2UuaGl0Z3JvdXAgKyAxXSBvciAiPyIKCgkgY2xpZW50LmNvbG9yX2xvZygxMjQsIDI1MiwgMCwgImdsb3Jpb3NhIH5cMCIpCiAgICAgY2xpZW50LmNvbG9yX2xvZygyMDAsIDIwMCwgMjAwLCAiIEhpdFwwIikKCSBjbGllbnQuY29sb3JfbG9nKDEyNCwgMjUyLCAwLCBzdHJpbmcuZm9ybWF0KCIgJXNcMCIsIGVudGl0eS5nZXRfcGxheWVyX25hbWUoZS50YXJnZXQpKSkKCSBjbGllbnQuY29sb3JfbG9nKDIwMCwgMjAwLCAyMDAsICIgaW4gdGhlXDAiKQoJIGNsaWVudC5jb2xvcl9sb2coMTI0LCAyNTIsIDAsIHN0cmluZy5mb3JtYXQoIiAlc1wwIiwgZ3JvdXApKQoJIGNsaWVudC5jb2xvcl9sb2coMjAwLCAyMDAsIDIwMCwgIiBmb3JcMCIpCgkgY2xpZW50LmNvbG9yX2xvZygxMjQsIDI1MiwgMCwgc3RyaW5nLmZvcm1hdCgiICVzXDAiLCBlLmRhbWFnZSkpCgkgY2xpZW50LmNvbG9yX2xvZygyMDAsIDIwMCwgMjAwLCAiIGRhbWFnZVwwIikKCSBjbGllbnQuY29sb3JfbG9nKDIwMCwgMjAwLCAyMDAsICIgKFwwIikKCSBjbGllbnQuY29sb3JfbG9nKDEyNCwgMjUyLCAwLCBzdHJpbmcuZm9ybWF0KCIlc1wwIiwgZW50aXR5LmdldF9wcm9wKGUudGFyZ2V0LCAibV9pSGVhbHRoIikpKQoJIGNsaWVudC5jb2xvcl9sb2coMjAwLCAyMDAsIDIwMCwgIiBoZWFsdGggcmVtYWluaW5nKSIpCgogICAgbG9jYWwgcixnLGIsYSA9IHVpLmdldChjdXJyZW50X2NvbG9yKQogICAgbmV3X25vdGlmeShzdHJpbmcuZm9ybWF0KCJcYUZGRkZGRkZGICAgICBIaXQgXGElcyVzXGFGRkZGRkZGRiBpbiB0aGUgXGElcyVzXGFGRkZGRkZGRiBmb3IgXGElcyVkXGFGRkZGRkZGRiBkYW1hZ2UgKCVkIGhlYWx0aCByZW1haW5pbmcpIiwgcmdiYV90b19oZXgocixnLGIsMjU1KSwgZW50aXR5LmdldF9wbGF5ZXJfbmFtZShlLnRhcmdldCksIHJnYmFfdG9faGV4KHIsZyxiLDI1NSksIGdyb3VwLCByZ2JhX3RvX2hleChyLGcsYiwyNTUpLCBlLmRhbWFnZSwgZW50aXR5LmdldF9wcm9wKGUudGFyZ2V0LCAibV9pSGVhbHRoIikgKSwgcixnLGIsMjU1KQplbmQpCgpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCJhaW1fbWlzcyIsIGZ1bmN0aW9uKGUpCglpZiBub3QgdWkuZ2V0KG1hc3Rlcl9zd2l0Y2gpIHRoZW4KCQlyZXR1cm4KCWVuZAoKCWxvY2FsIGdyb3VwID0gaGl0Z3JvdXBfbmFtZXNbZS5oaXRncm91cCArIDFdIG9yICI/IgoKCSBjbGllbnQuY29sb3JfbG9nKDI1NSwgMCwgMCwgImdsb3Jpb3NhIH5cMCIpCgkgY2xpZW50LmNvbG9yX2xvZygyMDAsIDIwMCwgMjAwLCAiIE1pc3NlZCBzaG90IGluXDAiKQoJIGNsaWVudC5jb2xvcl9sb2coMjU1LCAwLCAwLCBzdHJpbmcuZm9ybWF0KCIgJXNcJ3NcMCIsIGVudGl0eS5nZXRfcGxheWVyX25hbWUoZS50YXJnZXQpKSkKCSBjbGllbnQuY29sb3JfbG9nKDI1NSwgMCwgMCwgc3RyaW5nLmZvcm1hdCgiICVzXDAiLCBncm91cCkpCgkgY2xpZW50LmNvbG9yX2xvZygyMDAsIDIwMCwgMjAwLCAiIGR1ZSB0b1wwIikKCSBjbGllbnQuY29sb3JfbG9nKDI1NSwgMCwgMCwgc3RyaW5nLmZvcm1hdCgiICVzIiwgZS5yZWFzb24pKQoKICAgIGxvY2FsIHIsZyxiLGEgPSB1aS5nZXQoY3VycmVudF9jb2xvcikKICAgIG5ld19ub3RpZnkoc3RyaW5nLmZvcm1hdCgiXGFGRkZGRkZGRiAgICAgTWlzc2VkIFxhJXMlc1xhRkZGRkZGRkYgKFxhJXMlc1xhRkZGRkZGRkYpIGR1ZSB0byBcYSVzJXMiLCByZ2JhX3RvX2hleCgyMTksIDk5LCA5NiwyNTUpLCBlbnRpdHkuZ2V0X3BsYXllcl9uYW1lKGUudGFyZ2V0KSwgcmdiYV90b19oZXgoMjE5LCA5OSwgOTYsMjU1KSwgZ3JvdXAsIHJnYmFfdG9faGV4KDIxOSwgOTksIDk2LDI1NSksIGUucmVhc29uKSwgMjE5LCA5OSwgOTYsMjU1KQplbmQpCgpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCdwbGF5ZXJfaHVydCcsIGZ1bmN0aW9uKGUpCglpZiBub3QgdWkuZ2V0KG1hc3Rlcl9zd2l0Y2gpIHRoZW4KCQlyZXR1cm4KCWVuZAoJCglsb2NhbCBhdHRhY2tlcl9pZCA9IGNsaWVudC51c2VyaWRfdG9fZW50aW5kZXgoZS5hdHRhY2tlcikKCglpZiBhdHRhY2tlcl9pZCA9PSBuaWwgb3IgYXR0YWNrZXJfaWQgfj0gZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSB0aGVuCiAgICAgICAgcmV0dXJuCiAgICBlbmQKCglpZiB3ZWFwb25fdG9fdmVyYltlLndlYXBvbl0gfj0gbmlsIHRoZW4KICAgICAgICBsb2NhbCB0YXJnZXRfaWQgPSBjbGllbnQudXNlcmlkX3RvX2VudGluZGV4KGUudXNlcmlkKQoJCWxvY2FsIHRhcmdldF9uYW1lID0gZW50aXR5LmdldF9wbGF5ZXJfbmFtZSh0YXJnZXRfaWQpCgoJCXByaW50KHN0cmluZy5mb3JtYXQoIiVzICVzIGZvciAlaSBkYW1hZ2UgKCVpIHJlbWFpbmluZykiLCB3ZWFwb25fdG9fdmVyYltlLndlYXBvbl0sIHN0cmluZy5sb3dlcih0YXJnZXRfbmFtZSksIGUuZG1nX2hlYWx0aCwgZS5oZWFsdGgpKQoJCSBjbGllbnQuY29sb3JfbG9nKDEyNCwgMjUyLCAwLCAiZ2xvcmlvc2EgflwwIikKCQkgY2xpZW50LmNvbG9yX2xvZygyMDAsIDIwMCwgMjAwLCBzdHJpbmcuZm9ybWF0KCIgJXNcMCIsIHdlYXBvbl90b192ZXJiW2Uud2VhcG9uXSkpCgkJIGNsaWVudC5jb2xvcl9sb2coMTI0LCAyNTIsIDAsIHN0cmluZy5mb3JtYXQoIiAlc1wwIiwgdGFyZ2V0X25hbWUpKQoJCSBjbGllbnQuY29sb3JfbG9nKDIwMCwgMjAwLCAyMDAsICIgZm9yXDAiKQoJCSBjbGllbnQuY29sb3JfbG9nKDEyNCwgMjUyLCAwLCBzdHJpbmcuZm9ybWF0KCIgJXNcMCIsIGUuZG1nX2hlYWx0aCkpCgkJIGNsaWVudC5jb2xvcl9sb2coMjAwLCAyMDAsIDIwMCwgIiBkYW1hZ2VcMCIpCgkJIGNsaWVudC5jb2xvcl9sb2coMjAwLCAyMDAsIDIwMCwgIiAoXDAiKQoJCSBjbGllbnQuY29sb3JfbG9nKDEyNCwgMjUyLCAwLCBzdHJpbmcuZm9ybWF0KCIlc1wwIiwgZS5oZWFsdGgpKQoJCSBjbGllbnQuY29sb3JfbG9nKDIwMCwgMjAwLCAyMDAsICIgaGVhbHRoIHJlbWFpbmluZykiKQoKICAgICAgICBsb2NhbCByLGcsYixhID0gdWkuZ2V0KGN1cnJlbnRfY29sb3IpCiAgICAgICAgbmV3X25vdGlmeSh3ZWFwb25fdG9fdmVyYltlLndlYXBvbl0uLiIgXGEiLi5yZ2JhX3RvX2hleChyLGcsYixhKS4udGFyZ2V0X25hbWUuLiJcYUZGRkZGRkZGIGZvciIuLiIgXGEiLi5yZ2JhX3RvX2hleChyLGcsYixhKS4uZS5kbWdfaGVhbHRoLi4iXGFGRkZGRkZGRiBkYW1hZ2UgKCIuLiJcYSIuLnJnYmFfdG9faGV4KHIsZyxiLGEpLi5lLmhlYWx0aC4uIlxhRkZGRkZGRkYpIiwgcixnLGIsYSkKCWVuZAplbmQpCgpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCdzaHV0ZG93bicsIGZ1bmN0aW9uKCkKICAgIHVpLnNldF92aXNpYmxlKHJlZmVyZW5jZS5hYV9lbmFibGUsIHRydWUpCiAgICB1aS5zZXRfdmlzaWJsZShyZWZlcmVuY2UucGl0Y2hbMV0sIHRydWUpCiAgICB1aS5zZXRfdmlzaWJsZShyZWZlcmVuY2UueWF3X2Jhc2UsIHRydWUpCiAgICB1aS5zZXRfdmlzaWJsZShyZWZlcmVuY2UueWF3WzFdLCB0cnVlKQogICAgdWkuc2V0X3Zpc2libGUocmVmZXJlbmNlLmJvZHlfeWF3WzFdLCB0cnVlKQogICAgdWkuc2V0X3Zpc2libGUocmVmZXJlbmNlLmVkZ2VfeWF3LCB0cnVlKQogICAgdWkuc2V0X3Zpc2libGUocmVmZXJlbmNlLmZyZWVzdGFuZGluZ1sxXSwgdHJ1ZSkKICAgIHVpLnNldF92aXNpYmxlKHJlZmVyZW5jZS5mcmVlc3RhbmRpbmdbMl0sIHRydWUpCiAgICB1aS5zZXRfdmlzaWJsZShyZWZlcmVuY2Uucm9sbCwgdHJ1ZSkKCiAgICB1aS5zZXQocmVmZXJlbmNlLnBpdGNoWzFdLCAnT2ZmJykKICAgIHVpLnNldChyZWZlcmVuY2UucGl0Y2hbMl0sIDApCiAgICB1aS5zZXQocmVmZXJlbmNlLnlhd19iYXNlLCAnTG9jYWwgdmlldycpCiAgICB1aS5zZXQocmVmZXJlbmNlLnlhd1sxXSwgJ09mZicpCiAgICB1aS5zZXQocmVmZXJlbmNlLnlhd1syXSwgMCkKICAgIHVpLnNldChyZWZlcmVuY2UueWF3X2ppdHRlclsxXSwgJ09mZicpCiAgICB1aS5zZXQocmVmZXJlbmNlLnlhd19qaXR0ZXJbMl0sIDApCiAgICB1aS5zZXQocmVmZXJlbmNlLmJvZHlfeWF3WzFdLCAnT2ZmJykKICAgIHVpLnNldChyZWZlcmVuY2UuYm9keV95YXdbMl0sIDApCiAgICB1aS5zZXQocmVmZXJlbmNlLmZyZWVzdGFuZGluZ19ib2R5X3lhdywgZmFsc2UpCiAgICB1aS5zZXQocmVmZXJlbmNlLmVkZ2VfeWF3LCBmYWxzZSkKICAgIHVpLnNldChyZWZlcmVuY2UuZnJlZXN0YW5kaW5nWzFdLCBmYWxzZSkKICAgIHVpLnNldChyZWZlcmVuY2UuZnJlZXN0YW5kaW5nWzJdLCAnT24gaG90a2V5JykKZW5kKQoKCgpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCJwYWludF91aSIsIGZ1bmN0aW9uKCkKICAgIGxvY2FsIHIsZyxiLGEgPSB1aS5nZXQoY3VycmVudF9jb2xvcikKCiAgICBjb2xvcl9yID0gcgogICAgY29sb3JfZyA9IGcKICAgIGNvbG9yX2IgPSBiCiAgICBjb2xvcl9hID0gYQoKCiAgICB1aS5zZXQodGV4dDEsIHRleHRfZmFkZV9hbmltYXRpb24oNiwgcixnLGIsYSwgIkcgTCBPIFIgSSBPIFMgQSIpKQogICAgdWkuc2V0KHRleHQyLCB0ZXh0X2ZhZGVfYW5pbWF0aW9uKDYsIHIsZyxiLGEsICBzdGVhbW5hbWUpKQoKICAgIGN0eC5ub3RpZnkucmVuZGVyKCkKZW5kKQoKY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygicGFpbnQiLCBmdW5jdGlvbigpCiAgICAtLWN0eC5kZWZlbnNpdmVfaW5kLnJlbmRlcigpCiAgIC0tY3R4LmFycm93cy5yZW5kZXIoKQplbmQp"}